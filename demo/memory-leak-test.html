<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>VSN Post Replace Test</title>
</head>
<body vsn-service:xhr="XHR">

<a href="./resources/xhr-memory-leak-test.html" vsn-xhr="#test.@html = '<button>wut?</button>' + response;#test.@class += 'open';">Wut?</a>
<a href="./resources/xhr-memory-leak-test.html" vsn-xhr="#test.@html = '<button>huh?</button>' + response;#test.@class += 'open';">Huh?</a>
<button vsn-on:click="?(#buttons li button).test1();" vsn-if="'open' in #test.@class">Call Test 1</button>
<button vsn-on:click="?(#buttons li button).test2();" vsn-if="'open' in #test.@class">Call Test 2</button>
<div id="test-container"><div id="test" class="test"></div></div>

<script type="text/javascript" src="vsn.js"></script>
<script type="text/vsn" vsn-script>
    class #test-container {
        func close() {
            ?>(.test).@html = '';
            #test.@class -= 'open';
        }
    }

    class #test {
        func test() {
            log('huh?');
        }
    }

    class #buttons li button {
        func construct() {
            this.a = 1;
        }

        on click() {
            log('wut');
        }

        func test1() {
            log('testing');
        }

        func test2() {
            log('more testing');
        }
    }
</script>
</body>
</html>
