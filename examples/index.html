<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>VSN.js Examples</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div class="app" id="examples">
      <aside class="nav">
        <h2 class="nav-title">Examples</h2>
        <div
          id="nav"
          class="nav-inner"
          vsn-get!trusted!load="navigation.html"
          vsn-swap="inner"
        ></div>
      </aside>

      <main id="example" class="example">
        <div class="placeholder">Select an example to load it.</div>
      </main>
    </div>

    <script type="module" src="../dist/index.min.js" auto-mount></script>
    <script>
      window.todoOps = {
        add(todos, title) {
          const id = String(Date.now());
          return todos.concat([[id, title, false]]);
        },
        toggle(todos, id) {
          return todos.map((todo) => (todo[0] === id ? [todo[0], todo[1], !todo[2]] : todo));
        },
        remove(todos, id) {
          return todos.filter((todo) => todo[0] !== id);
        },
        clearCompleted(todos) {
          return todos.filter((todo) => !todo[2]);
        },
        visible(todos, filter) {
          if (filter === "active") {
            return todos.filter((todo) => !todo[2]);
          }
          if (filter === "done") {
            return todos.filter((todo) => todo[2]);
          }
          return todos;
        },
        remaining(todos) {
          return todos.filter((todo) => !todo[2]).length;
        },
        listHtml(todos) {
          if (!todos.length) {
            return "<li class=\"todo-empty\">No tasks yet. Add one above.</li>";
          }
          return todos
            .map((todo) => {
              const done = todo[2];
              const label = done ? "Undo" : "Done";
              return (
                "<li class=\"todo-item" +
                (done ? " done" : "") +
                "\">" +
                "<button class=\"todo-check\" data-id=\"" +
                todo[0] +
                "\" vsn-on:click=\"toggleTodo(@data-id);\">" +
                label +
                "</button>" +
                "<span class=\"todo-title\">" +
                todo[1] +
                "</span>" +
                "<button class=\"todo-delete\" data-id=\"" +
                todo[0] +
                "\" vsn-on:click=\"removeTodo(@data-id);\">Remove</button>" +
                "</li>"
              );
            })
            .join("");
        }
      };
    </script>
  </body>
</html>
