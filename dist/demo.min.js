/*! For license information please see demo.min.js.LICENSE.txt */
/* Copyright 2024, VSNjs. vsn 0.1.132 (Tue, 23 Jan 2024 20:03:04 GMT) */if (window) window['VSN_VERSION']='0.1.132';
(()=>{var t={7754:function(t,e,r){"use strict";var n,o,i,a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},l=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Tree=e.AttributableNodes=e.tokenIsBlockCloser=e.tokenIsBlockOpener=e.getTokenBlockOpenerConfig=e.BlockCloseToTypeMap=e.BlockOpenToTypeMap=e.BlockTypeConfigurations=e.TokenType=e.BlockType=void 0;var f,p,h=r(4123),y=r(7549),d=r(6094),v=r(8130),b=r(8052),_=r(329),g=r(3187),w=r(1185),m=r(3770),O=r(2020),x=r(6006),S=r(9446),T=r(2999),A=r(5728),E=r(3203),P=r(8673),j=r(1560),k=r(6357),N=r(9475),R=r(2751),C=r(9826),L=r(2321),M=r(4789),D=r(5155),I=r(3484),B=r(2947),F=r(1096),G=r(2393),H=r(6756),U=r(575),V=r(7893),q=r(8161),W=r(8637);function K(t){return e.BlockTypeConfigurations[e.BlockOpenToTypeMap[t]]}function X(t){return void 0!==e.BlockOpenToTypeMap[t]}!function(t){t[t.BRACE=0]="BRACE",t[t.BRACKET=1]="BRACKET",t[t.PAREN=2]="PAREN",t[t.STATEMENT=3]="STATEMENT"}(f=e.BlockType||(e.BlockType={})),function(t){t[t.NULL=0]="NULL",t[t.WHITESPACE=1]="WHITESPACE",t[t.TYPE_INT=2]="TYPE_INT",t[t.TYPE_UINT=3]="TYPE_UINT",t[t.TYPE_FLOAT=4]="TYPE_FLOAT",t[t.TYPE_STRING=5]="TYPE_STRING",t[t.TYPE_BOOL=6]="TYPE_BOOL",t[t.RETURN=7]="RETURN",t[t.NOT=8]="NOT",t[t.OF=9]="OF",t[t.AS=10]="AS",t[t.IN=11]="IN",t[t.WITH=12]="WITH",t[t.NAMED_STACK=13]="NAMED_STACK",t[t.FOR=14]="FOR",t[t.IF=15]="IF",t[t.ELSE_IF=16]="ELSE_IF",t[t.ELSE=17]="ELSE",t[t.FUNC=18]="FUNC",t[t.LOOP=19]="LOOP",t[t.ON=20]="ON",t[t.CLASS=21]="CLASS",t[t.NAME=22]="NAME",t[t.L_BRACE=23]="L_BRACE",t[t.R_BRACE=24]="R_BRACE",t[t.L_BRACKET=25]="L_BRACKET",t[t.R_BRACKET=26]="R_BRACKET",t[t.L_PAREN=27]="L_PAREN",t[t.R_PAREN=28]="R_PAREN",t[t.TILDE=29]="TILDE",t[t.PERIOD=30]="PERIOD",t[t.COMMA=31]="COMMA",t[t.COLON=32]="COLON",t[t.SEMICOLON=33]="SEMICOLON",t[t.STRING_FORMAT=34]="STRING_FORMAT",t[t.STRING_LITERAL=35]="STRING_LITERAL",t[t.NUMBER_LITERAL=36]="NUMBER_LITERAL",t[t.BOOLEAN_LITERAL=37]="BOOLEAN_LITERAL",t[t.NULL_LITERAL=38]="NULL_LITERAL",t[t.STRICT_EQUALS=39]="STRICT_EQUALS",t[t.STRICT_NOT_EQUALS=40]="STRICT_NOT_EQUALS",t[t.EQUALS=41]="EQUALS",t[t.NOT_EQUALS=42]="NOT_EQUALS",t[t.GREATER_THAN_EQUAL=43]="GREATER_THAN_EQUAL",t[t.LESS_THAN_EQUAL=44]="LESS_THAN_EQUAL",t[t.GREATER_THAN=45]="GREATER_THAN",t[t.LESS_THAN=46]="LESS_THAN",t[t.ASSIGN=47]="ASSIGN",t[t.AND=48]="AND",t[t.OR=49]="OR",t[t.ADD=50]="ADD",t[t.SUBTRACT=51]="SUBTRACT",t[t.MULTIPLY=52]="MULTIPLY",t[t.DIVIDE=53]="DIVIDE",t[t.ADD_ASSIGN=54]="ADD_ASSIGN",t[t.SUBTRACT_ASSIGN=55]="SUBTRACT_ASSIGN",t[t.MULTIPLY_ASSIGN=56]="MULTIPLY_ASSIGN",t[t.DIVIDE_ASSIGN=57]="DIVIDE_ASSIGN",t[t.EXCLAMATION_POINT=58]="EXCLAMATION_POINT",t[t.ELEMENT_REFERENCE=59]="ELEMENT_REFERENCE",t[t.ELEMENT_ATTRIBUTE=60]="ELEMENT_ATTRIBUTE",t[t.ELEMENT_STYLE=61]="ELEMENT_STYLE",t[t.ELEMENT_QUERY=62]="ELEMENT_QUERY",t[t.UNIT=63]="UNIT",t[t.XHR_GET=64]="XHR_GET",t[t.XHR_POST=65]="XHR_POST",t[t.XHR_PUT=66]="XHR_PUT",t[t.XHR_DELETE=67]="XHR_DELETE",t[t.MODIFIER=68]="MODIFIER",t[t.DISPATCH_EVENT=69]="DISPATCH_EVENT"}(p=e.TokenType||(e.TokenType={})),e.BlockTypeConfigurations=((n={})[f.BRACE]={open:p.L_BRACE,close:p.R_BRACE},n[f.BRACKET]={open:p.L_BRACKET,close:p.R_BRACKET},n[f.PAREN]={open:p.L_PAREN,close:p.R_PAREN},n),e.BlockOpenToTypeMap=((o={})[p.L_BRACE]=f.BRACE,o[p.L_BRACKET]=f.BRACKET,o[p.L_PAREN]=f.PAREN,o),e.BlockCloseToTypeMap=((i={})[p.R_BRACE]=f.BRACE,i[p.R_BRACKET]=f.BRACKET,i[p.R_PAREN]=f.PAREN,i),e.getTokenBlockOpenerConfig=K,e.tokenIsBlockOpener=X,e.tokenIsBlockCloser=function(t){return void 0!==e.BlockCloseToTypeMap[t]};var Q=[{type:p.WHITESPACE,pattern:/^[\s\n\r]+/},{type:p.XHR_POST,pattern:/^>>/},{type:p.XHR_PUT,pattern:/^<>/},{type:p.XHR_GET,pattern:/^<</},{type:p.XHR_DELETE,pattern:/^></},{type:p.DISPATCH_EVENT,pattern:/^!!!?([_a-zA-Z][-_a-zA-Z0-9]+)/},{type:p.TYPE_INT,pattern:/^int\s/},{type:p.TYPE_UINT,pattern:/^uint\s/},{type:p.TYPE_FLOAT,pattern:/^float\s/},{type:p.TYPE_BOOL,pattern:/^bool\s/},{type:p.UNIT,pattern:/^\d+\.?\d?(?:cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)/},{type:p.BOOLEAN_LITERAL,pattern:/^(true|false)/},{type:p.NULL_LITERAL,pattern:/^null/},{type:p.RETURN,pattern:/^return\s/},{type:p.NOT,pattern:/^not\s/},{type:p.OF,pattern:/^of\s/},{type:p.IN,pattern:/^in\s/},{type:p.AS,pattern:/^as\s/},{type:p.WITH,pattern:/^with(?=\||\s)?/},{type:p.NAMED_STACK,pattern:/^stack(?=\||\s)?/},{type:p.FOR,pattern:/^for\s?(?=\()/},{type:p.IF,pattern:/^if\s?(?=\()/},{type:p.ELSE_IF,pattern:/^else if\s?(?=\()/},{type:p.ELSE,pattern:/^else\s?(?=\{)/},{type:p.FUNC,pattern:/^func\s/},{type:p.LOOP,pattern:/^loop\s/},{type:p.ON,pattern:/^on\s/},{type:p.CLASS,pattern:/^class\s/},{type:p.ELEMENT_ATTRIBUTE,pattern:/^\.?@[-_a-zA-Z0-9]*/},{type:p.ELEMENT_STYLE,pattern:/^\.?\$[-a-zA-Z0-9]*/},{type:p.ELEMENT_REFERENCE,pattern:/^#[-_a-zA-Z0-9]*/},{type:p.ELEMENT_QUERY,pattern:/^\?[>|<]?\(([#.\[\]:,=\-_a-zA-Z0-9*\s]*[\]_a-zA-Z0-9*])\)/},{type:p.NAME,pattern:/^[_a-zA-Z][_a-zA-Z0-9]*/},{type:p.NUMBER_LITERAL,pattern:/^-?\d+(?:\.\d+)?(?:e[+\-]?\d+)?/i},{type:p.L_BRACE,pattern:/^{/},{type:p.R_BRACE,pattern:/^}/},{type:p.L_BRACKET,pattern:/^\[/},{type:p.R_BRACKET,pattern:/^]/},{type:p.L_PAREN,pattern:/^\(/},{type:p.R_PAREN,pattern:/^\)/},{type:p.TILDE,pattern:/^~/},{type:p.PERIOD,pattern:/^\./},{type:p.COMMA,pattern:/^,/},{type:p.EQUALS,pattern:/^==/},{type:p.NOT_EQUALS,pattern:/^!=/},{type:p.GREATER_THAN_EQUAL,pattern:/^>=/},{type:p.LESS_THAN_EQUAL,pattern:/^<=/},{type:p.GREATER_THAN,pattern:/^>/},{type:p.LESS_THAN,pattern:/^</},{type:p.COLON,pattern:/^:/},{type:p.SEMICOLON,pattern:/^;/},{type:p.STRING_FORMAT,pattern:/^`([^`]*)`/},{type:p.STRING_LITERAL,pattern:/^"([^"]*)"/},{type:p.STRING_LITERAL,pattern:/^'([^']*)'/},{type:p.AND,pattern:/^&&/},{type:p.OR,pattern:/^\|\|/},{type:p.ADD_ASSIGN,pattern:/^\+=/},{type:p.SUBTRACT_ASSIGN,pattern:/^-=/},{type:p.MULTIPLY_ASSIGN,pattern:/^\*=/},{type:p.DIVIDE_ASSIGN,pattern:/^\/=/},{type:p.ADD,pattern:/^\+/},{type:p.SUBTRACT,pattern:/^-/},{type:p.MULTIPLY,pattern:/^\*/},{type:p.DIVIDE,pattern:/^\//},{type:p.ASSIGN,pattern:/^=/},{type:p.EXCLAMATION_POINT,pattern:/^!/},{type:p.MODIFIER,pattern:/^\|[a-zA-Z0-9,]+/}];e.AttributableNodes=[h.RootScopeMemberNode,y.ScopeMemberNode,d.ElementAttributeNode];var z=function(){function t(e){this.code=e,t.cache[e]?this._root=t.cache[e]:(this.parse(),t.cache[e]=this._root)}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),t.prototype.parse=function(){var e=t.tokenize(this.code);this._root=t.processTokens(e)},t.prototype.evaluate=function(e,r,n){return void 0===n&&(n=null),a(this,void 0,void 0,(function(){var o,i;return s(this,(function(a){switch(a.label){case 0:return o={scope:e,dom:r,tag:n,tree:this},t.executing.add(o),[4,this._root.evaluate(e,r,n)];case 1:return i=a.sent(),t.executing.delete(o),[2,i]}}))}))},t.prototype.prepare=function(t,e,r){return void 0===r&&(r=null),a(this,void 0,void 0,(function(){return s(this,(function(n){switch(n.label){case 0:return this._root.isPreparationRequired()?[4,this._root.prepare(t,e,r,{initial:!0})]:[2];case 1:return[2,n.sent()]}}))}))},t.prototype.bindToScopeChanges=function(t,e,r,n){return void 0===n&&(n=null),a(this,void 0,void 0,(function(){var o,i,a,c,l,f,p,v;return s(this,(function(s){switch(s.label){case 0:s.trys.push([0,9,10,11]),o=u(this._root.findChildrenByTypes([h.RootScopeMemberNode,y.ScopeMemberNode,d.ElementAttributeNode],"ScopeMemberNodes")),i=o.next(),s.label=1;case 1:return i.done?[3,8]:(a=i.value,c=t,a instanceof y.ScopeMemberNode?[4,a.scope.evaluate(t,r)]:[3,3]);case 2:return c=s.sent(),[3,5];case 3:return a instanceof d.ElementAttributeNode&&a.elementRef?[4,a.elementRef.evaluate(t,r,n)]:[3,5];case 4:c=s.sent()[0].scope,s.label=5;case 5:return[4,a.name.evaluate(t,r,n)];case 6:l=s.sent(),c.on("change:"+l,e),s.label=7;case 7:return i=o.next(),[3,1];case 8:return[3,11];case 9:return f=s.sent(),p={error:f},[3,11];case 10:try{i&&!i.done&&(v=o.return)&&v.call(o)}finally{if(p)throw p.error}return[7];case 11:return[2]}}))}))},t.reprepareExecutingTrees=function(){var e=this;t.executing.forEach((function(t){return a(e,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,t.tree.prepare(t.scope,t.dom,t.tag)];case 1:return e.sent(),[2]}}))}))}))},t.tokenize=function(t){var e,r,n,o=[];if(!t||0===t.length)return o;do{n=!1;try{for(var i=(e=void 0,u(Q)),a=i.next();!a.done;a=i.next()){var s=a.value,c=s.pattern.exec(t);if(c){o.push({type:s.type,value:c[c.length-1],full:c[0],groups:c}),t=t.substring(c[0].length),n=!0;break}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}while(t.length>0&&n);return o},t.stripWhiteSpace=function(t){for(var e=0;e<t.length;e++)t[e].type===p.WHITESPACE&&(t.splice(e,1),e--);return t},t.processTokens=function(e,r,n){var o,i;void 0===r&&(r=null),void 0===n&&(n=null);var a=[],s=n,c=r,l=0;for(t.stripWhiteSpace(e);e.length>0&&!(++l>1e3);){e[0].type===p.RETURN&&e.shift();var f=e[0];if(f.type===p.NAME)c=new h.RootScopeMemberNode(new b.LiteralNode(f.value)),e.shift();else if(M.XHRNode.match(e))c=M.XHRNode.parse(c,e[0],e);else if(f.type===p.DISPATCH_EVENT)c=H.DispatchEventNode.parse(c,e[0],e);else if(f.type===p.WITH)s=c=U.WithNode.parse(c,e[0],e),a.push(c),c=null;else if(f.type===p.NAMED_STACK)s=c=q.NamedStackNode.parse(c,e[0],e),a.push(c),c=null;else if(f.type===p.AS)c=V.AsNode.parse(c,e[0],e);else if(f.type===p.IF)s=c=_.IfStatementNode.parse(c,f,e),a.push(c),c=null;else if(f.type===p.FOR)s=c=g.ForStatementNode.parse(c,f,e),a.push(c),c=null;else if(f.type===p.FUNC)s=c=I.FunctionNode.parse(c,f,e),a.push(c),c=null;else if(f.type===p.LOOP)s=c=W.LoopNode.parse(c,f,e),a.push(c),c=null;else if(f.type===p.ON)s=c=F.OnNode.parse(c,f,e),a.push(c),c=null;else if(f.type===p.CLASS)s=c=B.ClassNode.parse(c,f,e),a.push(c),c=null;else if(D.StringFormatNode.match(e))c=D.StringFormatNode.parse(c,e[0],e);else if(f.type===p.STRING_LITERAL)c=new b.LiteralNode(f.value),e.shift();else if(f.type===p.NUMBER_LITERAL)c=new w.NumberLiteralNode(f.value),e.shift();else if(e[0].type===p.ELEMENT_REFERENCE)c=new m.ElementQueryNode(e[0].value,!0),e.shift();else if(e[0].type===p.ELEMENT_QUERY)c=m.ElementQueryNode.parse(c,e[0],e);else if(e[0].type===p.L_BRACKET)c=c?O.IndexNode.parse(c,f,e):x.ArrayNode.parse(c,f,e);else if(e[0].type===p.L_BRACE)c=S.ObjectNode.parse(c,f,e);else if(e[0].type===p.ELEMENT_ATTRIBUTE)c=new d.ElementAttributeNode(c,e[0].value),e.shift();else if(e[0].type===p.ELEMENT_STYLE)c=new T.ElementStyleNode(c,e[0].value),e.shift();else if(null!==c&&f.type===p.PERIOD&&e[1].type===p.NAME)c=new y.ScopeMemberNode(c,new b.LiteralNode(e[1].value)),e.splice(0,2);else if(e[0].type===p.L_PAREN){var K=t.getBlockTokens(e),X=[];try{for(var Q=(o=void 0,u(K)),z=Q.next();!z.done;z=Q.next()){var Y=z.value;X.push(t.processTokens(Y))}}catch(t){o={error:t}}finally{try{z&&!z.done&&(i=Q.return)&&i.call(Q)}finally{if(o)throw o.error}}c=c?new A.FunctionCallNode(c,new E.FunctionArgumentNode(X)):new v.BlockNode(X)}else if(e[0].type===p.SEMICOLON)c&&a.push(c),c=null,e.shift();else if(P.InNode.match(e))c=P.InNode.parse(c,f,e);else if(j.ComparisonNode.match(e))c=j.ComparisonNode.parse(c,f,e);else if(k.ArithmeticNode.match(e))c=k.ArithmeticNode.parse(c,f,e);else if(N.AssignmentNode.match(e))c=N.AssignmentNode.parse(c,f,e);else if(e[0].type===p.WHITESPACE)e.shift();else if(e[0].type===p.UNIT)c=new R.UnitLiteralNode(e[0].value),e.shift();else if(e[0].type===p.BOOLEAN_LITERAL)c=new C.BooleanLiteralNode(e[0].value),e.shift();else if(e[0].type===p.NULL_LITERAL)c=new b.LiteralNode(null),e.shift();else if(e[0].type===p.EXCLAMATION_POINT)c=L.NotNode.parse(c,e[0],e);else{if(e[0].type!==p.MODIFIER){var $=t.toCode(e,10);throw Error("Syntax Error. Near "+$)}G.ModifierNode.parse(c||s,e[0],e)}}return c&&a.push(c),new v.BlockNode(a)},t.toCode=function(t,e){var r="";e=e||t.length;for(var n=0;n<e&&t[n];n++)r+=t[n].value;return r},t.getBlockInfo=function(t){var e,r,n,o,i,a=t[0];switch(e=a.type===p.L_PAREN?f.PAREN:a.type===p.L_BRACE?f.BRACE:a.type===p.L_BRACKET?f.BRACKET:f.STATEMENT){case f.PAREN:r=p.L_PAREN,n=p.R_PAREN,o="(",i=")";break;case f.BRACE:r=p.L_BRACE,n=p.R_BRACE,o="{",i="}";break;case f.BRACKET:r=p.L_BRACKET,n=p.R_BRACKET,o="[",i="]";break;default:r=null,n=p.SEMICOLON,o=null,i=";"}return{type:e,open:r,close:n,openCharacter:o,closeCharacter:i}},t.getNextStatementTokens=function(e,r,n,o){void 0===r&&(r=!0),void 0===n&&(n=!0),void 0===o&&(o=!1);var i=t.getBlockInfo(e);return n&&e[0].type===i.open&&e.shift(),t.getTokensUntil(e,i.close,r,o)},t.getBlockTokens=function(e,r){void 0===r&&(r=p.COMMA);var n=t.getBlockInfo(e),o=[],i=[],a=!0;for(e.shift();a;){var s=e[0];if(void 0===s)throw Error("Invalid Syntax, missing "+n.closeCharacter);if(s.type===n.close)a=!1,e.shift();else if(X(s.type)){var u=e.shift(),f=t.getTokensUntil(e,K(s.type).close,!0,!0);f.unshift(u),i.push.apply(i,l([],c(f)))}else null!==r&&s.type===r?(o.push(i),i=[],e.shift()):s.type!==p.WHITESPACE&&i.push(e.shift())}return i.length>0&&o.push(i),o},t.getTokensUntil=function(e,r,n,o,i,a){void 0===r&&(r=p.SEMICOLON),void 0===n&&(n=!0),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===a&&(a=null);var s=[];a=a||t.getBlockInfo(e);for(var u=0,c=0,l=0,f=0;f<e.length;f++){var h=e[f];if(h.type===a.open&&0===f||(h.type===p.L_PAREN&&r!==p.L_PAREN&&(u+=1),h.type===p.L_BRACE&&r!==p.L_BRACE&&(c+=1),h.type===p.L_BRACKET&&r!==p.L_BRACKET&&(l+=1)),[r,p.R_BRACKET,p.R_BRACE,p.R_PAREN].indexOf(h.type)>-1)if(u>0&&h.type===p.R_PAREN)u-=1;else if(c>0&&h.type===p.R_BRACE)c-=1;else if(l>0&&h.type===p.R_BRACKET)l-=1;else{if(h.type===r&&0===u&&0===c&&0===l){o&&s.push(h),(o||n)&&h.type!==p.SEMICOLON&&e.shift();break}if(h.type!==r||!(u>0||c>0||l>0)){if(i)break;throw Error("Invalid syntax, expecting "+r+".")}}s.push(h),e.shift(),f--}return s},t.consumeTypes=function(t,e){var r,n,o=[];try{for(var i=u(t),a=i.next();!a.done;a=i.next()){var s=a.value;if(!(e.indexOf(s.type)>-1))break;o.push(s)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t.splice(0,o.length),o},t.apply=function(e,r,n,o){return a(this,void 0,void 0,(function(){return s(this,(function(i){switch(i.label){case 0:return[4,new t(e).evaluate(r,n,o)];case 1:return[2,i.sent()]}}))}))},t.executing=new Set,t.cache={},t}();e.Tree=z},6357:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ArithmeticNode=void 0;var s=r(7754),u=function(t){function e(e,r,n){var o=t.call(this)||this;return o.left=e,o.right=r,o.type=n,o}return o(e,t),e.prototype._getChildNodes=function(){return[this.left,this.right]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.left.evaluate(t,e,r)];case 1:return n=i.sent(),[4,this.right.evaluate(t,e,r)];case 2:switch(o=i.sent(),this.type){case s.TokenType.ADD:return[2,n+o];case s.TokenType.SUBTRACT:return[2,n-o];case s.TokenType.MULTIPLY:return[2,n*o];case s.TokenType.DIVIDE:return[2,n/o]}return[2]}}))}))},e.match=function(t){return[s.TokenType.ADD,s.TokenType.SUBTRACT,s.TokenType.MULTIPLY,s.TokenType.DIVIDE].indexOf(t[0].type)>-1},e.parse=function(t,r,n){return n.splice(0,1),new e(t,s.Tree.processTokens(s.Tree.getNextStatementTokens(n)),r.type)},e}(r(8403).Node);e.ArithmeticNode=u},6006:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayNode=void 0;var l=r(8572),f=r(7754),p=function(t){function e(e){var r=t.call(this)||this;return r.values=e,r}return o(e,t),e.prototype._getChildNodes=function(){return new(Array.bind.apply(Array,u([void 0],s(this.values))))},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,s,u,f,p,h,y;return a(this,(function(a){switch(a.label){case 0:n=new l.WrappedArray,a.label=1;case 1:a.trys.push([1,6,7,8]),o=c(this.values),i=o.next(),a.label=2;case 2:return i.done?[3,5]:(s=i.value,f=(u=n).push,[4,s.evaluate(t,e,r)]);case 3:f.apply(u,[a.sent()]),a.label=4;case 4:return i=o.next(),[3,2];case 5:return[3,8];case 6:return p=a.sent(),h={error:p},[3,8];case 7:try{i&&!i.done&&(y=o.return)&&y.call(o)}finally{if(h)throw h.error}return[7];case 8:return[2,n]}}))}))},e.match=function(t){return t[0].type===f.TokenType.L_BRACKET},e.parse=function(t,r,n){var o,i,a=f.Tree.getBlockTokens(n),s=[];try{for(var u=c(a),l=u.next();!l.done;l=u.next()){var p=l.value;s.push(f.Tree.processTokens(p))}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}return new e(s)},e}(r(8403).Node);e.ArrayNode=p},7893:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.AsNode=void 0;var s=function(t){function e(e,r){var n=t.call(this)||this;return n.context=e,n.name=r,n}return o(e,t),e.prototype._getChildNodes=function(){return[this.context]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return[4,this.context.evaluate(t,e,r)];case 1:return n=o.sent(),t.set(this.name,n),[2,n]}}))}))},e.parse=function(t,r,n){return n.shift(),new e(t,n.shift().value)},e}(r(8403).Node);e.AsNode=s},9475:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.AssignmentNode=void 0;var l=r(4843),f=r(3276),p=r(7754),h=r(8403),y=r(4123),d=r(7549),v=r(3770),b=r(6094),_=r(2999),g=r(2751),w=r(2018),m=function(t){function e(e,r,n){var o=t.call(this)||this;return o.left=e,o.right=r,o.type=n,o}return o(e,t),e.prototype._getChildNodes=function(){return[this.left,this.right]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,p,h,y,g,m,O,x,S,T,A;return a(this,(function(a){switch(a.label){case 0:return n=[],[4,this.left.name.evaluate(t,e,r)];case 1:return o=a.sent(),this.left instanceof d.ScopeMemberNode?[4,this.left.scope.evaluate(t,e,r)]:[3,3];case 2:return i=a.sent(),this.left.scope instanceof v.ElementQueryNode?this.left.scope.first?n.push(i):n.push.apply(n,u([],s(i))):i instanceof l.Scope?n.push(i):i instanceof w.ScopeObject?n.push(i.scope):n.push(t),[3,6];case 3:return(this.left instanceof b.ElementAttributeNode||this.left instanceof _.ElementStyleNode)&&this.left.elementRef?[4,this.left.elementRef.evaluate(t,e,r)]:[3,5];case 4:return p=a.sent(),this.left.elementRef.first||p instanceof f.DOMObject?n.push(p):n=p,[3,6];case 5:n.push(t),a.label=6;case 6:h=[],a.label=7;case 7:a.trys.push([7,15,16,17]),y=c(n),g=y.next(),a.label=8;case 8:return g.done?[3,14]:(m=g.value)?m instanceof f.DOMObject?[4,this.handleDOMObject(o,e,t,m,r)]:[3,10]:[3,13];case 9:return a.sent(),[3,13];case 10:return m.$wrapped&&m.$scope&&(m=m.$scope),[4,this.left.evaluate(t,e,r)];case 11:return O=a.sent(),[4,this.right.evaluate(t,e,r)];case 12:x=a.sent(),O=this.handle(o,O,x,m),h.push(O),a.label=13;case 13:return g=y.next(),[3,8];case 14:return[3,17];case 15:return S=a.sent(),T={error:S},[3,17];case 16:try{g&&!g.done&&(A=y.return)&&A.call(y)}finally{if(T)throw T.error}return[7];case 17:return[2,h.length>1?h:h[0]]}}))}))},e.prototype.handle=function(t,e,r,n){return e=e instanceof Array?this.handleArray(t,e,r,n):e instanceof g.UnitLiteral||r instanceof g.UnitLiteral?this.handleUnit(t,e,r,n):Number.isFinite(e)?this.handleNumber(t,e,r,n):this.handleString(t,e,r,n)},e.prototype.handleNumber=function(t,e,r,n){switch(null===r||Number.isFinite(r)||(r=parseFloat(""+r)),this.type){case p.TokenType.ASSIGN:e=r;break;case p.TokenType.ADD_ASSIGN:e+=r;break;case p.TokenType.SUBTRACT_ASSIGN:e-=r;break;case p.TokenType.MULTIPLY_ASSIGN:e*=r;break;case p.TokenType.DIVIDE_ASSIGN:e/=r}return n.set(t,e),e},e.prototype.handleString=function(t,e,r,n){switch(this.type){case p.TokenType.ASSIGN:e=r;break;case p.TokenType.ADD_ASSIGN:e=""+e+r;break;case p.TokenType.SUBTRACT_ASSIGN:e.replace(r,"");break;case p.TokenType.MULTIPLY_ASSIGN:e*=r;break;case p.TokenType.DIVIDE_ASSIGN:e/=r}return n.set(t,e),e},e.prototype.handleUnit=function(t,e,r,n){e instanceof g.UnitLiteral||(e=new g.UnitLiteral(e)),r instanceof g.UnitLiteral||(r=new g.UnitLiteral(r));var o=e.unit||r.unit||"px";switch(this.type){case p.TokenType.ASSIGN:e=r;break;case p.TokenType.ADD_ASSIGN:e=new g.UnitLiteral(""+(e.amount+r.amount)+o);break;case p.TokenType.SUBTRACT_ASSIGN:e=new g.UnitLiteral(""+(e.amount-r.amount)+o);break;case p.TokenType.MULTIPLY_ASSIGN:e=new g.UnitLiteral(""+e.amount*r.amount+o);break;case p.TokenType.DIVIDE_ASSIGN:e=new g.UnitLiteral(""+e.amount/r.amount+o)}return n.set(t,e),e},e.prototype.handleDOMObject=function(t,e,r,n,o){return i(this,void 0,void 0,(function(){var i,s;return a(this,(function(a){switch(a.label){case 0:return i=n.scope.get(t),[4,this.right.evaluate(r,e,o)];case 1:return s=a.sent(),[2,this.handle(t,i,s,n.scope)]}}))}))},e.prototype.handleArray=function(t,e,r,n){var o,i;switch(r instanceof Array||(r=[r]),this.type){case p.TokenType.ASSIGN:e.splice(0,e.length),e.push.apply(e,u([],s(r)));break;case p.TokenType.ADD_ASSIGN:e.push.apply(e,u([],s(r)));break;case p.TokenType.SUBTRACT_ASSIGN:for(var a=e.length-1;a>=0;a--)r.indexOf(e[a])>-1&&(e.splice(a,1),a++);break;case p.TokenType.TILDE:try{for(var l=c(r),f=l.next();!f.done;f=l.next()){var h=f.value,y=e.indexOf(h);y>-1?e.splice(y,1):e.push(h)}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}}return n.dispatch("change:"+t),e},e.match=function(t){return[p.TokenType.ASSIGN,p.TokenType.ADD_ASSIGN,p.TokenType.SUBTRACT_ASSIGN,p.TokenType.MULTIPLY_ASSIGN,p.TokenType.DIVIDE_ASSIGN,p.TokenType.TILDE].indexOf(t[0].type)>-1},e.parse=function(t,r,n){if(!(t instanceof y.RootScopeMemberNode||t instanceof d.ScopeMemberNode||t instanceof b.ElementAttributeNode||t instanceof _.ElementStyleNode))throw SyntaxError("Invalid assignment syntax near "+p.Tree.toCode(n.splice(0,10)));n.splice(0,1);var o=p.Tree.getTokensUntil(n,p.TokenType.SEMICOLON,!1,!0,!0,{type:p.BlockType.STATEMENT,open:p.TokenType.NULL,close:p.TokenType.SEMICOLON,openCharacter:"",closeCharacter:";"});return new e(t,p.Tree.processTokens(o),r.type)},e}(h.Node);e.AssignmentNode=m},8130:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.BlockNode=void 0;var c=function(t){function e(e){var r=t.call(this)||this;return r.statements=e,r}return o(e,t),e.prototype._getChildNodes=function(){return u([],s(this.statements))},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o;return a(this,(function(i){switch(i.label){case 0:n=null,o=0,i.label=1;case 1:return o<this.statements.length?[4,this.statements[o].evaluate(t,e,r)]:[3,4];case 2:n=i.sent(),i.label=3;case 3:return o++,[3,1];case 4:return[2,n]}}))}))},e}(r(8403).Node);e.BlockNode=c},9826:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanLiteralNode=void 0;var i=function(t){function e(e){var r=t.call(this,e)||this;return r.value=e,r.value="true"===e,r}return o(e,t),e}(r(8052).LiteralNode);e.BooleanLiteralNode=i},2947:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.ClassNode=void 0;var l=r(4843),f=r(712),p=r(7754),h=r(8403),y=r(1371),d=r(1096),v=function(t){function e(e,r){var n=t.call(this)||this;return n.selector=e,n.block=r,n.requiresPrep=!0,n.classScope=new l.Scope,n}return o(e,t),Object.defineProperty(e.prototype,"fullSelector",{get:function(){return this._fullSelector},enumerable:!1,configurable:!0}),e.prototype.updateMeta=function(t){return(t=t||{}).ClassNode=this,t},e.prototype.prepare=function(t,r,n,o){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var t,i,s=this;return a(this,(function(a){switch(a.label){case 0:return o=Object.assign({},o)||{},t=!!o.initial,i=!1,o.ClassNodePrepare=t,t?(o.ClassNodeSelector?(this._parentSelector=o.ClassNodeSelector,e.classChildren[o.ClassNodeSelector].push(this.selector),o.ClassNodeSelector=o.ClassNodeSelector+" "+this.selector):(i=!0,o.ClassNodeSelector=this.selector),this._fullSelector=o.ClassNodeSelector,e.classes[this._fullSelector]?[2]:(e.classes[this._fullSelector]=this,e.classChildren[this._fullSelector]=[],e.preppedTags[this._fullSelector]=[],e.preppingElements[this._fullSelector]=[],void 0===e.classParents[this.selector]&&(e.classParents[this.selector]=[]),e.classParents[this.selector].push(this._fullSelector),[4,this.block.prepare(this.classScope,r,n,o)])):[3,5];case 1:return a.sent(),y.Registry.class(this),i?r.built?[4,this.findClassElements(r)]:[3,3]:[3,4];case 2:a.sent(),a.label=3;case 3:r.on("built",(function(){return s.findClassElements(r)})),a.label=4;case 4:return[3,7];case 5:return o.PrepForSelector!==this.fullSelector?[3,7]:[4,this.block.prepare(n.scope,r,n,o)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},e.prototype.findClassElements=function(t,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,u,c,l,p,h,y,d,v,b,_,g,w,m,O,x,S,T,A,E;return a(this,(function(a){switch(a.label){case 0:n=[],a.label=1;case 1:a.trys.push([1,6,7,8]),o=s(Array.from(t.querySelectorAll(this.fullSelector,r))),i=o.next(),a.label=2;case 2:return i.done?[3,5]:(u=i.value,e.preppingElements[this._fullSelector].indexOf(u)>-1?[3,4]:(e.preppingElements[this._fullSelector].push(u),l=(c=n).push,[4,e.addElementClass(this._fullSelector,u,t,u[f.Tag.TaggedVariable]||null)]));case 3:l.apply(c,[a.sent()]),e.preppingElements[this._fullSelector].splice(e.preppingElements[this._fullSelector].indexOf(u),1),a.label=4;case 4:return i=o.next(),[3,2];case 5:return[3,8];case 6:return p=a.sent(),O={error:p},[3,8];case 7:try{i&&!i.done&&(x=o.return)&&x.call(o)}finally{if(O)throw O.error}return[7];case 8:a.trys.push([8,19,20,21]),h=s(e.classChildren[this._fullSelector]),y=h.next(),a.label=9;case 9:if(y.done)return[3,18];if(d=y.value,!(v=e.classes[this._fullSelector+" "+d]))return[3,17];a.label=10;case 10:a.trys.push([10,15,16,17]),A=void 0,b=s(n),_=b.next(),a.label=11;case 11:return _.done?[3,14]:(g=_.value,[4,v.findClassElements(t,g)]);case 12:a.sent(),a.label=13;case 13:return _=b.next(),[3,11];case 14:return[3,17];case 15:return w=a.sent(),A={error:w},[3,17];case 16:try{_&&!_.done&&(E=b.return)&&E.call(b)}finally{if(A)throw A.error}return[7];case 17:return y=h.next(),[3,9];case 18:return[3,21];case 19:return m=a.sent(),S={error:m},[3,21];case 20:try{y&&!y.done&&(T=h.return)&&T.call(h)}finally{if(S)throw S.error}return[7];case 21:return[2]}}))}))},e.prototype.constructTag=function(t,r,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var o;return a(this,(function(i){switch(i.label){case 0:return-1!==e.preppedTags[this.fullSelector].indexOf(t)?[2]:(e.preppedTags[this.fullSelector].push(t),null===n&&(n=this.classScope.has("construct")),t.createScope(!0),(o=this.updateMeta()).PrepForSelector=this.fullSelector,[4,this.block.prepare(t.scope,r,t,o)]);case 1:return i.sent(),n?[4,this.classScope.get("construct").getFunction(t.scope,r,t,!0)]:[3,4];case 2:return[4,i.sent()()];case 3:i.sent(),i.label=4;case 4:return t.dispatch(this.fullSelector+".construct",t.element.id),e.addPreparedClassToElement(t.element,this.fullSelector),[2]}}))}))},e.prototype.deconstructTag=function(t,r,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var o,i,u,c,l,f;return a(this,(function(a){switch(a.label){case 0:return null===n&&(n=this.classScope.has("deconstruct")),n?[4,this.classScope.get("deconstruct").getFunction(t.scope,r,t,!0)]:[3,3];case 1:return[4,a.sent()()];case 2:a.sent(),a.label=3;case 3:try{for(o=s(this.classScope.keys),i=o.next();!i.done;i=o.next())u=i.value,this.classScope.get(u)instanceof d.OnNode&&(c=this.classScope.get(u),t.removeContextEventHandlers(c))}catch(t){l={error:t}}finally{try{i&&!i.done&&(f=o.return)&&f.call(o)}finally{if(l)throw l.error}}return t.dispatch(this.fullSelector+".deconstruct"),e.preppedTags[this.fullSelector].splice(e.preppedTags[this.fullSelector].indexOf(t),1),e.removePreparedClassFromElement(t.element,this.fullSelector),[2]}}))}))},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,null]}))}))},e.parse=function(t,r,n){var o,i;n.shift();var a=[];try{for(var u=s(n),c=u.next();!c.done;c=u.next()){var l=c.value;if(l.type===p.TokenType.L_BRACE)break;a.push(l.value)}}catch(t){o={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(o)throw o.error}}var f=a.join("").trim();return f.startsWith(">")&&(f=":scope "+f),n.splice(0,a.length),new e(f,p.Tree.processTokens(p.Tree.getNextStatementTokens(n,!0,!0)))},e.prototype.getSelectorPath=function(){for(var t=[this.selector],r=this._parentSelector;r;)t.push(e.classes[r].selector),r=e.classes[r]._parentSelector;return t.reverse()},e.checkForClassChanges=function(t,r,n){var o;return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var i,l,p,h,y,d,v,b,_,g,w,m,O,x,S,T,A,E,P,j,k,N,R,C,L,M,D,I,B,F;return a(this,(function(a){switch(a.label){case 0:i=c([t.tagName.toLowerCase()],u(Array.from(t.classList).map((function(t){return"."+t})))),l=c([],u(e.getClassesForElement(t))),t.id&&i.push("#"+t.id);try{for(p=s(i),h=p.next();!h.done;h=p.next())b=h.value,(y=e.classParents[b])&&l.push.apply(l,c([],u(y.filter((function(t){return!l.includes(t)})))))}catch(t){R={error:t}}finally{try{h&&!h.done&&(C=p.return)&&C.call(p)}finally{if(R)throw R.error}}return n?[3,2]:[4,r.getTagForElement(t,!0)];case 1:n=a.sent(),a.label=2;case 2:a.trys.push([2,23,24,25]),d=s(l),v=d.next(),a.label=3;case 3:return v.done?[3,22]:(b=v.value,_=e.getClassesForElement(t).includes(b),g=null===(o=e.classes[b])||void 0===o?void 0:o.getSelectorPath(),w=r.querySelectPath(g),m=w.includes(t),O=!1,!m||_?[3,5]:[4,e.addElementClass(b,t,r,n)]);case 4:return a.sent(),O=!0,[3,7];case 5:return m||!_?[3,7]:[4,e.removeElementClass(b,t,r,n)];case 6:a.sent(),O=!0,a.label=7;case 7:if(!(O&&e.classChildren[b].length>0))return[3,21];a.label=8;case 8:a.trys.push([8,19,20,21]),D=void 0,x=s(e.classChildren[b]),S=x.next(),a.label=9;case 9:if(S.done)return[3,18];T=S.value,a.label=10;case 10:a.trys.push([10,15,16,17]),B=void 0,A=s(Array.from(r.querySelectorAll(T,n))),E=A.next(),a.label=11;case 11:return E.done?[3,14]:(P=E.value,[4,e.checkForClassChanges(P,r,P[f.Tag.TaggedVariable]||null)]);case 12:a.sent(),a.label=13;case 13:return E=A.next(),[3,11];case 14:return[3,17];case 15:return j=a.sent(),B={error:j},[3,17];case 16:try{E&&!E.done&&(F=A.return)&&F.call(A)}finally{if(B)throw B.error}return[7];case 17:return S=x.next(),[3,9];case 18:return[3,21];case 19:return k=a.sent(),D={error:k},[3,21];case 20:try{S&&!S.done&&(I=x.return)&&I.call(x)}finally{if(D)throw D.error}return[7];case 21:return v=d.next(),[3,3];case 22:return[3,25];case 23:return N=a.sent(),L={error:N},[3,25];case 24:try{v&&!v.done&&(M=d.return)&&M.call(d)}finally{if(L)throw L.error}return[7];case 25:return[2]}}))}))},e.getClassesForElement=function(t){return t[e.ClassesVariable]||(t[e.ClassesVariable]=[]),t[e.ClassesVariable]},e.addPreparedClassToElement=function(t,r){e.getClassesForElement(t).push(r)},e.removePreparedClassFromElement=function(t,r){var n=e.getClassesForElement(t);n.splice(n.indexOf(r),1)},e.addElementClass=function(t,r,n,o){return void 0===o&&(o=null),i(this,void 0,void 0,(function(){var i;return a(this,(function(a){switch(a.label){case 0:return e.getClassesForElement(r).includes(t)?[2]:o?[3,2]:[4,n.getTagForElement(r,!0)];case 1:o=a.sent(),a.label=2;case 2:return o?(i=y.Registry.instance.classes.getSynchronous(t))?[4,i.constructTag(o,n)]:[3,4]:(console.error("no tag found for element",r),[2]);case 3:a.sent(),a.label=4;case 4:return[2,o]}}))}))},e.removeElementClass=function(t,r,n,o){return void 0===o&&(o=null),i(this,void 0,void 0,(function(){var i;return a(this,(function(a){switch(a.label){case 0:return e.getClassesForElement(r).includes(t)?o?[3,2]:[4,n.getTagForElement(r,!0)]:[2];case 1:o=a.sent(),a.label=2;case 2:return(i=y.Registry.instance.classes.getSynchronous(t))?[4,i.deconstructTag(o,n)]:[3,4];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))},e.isClass=function(t){return!!this.classes[t]},e.ClassesVariable="_vsn_classes",e.classes={},e.classParents={},e.classChildren={},e.preppedTags={},e.preppingElements={},e}(h.Node);e.ClassNode=v},1560:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ComparisonNode=void 0;var s=r(7754),u=function(t){function e(e,r,n){var o=t.call(this)||this;return o.left=e,o.right=r,o.type=n,o}return o(e,t),e.prototype._getChildNodes=function(){return[this.left,this.right]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.left.evaluate(t,e,r)];case 1:return n=i.sent(),[4,this.right.evaluate(t,e,r)];case 2:switch(o=i.sent(),this.type){case s.TokenType.EQUALS:return[2,n===o];case s.TokenType.NOT_EQUALS:return[2,n!==o];case s.TokenType.GREATER_THAN:return[2,n>o];case s.TokenType.LESS_THAN:return[2,n<o];case s.TokenType.GREATER_THAN_EQUAL:return[2,n>=o];case s.TokenType.LESS_THAN_EQUAL:return[2,n<=o]}return[2]}}))}))},e.match=function(t){return[s.TokenType.EQUALS,s.TokenType.NOT_EQUALS,s.TokenType.GREATER_THAN,s.TokenType.LESS_THAN,s.TokenType.GREATER_THAN_EQUAL,s.TokenType.LESS_THAN_EQUAL].indexOf(t[0].type)>-1},e.parse=function(t,r,n){return n.splice(0,1),new e(t,s.Tree.processTokens(s.Tree.getNextStatementTokens(n)),r.type)},e}(r(8403).Node);e.ComparisonNode=u},6765:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConditionalNode=void 0;var s=r(8572),u=function(t){function e(e,r){var n=t.call(this)||this;return n.condition=e,n.block=r,n}return o(e,t),e.prototype._getChildNodes=function(){return[this.condition,this.block]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return[4,this.condition.evaluate(t,e,r)];case 1:return n=o.sent(),!1,[2,n instanceof s.WrappedArray?n.length>0:!!n]}}))}))},e}(r(8403).Node);e.ConditionalNode=u},6756:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.DispatchEventNode=void 0;var u=r(4843),c=r(7754),l=r(8403),f=r(1525),p=r(3770),h=function(t){function e(e,r,n,o){void 0===n&&(n=!1);var i=t.call(this)||this;return i.name=e,i.data=r,i.bubbles=n,i.elementRef=o,i}return o(e,t),e.prototype._getChildNodes=function(){var t=[];return this.data&&t.push(this.data),t},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,c,l,p,h,y;return a(this,(function(a){switch(a.label){case 0:return this.data?[4,this.data.evaluate(t,e,r)]:[3,2];case 1:return o=a.sent().objectify,[3,3];case 2:o={},a.label=3;case 3:return(n=o)instanceof u.Scope?n=n.data.getData():n instanceof f.ScopeData&&(n=n.getData()),i=[r],this.elementRef?[4,this.elementRef.evaluate(t,e,r,!0)]:[3,5];case 4:i=a.sent(),a.label=5;case 5:try{for(c=s(i),l=c.next();!l.done;l=c.next())p=l.value,n.source=p.element,p.element.dispatchEvent(new CustomEvent(this.name,{bubbles:this.bubbles,detail:n}))}catch(t){h={error:t}}finally{try{l&&!l.done&&(y=c.return)&&y.call(c)}finally{if(h)throw h.error}}return[2]}}))}))},e.parse=function(t,r,n){var o=n.shift(),i=null;if(n.length&&n[0].type===c.TokenType.L_BRACE){var a=c.Tree.getNextStatementTokens(n,!1,!1,!0);i=c.Tree.processTokens(a).statements[0]}var s=t instanceof p.ElementQueryNode?t:null;return new e(o.value,i,o.full.startsWith("!!!"),s)},e}(l.Node);e.DispatchEventNode=h},6094:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ElementAttributeNode=void 0;var u=r(1341),c=r(8403),l=r(3770),f=r(8052),p=r(3276),h=r(2020),y=r(7549),d=r(4123),v=function(t){function e(e,r){var n=t.call(this)||this;return n.elementRef=e,n.attr=r,n.requiresPrep=!0,n}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return new f.LiteralNode("@"+this.attributeName)},enumerable:!1,configurable:!0}),e.prototype._getChildNodes=function(){var t=[];return this.elementRef&&t.push(this.elementRef),t},Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.attr.startsWith(".")?this.attr.substring(2):this.attr.substring(1)},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,s=this;return a(this,(function(a){switch(a.label){case 0:return this.elementRef instanceof l.ElementQueryNode?[4,this.elementRef.evaluate(t,e,r,!0)]:[3,2];case 1:return n=a.sent(),[3,7];case 2:return this.elementRef instanceof h.IndexNode?[4,this.elementRef.evaluate(t,e,r,!0)]:[3,4];case 3:return o=a.sent(),n=o instanceof u.TagList?o:new u.TagList(o),[3,7];case 4:return this.elementRef instanceof y.ScopeMemberNode||this.elementRef instanceof d.RootScopeMemberNode?[4,this.elementRef.evaluate(t,e,r,!0)]:[3,6];case 5:return i=a.sent(),n=Array.isArray(i)?i:new u.TagList(i),[3,7];case 6:if(!r)return[2];n=new u.TagList(r),a.label=7;case 7:return 1===n.length?[2,this.getAttributeScopeValue(n[0])]:[2,n.map((function(t){return s.getAttributeScopeValue(t)}))]}}))}))},e.prototype.getAttributeScopeValue=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t instanceof p.DOMObject?[4,t.watchAttribute(this.attributeName)]:[2,""];case 1:return e.sent(),[2,t.scope.get("@"+this.attributeName)]}}))}))},e.prototype.prepare=function(t,e,r,n){return void 0===r&&(r=null),void 0===n&&(n=null),i(this,void 0,void 0,(function(){var o,i,c,l,f,h,y;return a(this,(function(a){switch(a.label){case 0:return this.elementRef?[4,this.elementRef.prepare(t,e,r,n)]:[3,14];case 1:return a.sent(),[4,this.elementRef.evaluate(t,e,r,!0)];case 2:if(!((o=a.sent())instanceof u.TagList))return[3,11];a.label=3;case 3:a.trys.push([3,8,9,10]),i=s(o),c=i.next(),a.label=4;case 4:return c.done?[3,7]:[4,null==(l=c.value)?void 0:l.watchAttribute(this.attributeName)];case 5:a.sent(),a.label=6;case 6:return c=i.next(),[3,4];case 7:return[3,10];case 8:return f=a.sent(),h={error:f},[3,10];case 9:try{c&&!c.done&&(y=i.return)&&y.call(i)}finally{if(h)throw h.error}return[7];case 10:return[3,13];case 11:return o instanceof p.DOMObject?[4,o.watchAttribute(this.attributeName)]:[3,13];case 12:a.sent(),a.label=13;case 13:return[3,16];case 14:return r?[4,r.watchAttribute(this.attributeName)]:[3,16];case 15:a.sent(),a.label=16;case 16:return[2]}}))}))},e}(c.Node);e.ElementAttributeNode=v},3770:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ElementQueryNode=void 0;var s=r(8403),u=r(9192),c=function(t){function e(e,r,n){void 0===r&&(r=!1),void 0===n&&(n=u.EQuerySelectDirection.ALL);var o=t.call(this)||this;return o.query=e,o.first=r,o.direction=n,o.requiresPrep=!0,o}return o(e,t),e.prototype.evaluate=function(t,e,r,n){return void 0===r&&(r=null),void 0===n&&(n=!1),i(this,void 0,void 0,(function(){var o,i;return a(this,(function(a){switch(a.label){case 0:return(o=r)?[3,2]:[4,e.getTagForScope(t)];case 1:o=a.sent(),a.label=2;case 2:return r=o,[4,e.get(this.query,!0,r,this.direction)];case 3:return i=a.sent(),[2,this.first&&!n?i[0]:i]}}))}))},e.prototype.prepare=function(t,e,r,n){return void 0===r&&(r=null),void 0===n&&(n=null),i(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return(n=r)?[3,2]:[4,e.getTagForScope(t)];case 1:n=o.sent(),o.label=2;case 2:return r=n,[4,e.get(this.query,!0,r)];case 3:return o.sent(),[2]}}))}))},e.parse=function(t,r,n){n.shift();var o=!1,i=u.EQuerySelectDirection.ALL;return r.full.startsWith("?>")?i=u.EQuerySelectDirection.DOWN:r.full.startsWith("?<")&&(i=u.EQuerySelectDirection.UP,o=!0),new e(r.value,o,i)},e}(s.Node);e.ElementQueryNode=c},2999:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ElementStyleNode=void 0;var u=r(1341),c=r(8403),l=r(8052),f=r(3276),p=function(t){function e(e,r){var n=t.call(this)||this;return n.elementRef=e,n.attr=r,n.requiresPrep=!0,n}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return new l.LiteralNode("$"+this.attributeName)},enumerable:!1,configurable:!0}),e.prototype._getChildNodes=function(){var t=[];return this.elementRef&&t.push(this.elementRef),t},Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.attr.startsWith(".")?this.attr.substring(2):this.attr.substring(1)},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o=this;return a(this,(function(i){switch(i.label){case 0:return this.elementRef?[4,this.elementRef.evaluate(t,e,r,!0)]:[3,2];case 1:return n=i.sent(),[3,3];case 2:if(!r)return[2];n=new u.TagList(r),i.label=3;case 3:return n instanceof f.DOMObject&&(n=new u.TagList(n)),1===n.length?[2,this.getAttributeStyleValue(n[0])]:[2,n.map((function(t){return o.getAttributeStyleValue(t)}))]}}))}))},e.prototype.getAttributeStyleValue=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.watchStyle(this.attributeName)];case 1:return e.sent(),[2,t.scope.get("$"+this.attributeName)]}}))}))},e.prototype.prepare=function(t,e,r,n){return void 0===r&&(r=null),void 0===n&&(n=null),i(this,void 0,void 0,(function(){var o,i,u,c,l,f;return a(this,(function(a){switch(a.label){case 0:return this.elementRef?[4,this.elementRef.prepare(t,e,r,n)]:[3,11];case 1:return a.sent(),[4,this.elementRef.evaluate(t,e,r,!0)];case 2:o=a.sent(),a.label=3;case 3:a.trys.push([3,8,9,10]),i=s(o),u=i.next(),a.label=4;case 4:return u.done?[3,7]:[4,u.value.watchStyle(this.attributeName)];case 5:a.sent(),a.label=6;case 6:return u=i.next(),[3,4];case 7:return[3,10];case 8:return c=a.sent(),l={error:c},[3,10];case 9:try{u&&!u.done&&(f=i.return)&&f.call(i)}finally{if(l)throw l.error}return[7];case 10:return[3,13];case 11:return r?[4,r.watchStyle(this.attributeName)]:[3,13];case 12:a.sent(),a.label=13;case 13:return[2]}}))}))},e}(c.Node);e.ElementStyleNode=p},3187:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForStatementNode=void 0;var s=r(7754),u=r(8403),c=r(8052),l=function(t){function e(e,r,n){var o=t.call(this)||this;return o.variable=e,o.list=r,o.block=n,o}return o(e,t),e.prototype._getChildNodes=function(){return[this.variable,this.list,this.block]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.variable.evaluate(t,e,r)];case 1:return n=a.sent(),[4,this.list.evaluate(t,e,r)];case 2:o=a.sent(),i=0,a.label=3;case 3:return i<o.length?(t.set(n,o[i]),[4,this.block.evaluate(t,e,r)]):[3,6];case 4:a.sent(),a.label=5;case 5:return i++,[3,3];case 6:return[2,null]}}))}))},e.parse=function(t,r,n){if(n[1].type!==s.TokenType.L_PAREN)throw SyntaxError("Syntax error: Missing (");if(n[3].type!==s.TokenType.OF)throw SyntaxError("Syntax error: Missing of");n.splice(0,1);var o=s.Tree.getNextStatementTokens(n),i=o.splice(0,1)[0];o.splice(0,1);var a=s.Tree.processTokens(o),u=s.Tree.processTokens(s.Tree.getBlockTokens(n,null)[0]);return new e(new c.LiteralNode(i.value),a,u)},e}(u.Node);e.ForStatementNode=l},3203:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionArgumentNode=void 0;var l=function(t){function e(e){var r=t.call(this)||this;return r.args=e,r}return o(e,t),e.prototype._getChildNodes=function(){return u([],s(this.args))},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,s,u,l,f,p,h;return a(this,(function(a){switch(a.label){case 0:n=[],a.label=1;case 1:a.trys.push([1,6,7,8]),o=c(this.args),i=o.next(),a.label=2;case 2:return i.done?[3,5]:(s=i.value,l=(u=n).push,[4,s.evaluate(t,e,r)]);case 3:l.apply(u,[a.sent()]),a.label=4;case 4:return i=o.next(),[3,2];case 5:return[3,8];case 6:return f=a.sent(),p={error:f},[3,8];case 7:try{i&&!i.done&&(h=o.return)&&h.call(o)}finally{if(p)throw p.error}return[7];case 8:return[2,n]}}))}))},e}(r(8403).Node);e.FunctionArgumentNode=l},5728:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionCallNode=void 0;var l=r(712),f=r(8403),p=r(7549),h=r(3484),y=r(1371),d=r(3770),v=r(2947),b=function(t){function e(e,r){var n=t.call(this)||this;return n.fnc=e,n.args=r,n}return o(e,t),e.prototype._getChildNodes=function(){return[this.fnc,this.args]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,f,b,_,g,w,m,O,x,S,T,A,E,P,j,k,N,R,C,L,M,D,I,B,F,G,H,U,V;return a(this,(function(a){switch(a.label){case 0:return n=[],o=t,"",!1,this.fnc instanceof p.ScopeMemberNode?(!0,[4,this.fnc.scope.evaluate(t,e,r)]):[3,5];case 1:return o=a.sent(),[4,this.fnc.name.evaluate(t,e,r)];case 2:return a.sent(),this.fnc.scope instanceof d.ElementQueryNode?[4,this.fnc.scope.evaluate(t,e,r)]:[3,4];case 3:if((i=a.sent())instanceof Array)n=i;else{if(!(i instanceof l.Tag))throw new Error("Invalid element query result");n=[i]}return[3,5];case 4:n=[r],a.label=5;case 5:return[4,this.args.evaluate(t,e,r)];case 6:return f=a.sent(),[4,this.fnc.evaluate(t,e,r)];case 7:return!(b=a.sent())||b instanceof Array?[4,this.fnc.name.evaluate(t,e,r)]:[3,31];case 8:_=a.sent(),g=[],w=[],m=0,a.label=9;case 9:a.trys.push([9,21,22,23]),O=s(n),x=O.next(),a.label=10;case 10:if(x.done)return[3,20];S=x.value,0,a.label=11;case 11:a.trys.push([11,17,18,19]),G=void 0,T=s(S.element[v.ClassNode.ClassesVariable]||[]),A=T.next(),a.label=12;case 12:return A.done?[3,16]:(E=A.value,(P=y.Registry.instance.classes.getSynchronous(E))&&P.classScope.has(_)?(M=P.classScope.get(_),w.push(M),k=(j=g).push,[4,M.evaluate(S.scope,e,S)]):[3,15]);case 13:return[4,a.sent().apply(void 0,c([],u(f)))];case 14:k.apply(j,[a.sent()]),m++,a.label=15;case 15:return A=T.next(),[3,12];case 16:return[3,19];case 17:return N=a.sent(),G={error:N},[3,19];case 18:try{A&&!A.done&&(H=T.return)&&H.call(T)}finally{if(G)throw G.error}return[7];case 19:return x=O.next(),[3,10];case 20:return[3,23];case 21:return R=a.sent(),B={error:R},[3,23];case 22:try{x&&!x.done&&(F=O.return)&&F.call(O)}finally{if(B)throw B.error}return[7];case 23:a.trys.push([23,28,29,30]),C=s(w),L=C.next(),a.label=24;case 24:return L.done?[3,27]:[4,(M=L.value).collectGarbage()];case 25:a.sent(),a.label=26;case 26:return L=C.next(),[3,24];case 27:return[3,30];case 28:return D=a.sent(),U={error:D},[3,30];case 29:try{L&&!L.done&&(V=C.return)&&V.call(C)}finally{if(U)throw U.error}return[7];case 30:if(1===m)return[2,g[0]];if(0===m)throw new Error("Function "+_+" not found");return[2,g];case 31:return b instanceof h.FunctionNode?[4,b.evaluate(o,e,r)]:[3,35];case 32:return[4,a.sent().apply(void 0,c([],u(f)))];case 33:return I=a.sent(),[4,b.collectGarbage()];case 34:return a.sent(),[2,I];case 35:return[2,b.call.apply(b,c([o.wrapped||o],u(f)))];case 36:return[2]}}))}))},e}(f.Node);e.FunctionCallNode=b},3484:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionNode=void 0;var u=r(4843),c=r(7754),l=function(t){function e(e,r,n){var o=t.call(this)||this;return o.name=e,o.args=r,o.block=n,o.requiresPrep=!0,o.garbage=[],o}return o(e,t),e.prototype._getChildNodes=function(){return[this.block]},e.prototype.prepare=function(e,r,n,o){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return e.set(this.name,this),[4,t.prototype.prepare.call(this,e,r,n,o)];case 1:return i.sent(),[2]}}))}))},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.getFunction(t,e,r)];case 1:return[2,n.sent()]}}))}))},e.prototype.collectGarbage=function(){return i(this,void 0,void 0,(function(){var t,e,r,n;return a(this,(function(o){try{for(t=s(this.garbage),e=t.next();!e.done;e=t.next())e.value.deconstruct()}catch(t){r={error:t}}finally{try{e&&!e.done&&(n=t.return)&&n.call(t)}finally{if(r)throw r.error}}return this.garbage=[],[2]}))}))},e.prototype.getFunction=function(t,e,r,n){return void 0===r&&(r=null),void 0===n&&(n=!0),i(this,void 0,void 0,(function(){var o,c=this;return a(this,(function(l){return o=this,[2,function(){for(var l=[],f=0;f<arguments.length;f++)l[f]=arguments[f];return i(c,void 0,void 0,(function(){var i,c,f,p,h,y;return a(this,(function(a){switch(a.label){case 0:!n||t instanceof u.FunctionScope?i=t:((i=new u.FunctionScope(t)).set("this",t),o.garbage.push(i));try{for(c=s(this.args),f=c.next();!f.done;f=c.next())p=f.value,i.set(p,l.shift())}catch(t){h={error:t}}finally{try{f&&!f.done&&(y=c.return)&&y.call(c)}finally{if(h)throw h.error}}return[4,this.block.evaluate(i,e,r)];case 1:return[2,a.sent()]}}))}))}]}))}))},e.parse=function(t,r,n,o){var i,a;void 0===o&&(o=e),n.shift();var u=n.shift(),l=this.moveModifiers(n),f=c.Tree.getBlockTokens(n),p=[];try{for(var h=s(f),y=h.next();!y.done;y=h.next()){var d=y.value;p.push(d[0].value)}}catch(t){i={error:t}}finally{try{y&&!y.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}var v=c.Tree.processTokens(c.Tree.getNextStatementTokens(n,!0,!0));return this.moveModifiers(l,n),new o(u.value,p,v)},e}(r(8403).Node);e.FunctionNode=l},329:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},c=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.IfStatementNode=void 0;var l=r(7754),f=r(8403),p=r(6765),h=r(8052),y=function(t){function e(e){var r=t.call(this)||this;return r.nodes=e,r}return o(e,t),e.prototype._getChildNodes=function(){return u([],s(this.nodes))},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,s,u,l;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,6,7,8]),n=c(this.nodes),o=n.next(),a.label=1;case 1:return o.done?[3,5]:[4,(i=o.value).evaluate(t,e,r)];case 2:return a.sent()?[4,i.block.evaluate(t,e,r)]:[3,4];case 3:return[2,a.sent()];case 4:return o=n.next(),[3,1];case 5:return[3,8];case 6:return s=a.sent(),u={error:s},[3,8];case 7:try{o&&!o.done&&(l=n.return)&&l.call(n)}finally{if(u)throw u.error}return[7];case 8:return[2]}}))}))},e.parseConditional=function(t){if(-1===[l.TokenType.IF,l.TokenType.ELSE_IF].indexOf(t[0].type))throw SyntaxError("Invalid Syntax");return t.splice(0,1),new p.ConditionalNode(l.Tree.processTokens(l.Tree.getBlockTokens(t,null)[0]),l.Tree.processTokens(l.Tree.getBlockTokens(t,null)[0]))},e.parse=function(t,r,n){if(n[1].type!==l.TokenType.L_PAREN)throw SyntaxError("If statement needs to be followed by a condition encased in parenthesis.");var o=[];for(o.push(e.parseConditional(n));n.length>0&&l.TokenType.ELSE_IF===n[0].type;)o.push(e.parseConditional(n));return n.length>0&&l.TokenType.ELSE===n[0].type&&(n.splice(0,1),o.push(new p.ConditionalNode(new h.LiteralNode(!0),l.Tree.processTokens(l.Tree.getBlockTokens(n,null)[0])))),new e(o)},e}(f.Node);e.IfStatementNode=y},8673:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.InNode=void 0;var s=r(7754),u=function(t){function e(e,r,n){void 0===n&&(n=!1);var o=t.call(this)||this;return o.left=e,o.right=r,o.flip=n,o}return o(e,t),e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.left.evaluate(t,e,r)];case 1:return n=a.sent(),[4,this.right.evaluate(t,e,r)];case 2:return o=a.sent(),i=o.indexOf(n)>-1,this.flip&&(i=!i),[2,i]}}))}))},e.prototype._getChildNodes=function(){return[this.left,this.right]},e.match=function(t){return t[0].type===s.TokenType.IN||t[0].type===s.TokenType.NOT&&t[1].type===s.TokenType.IN},e.parse=function(t,r,n){var o=n[0].type===s.TokenType.NOT;o&&n.splice(0,1),n.splice(0,1);var i=s.Tree.getNextStatementTokens(n,!1,!1,!0);return new e(t,s.Tree.processTokens(i),o)},e}(r(8403).Node);e.InNode=u},2020:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.IndexNode=void 0;var u=r(4843),c=r(7754),l=function(t){function e(e,r,n){void 0===n&&(n=null);var o=t.call(this)||this;return o.object=e,o.index=r,o.indexTwo=n,o}return o(e,t),e.prototype._getChildNodes=function(){var t=[this.object,this.index];return this.indexTwo&&t.push(this.indexTwo),t},e.prototype.negativeIndex=function(t,e){return Number.isFinite(e)&&e<0?t.length+e:e},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,s,c,l,f,p,h;return a(this,(function(a){switch(a.label){case 0:return[4,this.object.evaluate(t,e,r)];case 1:return n=a.sent(),i=this.negativeIndex,s=[n],[4,this.index.evaluate(t,e,r)];case 2:return o=i.apply(this,s.concat([a.sent()])),Number.isFinite(o)&&this.indexTwo?(l=this.negativeIndex,f=[n],[4,this.indexTwo.evaluate(t,e,r)]):[3,4];case 3:for(c=l.apply(this,f.concat([a.sent()])),p=[],h=o;h<=c;h++)p.push(n[h]);return[2,p];case 4:return n instanceof u.Scope?[2,n.get(o)]:[2,n[o]]}}))}))},e.match=function(t){return t[0].type===c.TokenType.L_BRACKET},e.parse=function(t,r,n){var o,i,a=c.Tree.getBlockTokens(n,c.TokenType.COLON),u=[];try{for(var l=s(a),f=l.next();!f.done;f=l.next()){var p=f.value;u.push(c.Tree.processTokens(p))}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}return new e(t,u[0],u.length>1&&u[1])},e}(r(8403).Node);e.IndexNode=l},8052:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.LiteralNode=void 0;var s=function(t){function e(e){var r=t.call(this)||this;return r.value=e,r}return o(e,t),e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.value]}))}))},e}(r(8403).Node);e.LiteralNode=s},8637:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.LoopNode=void 0;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.looping=!0,e}return o(e,t),e.prototype.prepare=function(e,r,n,o){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var i,s;return a(this,(function(a){switch(a.label){case 0:return i=null==o?void 0:o.ClassNodePrepare,!n||i?[3,2]:[4,this.getFunction(n.scope||e,r,n)];case 1:s=a.sent(),this.setTimeout(s),a.label=2;case 2:return[4,t.prototype.prepare.call(this,e,r,n,o)];case 3:return a.sent(),[2]}}))}))},e.prototype.loop=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.looping?[4,t()]:[3,2];case 1:e.sent(),this.setTimeout(t),e.label=2;case 2:return[2]}}))}))},e.prototype.setTimeout=function(t,e){var r=this;void 0===e&&(e=33),setTimeout((function(){return i(r,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,this.loop(t)];case 1:return e.sent(),[2]}}))}))}),e)},e.parse=function(r,n,o){return t.parse.call(this,r,n,o,e)},e}(r(3484).FunctionNode);e.LoopNode=s},2393:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ModifierNode=void 0;var s=function(t){function e(e,r){var n=t.call(this)||this;return n.name=e,n.block=r,n}return o(e,t),e.prototype.prepare=function(t,e,r,n){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,null]}))}))},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,null]}))}))},e.parse=function(t,e,r){var n=r.shift().value.substr(1);return t&&t.modifiers.add(n),t},e}(r(8403).Node);e.ModifierNode=s},8161:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.NamedStackNode=void 0;var s=r(4843),u=r(7754),c=r(8403),l=r(8052),f=function(t){function e(e,r){var n=t.call(this)||this;return n.stackName=e,n.statements=r,n.requiresPrep=!0,n}return o(e,t),e.prototype._getChildNodes=function(){return[this.stackName,this.statements]},e.prototype.evaluate=function(t,r,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var o,i;return a(this,(function(a){switch(a.label){case 0:return t instanceof s.FunctionScope&&(t=t.parentScope),[4,this.stackName.evaluate(t,r,n)];case 1:return o=a.sent(),i=!1,e.stacks[o]||(e.stacks[o]=[]),-1===e.executions.indexOf(o)&&(i=!0),e.stacks[o].push({block:this.statements,scope:t,dom:r,tag:n}),i&&e.execute(o),[2]}}))}))},e.execute=function(t){return i(this,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:return e.stacks[t].length>0?(r=e.stacks[t].shift(),-1===e.executions.indexOf(t)&&e.executions.push(t),[4,r.block.evaluate(r.scope,r.dom,r.tag)]):[3,3];case 1:return n.sent(),[4,e.execute(t)];case 2:return n.sent()||e.executions.splice(e.executions.indexOf(t),1),[2,!0];case 3:return[2,!1]}}))}))},e.parse=function(t,r,n){n.shift();var o=n.shift(),i=u.Tree.getNextStatementTokens(n);return new e(new l.LiteralNode(o.value),u.Tree.processTokens(i))},e.stacks={},e.executions=[],e}(c.Node);e.NamedStackNode=f},8403:function(t,e,r){"use strict";var n=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;var u=r(7754),c=r(7719),l=function(){function t(){this.requiresPrep=!1,this.nodeCache={},this.modifiers=new c.Modifiers}return t.prototype.isPreparationRequired=function(){var t,e;if(this.requiresPrep)return!0;if(void 0!==this._isPreparationRequired)return this._isPreparationRequired;try{for(var r=i(this.getChildNodes()),n=r.next();!n.done;n=r.next()){if(n.value.isPreparationRequired())return this._isPreparationRequired=!0,!0}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return!1},t.prototype.prepare=function(t,e,r,a){return void 0===r&&(r=null),void 0===a&&(a=null),n(this,void 0,void 0,(function(){var n,s,u,c,l;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),n=i(this.getChildNodes()),s=n.next(),o.label=1;case 1:return s.done?[3,4]:[4,s.value.prepare(t,e,r,a)];case 2:o.sent(),o.label=3;case 3:return s=n.next(),[3,1];case 4:return[3,7];case 5:return u=o.sent(),c={error:u},[3,7];case 6:try{s&&!s.done&&(l=n.return)&&l.call(n)}finally{if(c)throw c.error}return[7];case 7:return[2]}}))}))},t.prototype.cleanup=function(t,e,r){return n(this,void 0,void 0,(function(){var n,a,s,u,c;return o(this,(function(o){switch(o.label){case 0:o.trys.push([0,5,6,7]),n=i(this.getChildNodes()),a=n.next(),o.label=1;case 1:return a.done?[3,4]:[4,a.value.cleanup(t,e,r)];case 2:o.sent(),o.label=3;case 3:return a=n.next(),[3,1];case 4:return[3,7];case 5:return s=o.sent(),u={error:s},[3,7];case 6:try{a&&!a.done&&(c=n.return)&&c.call(n)}finally{if(u)throw u.error}return[7];case 7:return[2]}}))}))},t.prototype._getChildNodes=function(){return[]},t.prototype.getChildNodes=function(){return void 0===this.childNodes&&(this.childNodes=this._getChildNodes()),this.childNodes},t.prototype.findChildrenByType=function(t){return this.findChildrenByTypes([t])},t.prototype.findChildrenByTypes=function(t,e){var r,n,o,u;if(void 0===e&&(e=null),null!==e&&this.nodeCache[e])return this.nodeCache[e];var c=[];try{for(var l=i(this.getChildNodes()),f=l.next();!f.done;f=l.next()){var p=f.value;try{for(var h=(o=void 0,i(t)),y=h.next();!y.done;y=h.next()){var d=y.value;p instanceof d&&c.push(p);var v=p.findChildrenByType(d);c.push.apply(c,s([],a(v)))}}catch(t){o={error:t}}finally{try{y&&!y.done&&(u=h.return)&&u.call(h)}finally{if(o)throw o.error}}}}catch(t){r={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return null!==e&&(this.nodeCache[e]=c),c},t.prototype.hasModifier=function(t){return this.modifiers.has(t)},t.moveModifiers=function(t,e){if(void 0===e&&(e=null),e=e||[],t&&t.length)for(;t[0]&&t[0].type==u.TokenType.MODIFIER;)e.unshift(t.shift());return e},t}();e.Node=l},2321:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.NotNode=void 0;var s=r(7754),u=function(t){function e(e){var r=t.call(this)||this;return r.toFlip=e,r}return o(e,t),e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return[4,this.toFlip.evaluate(t,e,r)];case 1:return[2,!n.sent()]}}))}))},e.prototype._getChildNodes=function(){return[this.toFlip]},e.parse=function(t,r,n){var o;return n.splice(0,1),o=n[0].type===s.TokenType.L_PAREN?s.Tree.getNextStatementTokens(n):s.Tree.consumeTypes(n,[s.TokenType.BOOLEAN_LITERAL,s.TokenType.NUMBER_LITERAL,s.TokenType.STRING_LITERAL,s.TokenType.NAME,s.TokenType.PERIOD]),new e(s.Tree.processTokens(o))},e}(r(8403).Node);e.NotNode=u},1185:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.NumberLiteralNode=void 0;var i=function(t){function e(e){var r=t.call(this,e)||this;return r.value=e,r.value.indexOf(".")>-1?r.value=parseFloat(r.value):r.value=parseInt(r.value),r}return o(e,t),e}(r(8052).LiteralNode);e.NumberLiteralNode=i},9446:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectNode=void 0;var c=r(4843),l=r(7754),f=function(t){function e(e,r){var n=t.call(this)||this;return n.keys=e,n.values=r,n}return o(e,t),e.prototype._getChildNodes=function(){return new(Array.bind.apply(Array,u([void 0],s(this.values))))},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,s,u,l,f;return a(this,(function(a){switch(a.label){case 0:n=new c.Scope,o=0,a.label=1;case 1:return o<this.values.length?(i=this.keys[o],s=this.values[o],l=(u=n).set,[4,i.evaluate(t,e,r)]):[3,5];case 2:return f=[a.sent()],[4,s.evaluate(t,e,r)];case 3:l.apply(u,f.concat([a.sent(),!0])),a.label=4;case 4:return o++,[3,1];case 5:return[2,n]}}))}))},e.match=function(t){return t[0].type===l.TokenType.L_BRACE},e.parse=function(t,r,n){for(var o=l.Tree.getNextStatementTokens(n),i=[],a=[];o.length>0;){var s=l.Tree.getTokensUntil(o,l.TokenType.COLON,!1);if(o[0].type!==l.TokenType.COLON)throw Error("Invalid object literal syntax. Expecting :");o.splice(0,1);var u=l.Tree.getTokensUntil(o,l.TokenType.COMMA,!0,!1,!0,{type:l.BlockType.STATEMENT,open:null,close:null,openCharacter:null,closeCharacter:null});i.push(l.Tree.processTokens(s)),a.push(l.Tree.processTokens(u))}return new e(i,a)},e}(r(8403).Node);e.ObjectNode=f},1096:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.OnNode=void 0;var c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.prepare=function(e,r,n,o){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var c,l,f=this;return a(this,(function(p){switch(p.label){case 0:return c=null==o?void 0:o.ClassNodePrepare,!n||c?[3,2]:[4,this.getFunction(e,r,n)];case 1:l=p.sent(),n.addEventHandler(this.name,this.modifiers,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(f,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,l.apply(void 0,u([],s(t)))];case 1:return e.sent(),[4,this.collectGarbage()];case 2:return e.sent(),[2]}}))}))}),this),p.label=2;case 2:return[4,t.prototype.prepare.call(this,e,r,n,o)];case 3:return p.sent(),[2]}}))}))},e.parse=function(r,n,o){return t.parse.call(this,r,n,o,e)},e}(r(3484).FunctionNode);e.OnNode=c},4123:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.RootScopeMemberNode=void 0;var s=r(4843),u=function(t){function e(e){var r=t.call(this)||this;return r.name=e,r}return o(e,t),e.prototype._getChildNodes=function(){return[this.name]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.name.evaluate(t,e,r)];case 1:return n=i.sent(),[4,this.applyModifiers(n,t,e,r)];case 2:return i.sent(),[2,(o=t.get(n))instanceof s.Scope&&o.wrapped||o]}}))}))},e}(r(4829).ScopeNodeAbstract);e.RootScopeMemberNode=u},7549:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeMemberNode=void 0;var u=r(4843),c=r(1341),l=r(3276),f=r(3770),p=r(4829),h=r(4329),y=r(3392),d=function(t){function e(e,r){var n=t.call(this)||this;return n.scope=e,n.name=r,n}return o(e,t),e.prototype._getChildNodes=function(){return[this.scope,this.name]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,p,d,v,b,_,g,w,m,O,x,S;return a(this,(function(a){switch(a.label){case 0:return n=[],o=[],this.scope instanceof f.ElementQueryNode?[4,this.scope.evaluate(t,e,r)]:[3,2];case 1:return i=a.sent(),this.scope.first?n.push(i):n=i,[3,4];case 2:return[4,this.scope.evaluate(t,e,r)];case 3:(p=a.sent())instanceof c.TagList?n=p:n.push(p),a.label=4;case 4:a.trys.push([4,12,13,14]),d=s(n),v=d.next(),a.label=5;case 5:return v.done?[3,11]:((b=v.value)instanceof l.DOMObject?b=b.scope:!b||b instanceof y.ScopeAbstract||(b=new h.ObjectAccessor(b)),b?[3,7]:(_=Error,g='Cannot access "',[4,this.name.evaluate(t,e,r)]));case 6:throw _.apply(void 0,[g+a.sent()+'" of undefined.']);case 7:return[4,this.name.evaluate(t,e,r)];case 8:return w=a.sent(),[4,this.applyModifiers(w,b,e,r)];case 9:a.sent(),m=b.get(w,!1),o.push(m instanceof u.Scope&&m.wrapped||m),a.label=10;case 10:return v=d.next(),[3,5];case 11:return[3,14];case 12:return O=a.sent(),x={error:O},[3,14];case 13:try{v&&!v.done&&(S=d.return)&&S.call(d)}finally{if(x)throw x.error}return[7];case 14:return[2,1===o.length?o[0]:o]}}))}))},e}(p.ScopeNodeAbstract);e.ScopeMemberNode=d},4829:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeNodeAbstract=void 0;var u=r(8403),c=r(4843),l=r(1371),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.applyModifiers=function(t,e,r,n){return i(this,void 0,void 0,(function(){var r,n,o,i,u,f;return a(this,(function(a){try{for(n=s(this.modifiers.iter),o=n.next();!o.done;o=n.next())if(i=o.value,l.Registry.instance.types.has(i.name)){r=i.name;break}}catch(t){u={error:t}}finally{try{o&&!o.done&&(f=n.return)&&f.call(n)}finally{if(u)throw u.error}}return r&&e instanceof c.Scope&&e.setType(t,r),[2]}))}))},e}(u.Node);e.ScopeNodeAbstract=f},5155:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a};Object.defineProperty(e,"__esModule",{value:!0}),e.StringFormatNode=void 0;var c=r(8403),l=r(7754),f=function(t){function e(e,r){var n=t.call(this)||this;return n.segments=e,n.value=r,n}return o(e,t),e.prototype.getChildNodes=function(){return this.segments&&Object.values(this.segments)||[]},e.prototype.evaluate=function(t,e,r){return i(this,void 0,void 0,(function(){var n,o,i,s,u,c;return a(this,(function(a){switch(a.label){case 0:for(i in n=this.value,o=[],this.segments)o.push(i);s=0,a.label=1;case 1:return s<o.length?(u=o[s],[4,this.segments[u].evaluate(t,e,r)]):[3,4];case 2:c=a.sent(),n=n.replace("${"+u+"}",c),a.label=3;case 3:return s++,[3,1];case 4:return[2,n]}}))}))},e.parse=function(t,r,n){var o,i,a={};try{for(var c=s(Array.from(new Set(r.value.match(/\$\{([^}]+)}/g)))),f=c.next();!f.done;f=c.next()){var p=f.value,h=u(p.split(/\$\{|}/),2)[1],y=new l.Tree(h);a[h]=y.root}}catch(t){o={error:t}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}return n.shift(),new e(a,r.value)},e.match=function(t){return t[0].type===l.TokenType.STRING_FORMAT},e}(c.Node);e.StringFormatNode=f},2751:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.UnitLiteralNode=e.UnitLiteral=void 0;var i=r(8052),a=function(){function t(t){this._value=t,this.value=this._value}return Object.defineProperty(t.prototype,"amount",{get:function(){return this._amount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unit",{get:function(){return this._unit},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return""+this._amount+this._unit},set:function(t){t.indexOf(".")>-1?this._amount=parseFloat(t):this._amount=parseInt(t),isNaN(this._amount)&&(this._amount=0);var e=/[^\d.]+$/.exec(t);this._unit=e&&e[0]||""},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.value},t}();e.UnitLiteral=a;var s=function(t){function e(e){return t.call(this,new a(e))||this}return o(e,t),e}(i.LiteralNode);e.UnitLiteralNode=s},575:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.WithNode=void 0;var u=r(4843),c=r(712),l=r(7754),f=r(8403),p=r(1341),h=function(t){function e(e,r){var n=t.call(this)||this;return n.context=e,n.statements=r,n.requiresPrep=!0,n}return o(e,t),e.prototype._getChildNodes=function(){return[this.context,this.statements]},e.prototype.evaluate=function(t,e,r){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var n,o,i,l,f,h,y,d,v,b,_,g,w,m,O,x,S,T,A,E;return a(this,(function(a){switch(a.label){case 0:return[4,this.context.evaluate(t,e,r)];case 1:if(n=a.sent(),o=[],n instanceof p.TagList?o=n:n instanceof c.Tag&&(o=[n]),i=[],!o.length)return[3,22];if(!this.hasModifier("sequential"))return[3,11];a.label=2;case 2:a.trys.push([2,8,9,10]),l=s(o),f=l.next(),a.label=3;case 3:return f.done?[3,7]:(g=f.value,[4,this.statements.prepare(g.scope,e,g)]);case 4:return a.sent(),y=(h=i).push,[4,this.statements.evaluate(g.scope,e,g)];case 5:y.apply(h,[a.sent()]),a.label=6;case 6:return f=l.next(),[3,3];case 7:return[3,10];case 8:return d=a.sent(),S={error:d},[3,10];case 9:try{f&&!f.done&&(T=l.return)&&T.call(l)}finally{if(S)throw S.error}return[7];case 10:return[3,21];case 11:v=[],a.label=12;case 12:a.trys.push([12,17,18,19]),b=s(o),_=b.next(),a.label=13;case 13:return _.done?[3,16]:(g=_.value,[4,this.statements.prepare(g.scope,e,g)]);case 14:a.sent(),v.push(this.statements.evaluate(g.scope,e,g)),a.label=15;case 15:return _=b.next(),[3,13];case 16:return[3,19];case 17:return w=a.sent(),A={error:w},[3,19];case 18:try{_&&!_.done&&(E=b.return)&&E.call(b)}finally{if(A)throw A.error}return[7];case 19:return[4,Promise.all(v)];case 20:i=a.sent(),a.label=21;case 21:return[3,24];case 22:return m=void 0,n instanceof u.Scope&&(m=n),m?(x=(O=i).push,[4,this.statements.evaluate(m,e,r)]):[3,24];case 23:x.apply(O,[a.sent()]),a.label=24;case 24:return[2,1===i.length?i[0]:i]}}))}))},e.parse=function(t,r,n){n.shift();var o=l.Tree.getTokensUntil(n,l.TokenType.L_BRACE,!1,!1,!0),i=l.Tree.getNextStatementTokens(n);return this.moveModifiers(o,n),new e(l.Tree.processTokens(o),l.Tree.processTokens(i))},e}(f.Node);e.WithNode=h},4789:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.XHRNode=void 0;var s=r(8403),u=r(7754),c=r(4843),l=r(6966),f=r(4264),p=function(t){function e(e,r,n){var o=t.call(this)||this;return o.left=e,o.requestType=r,o.url=n,o}return o(e,t),e.prototype.getChildNodes=function(){var t=[this.url];return this.left&&t.push(this.left),t},e.prototype.evaluate=function(t,e,r){return i(this,void 0,void 0,(function(){var n,o,i,s,p,h,y;return a(this,(function(a){switch(a.label){case 0:return[4,this.url.evaluate(t,e,r)];case 1:return n=a.sent(),this.left?[4,this.left.evaluate(t,e,r)]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s={},a.label=4;case 4:switch((i=s)instanceof c.Scope&&(i=i.data),i instanceof l.ScopeDataAbstract&&(i=i.getData()),this.requestType){case u.TokenType.XHR_POST:o="POST";break;case u.TokenType.XHR_PUT:o="PUT";break;case u.TokenType.XHR_DELETE:o="DELETE";break;default:o="GET"}return"GET"===(p={method:o,headers:{"X-Requested-With":"XMLHttpRequest"}}).method?n=f.VisionHelper.getUriWithParams(n,i):p.body="string"==typeof i?i:JSON.stringify(i),[4,fetch(n,p)];case 5:return h=a.sent(),(y=h.headers.get("content-type"))&&y.includes("application/json")?[4,h.json()]:[3,7];case 6:return[2,a.sent()];case 7:return[4,h.text()];case 8:return[2,a.sent()]}}))}))},e.parse=function(t,r,n){n.splice(0,1);var o=u.Tree.processTokens(u.Tree.getNextStatementTokens(n,!1,!1,!1));return new e(t,r.type,o)},e.match=function(t){return[u.TokenType.XHR_POST,u.TokenType.XHR_PUT,u.TokenType.XHR_GET,u.TokenType.XHR_DELETE].indexOf(t[0].type)>-1},e}(s.Node);e.XHRNode=p},5092:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=e.AttributeState=void 0;var u,c=r(5559),l=r(7719);!function(t){t[t.Instantiated=0]="Instantiated",t[t.Deferred=1]="Deferred",t[t.Compiled=2]="Compiled",t[t.Setup=3]="Setup",t[t.Extracted=4]="Extracted",t[t.Connected=5]="Connected",t[t.Built=6]="Built"}(u=e.AttributeState||(e.AttributeState={}));var f=function(t){function e(e,r,n){var o=t.call(this)||this;return o.tag=e,o.attributeName=r,o.slot=n,o.modifiers=l.Modifiers.fromAttribute(r),o.configure(),o}return o(e,t),Object.defineProperty(e.prototype,"origin",{get:function(){return this.slot||this.tag},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.defer=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(u.Deferred),[2]}))}))},e.prototype.configure=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(u.Instantiated),[2]}))}))},e.prototype.compile=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(u.Compiled),[2]}))}))},e.prototype.setup=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(u.Setup),[2]}))}))},e.prototype.extract=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(u.Extracted),[2]}))}))},e.prototype.connect=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(u.Connected),[2]}))}))},e.prototype.finalize=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(u.Built),[2]}))}))},e.prototype.evaluate=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},e.prototype.getAttributeValue=function(t){return void 0===t&&(t=null),this.origin.getRawAttributeValue(this.attributeName,t)},e.prototype.getAttributeBinding=function(t){return void 0===t&&(t=null),this.origin.getAttributeBinding(this.attributeName)||t},e.prototype.getAttributeModifiers=function(t){return void 0===t&&(t=[]),this.modifiers.length&&this.modifiers.names||t},e.prototype.getAttributeModifierArguments=function(t,e){return void 0===e&&(e=[]),this.modifiers.has(t)?this.modifiers.get(t).arguments:e},e.prototype.hasModifier=function(t){return this.modifiers.has(t)},e.prototype.mutate=function(t){},Object.defineProperty(e.prototype,"value",{get:function(){return this.origin.element.getAttribute(this.attributeName)||""},set:function(t){this.origin.element.setAttribute(this.attributeName,t)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t){return i(this,void 0,void 0,(function(){var e,r,n,o,i,u;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),e=s(this.origin.delegates),r=e.next(),a.label=1;case 1:return r.done?[3,4]:(n=r.value,[4,t(n)]);case 2:a.sent(),a.label=3;case 3:return r=e.next(),[3,1];case 4:return[3,7];case 5:return o=a.sent(),i={error:o},[3,7];case 6:try{r&&!r.done&&(u=e.return)&&u.call(e)}finally{if(i)throw i.error}return[7];case 7:return[2]}}))}))},e.prototype.setState=function(t){var e=this._state;this._state=t,this.dispatch("state",{state:t,previousState:e,attribute:this})},e.create=function(t,e,r,n){return new r(t,e,n)},e.scoped=!1,e.canDefer=!0,e}(c.EventDispatcher);e.Attribute=f},2918:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;var u=r(1371),c=r(6453),l=r(3423),f=r(2509),p=r(9033),h=function(t){function e(){var r,n,o=t.call(this)||this;Object.setPrototypeOf(o,e.prototype),o.shadowDOM=new f.ShadowDOM(p.DOM.instance,o,!1),o.shadow=o.attachShadow({mode:"open"});var h,y=o.getAttribute("template");h=y?document.getElementById(y):u.Registry.instance.templates.getSynchronous(o.tagName.toLowerCase()),o.setAttribute("vsn-scope",""),o.shadow.appendChild(h.content.cloneNode(!0));try{for(var d=s(Array.from(o.shadow.children)),v=d.next();!v.done;v=d.next()){v.value.shadowParent=o}}catch(t){r={error:t}}finally{try{v&&!v.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}var b=[],_=[];return o.shadow.querySelectorAll("slot").forEach((function(t){var e=o.shadowDOM.buildTag(t,!1,c.SlotTag),r=new Promise((function(r,n){t.addEventListener("slotchange",(function(n){e.then((function(e){return i(o,void 0,void 0,(function(){var n,o,i,u,c,f,p;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,6,7,8]),n=s(t.assignedNodes()),o=n.next(),a.label=1;case 1:return o.done?[3,5]:(i=o.value,[4,this.shadowDOM.buildTag(i,!1,l.SlottedTag)]);case 2:return[4,null==(u=a.sent())?void 0:u.slotted(e)];case 3:a.sent(),_.push(u),a.label=4;case 4:return o=n.next(),[3,1];case 5:return[3,8];case 6:return c=a.sent(),f={error:c},[3,8];case 7:try{o&&!o.done&&(p=n.return)&&p.call(n)}finally{if(f)throw f.error}return[7];case 8:return r(e),[2]}}))}))}))}))}));b.push(r)})),Promise.all(b).then((function(t){return i(o,void 0,void 0,(function(){return a(this,(function(t){return console.log("Building after slot setup",this),[2]}))}))})),o}return o(e,t),e.prototype.connectedCallback=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return console.log("Building from shadow",this.shadow),[4,this.shadowDOM.buildFrom(this.shadow,!0,!0)];case 1:return t.sent(),[2]}}))}))},e}(HTMLElement);e.Component=h},6417:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Configuration=void 0;var i=r(4264),a=function(t){function e(){var e=t.call(this)||this;return e.data=i.VisionHelper.window&&window.$configuration||{},e}return o(e,t),e.prototype.get=function(t,e){return void 0===e&&(e=null),void 0===this.data[t]?e:this.data[t]},e.prototype.set=function(t,e){var r=this.data[t];this.data[t]=e,this.dispatch("change:"+t,{value:e,previous:r}),this.dispatch("change",{key:t,value:e,previous:r})},e.set=function(t,r){e.instance.set(t,r)},e.get=function(t,r){return void 0===r&&(r=null),e.instance.get(t,r)},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e}(r(5559).EventDispatcher);e.Configuration=a},126:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Controller=void 0;var i=function(t){function e(){var e=t.call(this)||this;for(var r in e)e[r]instanceof Function&&e.__properties__.push(r);return e}return o(e,t),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,r){this._scope=t,this._tag=e,this._element=r},e}(r(2018).ScopeObject);e.Controller=i},9033:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.DOM=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e(document.body,!1,!1)),e._instance},enumerable:!1,configurable:!0}),e}(r(9192).AbstractDOM);e.DOM=i},9192:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractDOM=e.EQuerySelectDirection=void 0;var l,f=r(712),p=r(2144),h=r(7942),y=r(6417),d=r(1341),v=r(7754),b=r(2947),_=r(1371),g=r(2712),w=r(6453),m=r(3423),O=r(4843),x=r(5559);!function(t){t[t.ALL=0]="ALL",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN"}(l=e.EQuerySelectDirection||(e.EQuerySelectDirection={}));var S=function(t){function e(e,r,n){void 0===r&&(r=!0),void 0===n&&(n=!1);var o=t.call(this)||this;return o.rootElement=e,o.debug=n,o.queued=[],o._built=!1,o._ready=new Promise((function(t){o.once("built",(function(){t(!0)}))})),o.observer=new MutationObserver(o.mutation.bind(o)),o.tags=[],o.window=new p.WrappedWindow(window),o.document=new h.WrappedDocument(window.document),r&&o.buildFrom(e,!0),o.evaluate(),y.Configuration.instance.on("change",o.evaluate.bind(o)),o}return o(e,t),Object.defineProperty(e.prototype,"built",{get:function(){return this._built},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return this.promise("builtRoot")},enumerable:!1,configurable:!0}),e.prototype.get=function(t,e,r,n){return void 0===e&&(e=!1),void 0===r&&(r=null),void 0===n&&(n=l.DOWN),i(this,void 0,void 0,(function(){var o;return a(this,(function(i){switch(i.label){case 0:switch(t){case"window":return[3,1];case"document":return[3,2];case"body":return[3,3]}return[3,4];case 1:return[2,new d.TagList(this.window)];case 2:return[2,new d.TagList(this.document)];case 3:return[2,new d.TagList(this.root)];case 4:return o=void 0,o=n===l.DOWN?this.querySelectorAll(t,r):n===l.UP?[this.querySelectorClosest(t,r)]:this.querySelectorAll(t),[4,this.getTagsForElements(Array.from(o),e)];case 5:return[2,i.sent()]}}))}))},e.prototype.getFromTag=function(t,e,r){return void 0===r&&(r=!1),i(this,void 0,void 0,(function(){var n;return a(this,(function(o){switch(o.label){case 0:return n=this.querySelectorElement(t.element,e),[4,this.getTagsForElements(Array.from(n),r)];case 1:return[2,o.sent()]}}))}))},e.prototype.registerElementInRoot=function(t){var e=t.element.getAttribute("id");e&&this.root.scope.set("#"+e,t.scope)},e.prototype.querySelectorClosest=function(t,e){return void 0===e&&(e=null),e.element.closest(t)},e.prototype.querySelectPath=function(t,e){var r,n;void 0===e&&(e=null);var o=t.shift();if(!o)return[];var i=Array.from(e?this.querySelectorElement(e,o):this.querySelectorAll(o));if(t.length>0){var a=[];try{for(var l=s(i),f=l.next();!f.done;f=l.next()){var p=f.value;a.push.apply(a,c([],u(this.querySelectPath(c([],u(t)),p))))}}catch(t){r={error:t}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return a}return i},e.prototype.querySelectorAll=function(t,e){void 0===e&&(e=null);var r=e&&!t.startsWith("#")?e.element:this.rootElement;return this.querySelectorElement(r,t)},e.prototype.querySelectorElement=function(t,r){var n,o,i=r.indexOf(":parent");if(i>-1){var a=r.substring(0,i),l=r.substring(i+7);if(a.length>0){var f=[];try{for(var p=s(Array.from(this.querySelectorElement(t,a))),h=p.next();!h.done;h=p.next()){var y=h.value;l.length>0?f.push.apply(f,c([],u(Array.from(this.querySelectorElement(e.getParentElement(y),l))))):f.push(e.getParentElement(y))}}catch(t){n={error:t}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(n)throw n.error}}return f}return 0===l.length?[e.getParentElement(t)]:this.querySelectorElement(e.getParentElement(t),l)}var d=t.querySelectorAll(r);return 0===d.length&&t.shadowRoot&&(d=t.shadowRoot.querySelectorAll(r)),d},e.prototype.querySelector=function(t){return this.rootElement.querySelector(t)},e.prototype.exec=function(t,e){return i(this,void 0,void 0,(function(){var r,n;return a(this,(function(o){switch(o.label){case 0:return r=this.root.scope,e&&(e instanceof O.Scope?r=e:(r=new O.Scope).wrap(e)),[4,(n=new v.Tree(t)).prepare(r,this)];case 1:return o.sent(),[4,n.evaluate(r,this)];case 2:return[2,o.sent()]}}))}))},e.prototype.evaluate=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o;return a(this,(function(i){switch(i.label){case 0:clearTimeout(this.evaluateTimeout),i.label=1;case 1:i.trys.push([1,6,7,8]),t=s(this.tags),e=t.next(),i.label=2;case 2:return e.done?[3,5]:[4,e.value.evaluate()];case 3:i.sent(),i.label=4;case 4:return e=t.next(),[3,2];case 5:return[3,8];case 6:return r=i.sent(),n={error:r},[3,8];case 7:try{e&&!e.done&&(o=t.return)&&o.call(t)}finally{if(n)throw n.error}return[7];case 8:return[2]}}))}))},e.prototype.getTagsFromParent=function(t,e){var r,n;void 0===e&&(e=!0);var o=[];e&&t[f.Tag.TaggedVariable]&&o.push(t[f.Tag.TaggedVariable]);try{for(var i=s(Array.from(t.childNodes)),a=i.next();!a.done;a=i.next()){var l=a.value;o.push.apply(o,c([],u(this.getTagsFromParent(l,!0))))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},e.prototype.mutation=function(t){return i(this,void 0,void 0,(function(){var e,r,n,o,i,u,c,l,f,p,h,y,d,v,_,g,w;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,7,8,9]),e=s(t),r=e.next(),a.label=1;case 1:return r.done?[3,6]:(n=r.value,[4,this.getTagForElement(n.target)]);case 2:return(o=a.sent())&&o.mutate(n),"attributes"!==n.type||"class"!==n.attributeName?[3,4]:[4,b.ClassNode.checkForClassChanges(n.target,this,o)];case 3:a.sent(),a.label=4;case 4:try{for(v=void 0,i=s(Array.from(n.removedNodes)),u=i.next();!u.done;u=i.next()){c=u.value;try{for(g=void 0,l=s(this.getTagsFromParent(c)),f=l.next();!f.done;f=l.next())(p=f.value).hasAttribute("vsn-template")||p.deconstruct()}catch(t){g={error:t}}finally{try{f&&!f.done&&(w=l.return)&&w.call(l)}finally{if(g)throw g.error}}}}catch(t){v={error:t}}finally{try{u&&!u.done&&(_=i.return)&&_.call(i)}finally{if(v)throw v.error}}a.label=5;case 5:return r=e.next(),[3,1];case 6:return[3,9];case 7:return h=a.sent(),y={error:h},[3,9];case 8:try{r&&!r.done&&(d=e.return)&&d.call(e)}finally{if(y)throw y.error}return[7];case 9:return[2]}}))}))},e.prototype.discover=function(t,e){return void 0===e&&(e=!1),i(this,void 0,void 0,(function(){var r,n,o,i=this;return a(this,(function(a){return r=[],n=function(t){var n,o;if(!e&&(null===(n=null==t?void 0:t.tagName)||void 0===n?void 0:n.includes("-")))return!1;if(_.Registry.instance.tags.has(null===(o=null==t?void 0:t.tagName)||void 0===o?void 0:o.toLowerCase()))return!1;if(g.ElementHelper.hasVisionAttribute(t)){if(!e&&t.hasAttribute("slot"))return!1;if(i.queued.indexOf(t)>-1)return!1;i.queued.push(t),r.push(t)}return!0},o=function(t){var e,r;try{for(var i=s(Array.from(t.children)),a=i.next();!a.done;a=i.next()){var u=a.value;n(u)&&("template"!==u.tagName.toLowerCase()&&o(u))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},n(t),o(t),[2,r]}))}))},e.prototype.buildTag=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=f.Tag),i(this,void 0,void 0,(function(){var n;return a(this,(function(o){return t[f.Tag.TaggedVariable]?[2,e?t[f.Tag.TaggedVariable]:null]:("slot"===t.tagName.toLowerCase()?r=w.SlotTag:t.hasAttribute("slot")&&(r=m.SlottedTag),n=new r(t,this),this.tags.push(n),[2,n])}))}))},e.prototype.setupTags=function(t){return i(this,void 0,void 0,(function(){var e,r,n,o,i,u,c,l,f,p,h,y,d,v,b,_,g,w,m,O,x,S,T,A,E,P,j,k,N,R,C,L,M,D,I;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),e=s(t),r=e.next(),a.label=1;case 1:return r.done?[3,4]:[4,(x=r.value).buildAttributes()];case 2:a.sent(),a.label=3;case 3:return r=e.next(),[3,1];case 4:return[3,7];case 5:return n=a.sent(),S={error:n},[3,7];case 6:try{r&&!r.done&&(T=e.return)&&T.call(e)}finally{if(S)throw S.error}return[7];case 7:a.trys.push([7,12,13,14]),o=s(t),i=o.next(),a.label=8;case 8:return i.done?[3,11]:[4,(x=i.value).compileAttributes()];case 9:a.sent(),a.label=10;case 10:return i=o.next(),[3,8];case 11:return[3,14];case 12:return u=a.sent(),A={error:u},[3,14];case 13:try{i&&!i.done&&(E=o.return)&&E.call(o)}finally{if(A)throw A.error}return[7];case 14:a.trys.push([14,19,20,21]),c=s(t),l=c.next(),a.label=15;case 15:return l.done?[3,18]:[4,(x=l.value).setupAttributes()];case 16:a.sent(),a.label=17;case 17:return l=c.next(),[3,15];case 18:return[3,21];case 19:return f=a.sent(),P={error:f},[3,21];case 20:try{l&&!l.done&&(j=c.return)&&j.call(c)}finally{if(P)throw P.error}return[7];case 21:a.trys.push([21,26,27,28]),p=s(t),h=p.next(),a.label=22;case 22:return h.done?[3,25]:[4,(x=h.value).extractAttributes()];case 23:a.sent(),a.label=24;case 24:return h=p.next(),[3,22];case 25:return[3,28];case 26:return y=a.sent(),k={error:y},[3,28];case 27:try{h&&!h.done&&(N=p.return)&&N.call(p)}finally{if(k)throw k.error}return[7];case 28:a.trys.push([28,33,34,35]),d=s(t),v=d.next(),a.label=29;case 29:return v.done?[3,32]:[4,(x=v.value).connectAttributes()];case 30:a.sent(),a.label=31;case 31:return v=d.next(),[3,29];case 32:return[3,35];case 33:return b=a.sent(),R={error:b},[3,35];case 34:try{v&&!v.done&&(C=d.return)&&C.call(d)}finally{if(R)throw R.error}return[7];case 35:a.trys.push([35,40,41,42]),_=s(t),g=_.next(),a.label=36;case 36:return g.done?[3,39]:[4,(x=g.value).finalize()];case 37:a.sent(),this.queued.splice(this.queued.indexOf(x.element),1),a.label=38;case 38:return g=_.next(),[3,36];case 39:return[3,42];case 40:return w=a.sent(),L={error:w},[3,42];case 41:try{g&&!g.done&&(M=_.return)&&M.call(_)}finally{if(L)throw L.error}return[7];case 42:try{for(m=s(t),O=m.next();!O.done;O=m.next())x=O.value,this.observer.observe(x.element,{attributes:!0,characterData:!0,childList:!0,subtree:!0})}catch(t){D={error:t}}finally{try{O&&!O.done&&(I=m.return)&&I.call(m)}finally{if(D)throw D.error}}return[2]}}))}))},e.prototype.buildFrom=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),i(this,void 0,void 0,(function(){var n,o,i,u,c,l,f,p,h,y,d,v,b,_,w,m,O,x;return a(this,(function(a){switch(a.label){case 0:return e?(this.rootElement.setAttribute("vsn-root",""),n=this,[4,this.buildTag(this.rootElement,!0)]):[3,3];case 1:return n._root=a.sent(),this._root.createScope(!0),[4,this.setupTags([this._root])];case 2:a.sent(),a.label=3;case 3:o=this.querySelectorElement(t,"template"),i=[],a.label=4;case 4:a.trys.push([4,9,10,11]),u=s(Array.from(o)),c=u.next(),a.label=5;case 5:return c.done?[3,8]:(l=c.value,g.ElementHelper.hasVisionAttribute(l)?[4,this.buildTag(l)]:[3,7]);case 6:(b=a.sent())&&i.push(b),a.label=7;case 7:return c=u.next(),[3,5];case 8:return[3,11];case 9:return f=a.sent(),w={error:f},[3,11];case 10:try{c&&!c.done&&(m=u.return)&&m.call(u)}finally{if(w)throw w.error}return[7];case 11:return i.length?[4,this.setupTags(i)]:[3,13];case 12:a.sent(),a.label=13;case 13:return p=[],[4,this.discover(t,r)];case 14:h=a.sent(),a.label=15;case 15:a.trys.push([15,20,21,22]),y=s(h),d=y.next(),a.label=16;case 16:return d.done?[3,19]:(v=d.value,[4,this.buildTag(v)]);case 17:(b=a.sent())&&p.push(b),a.label=18;case 18:return d=y.next(),[3,16];case 19:return[3,22];case 20:return _=a.sent(),O={error:_},[3,22];case 21:try{d&&!d.done&&(x=y.return)&&x.call(y)}finally{if(O)throw O.error}return[7];case 22:return[4,this.setupTags(p)];case 23:return a.sent(),e&&(this._built=!0,this.dispatch("builtRoot")),this.dispatch("built",p),[2,p]}}))}))},e.prototype.getTagsForElements=function(t,e){return void 0===e&&(e=!1),i(this,void 0,void 0,(function(){var r,n,o,i,l,p,h,y,v,b,_,g,w,m,O,x;return a(this,(function(a){switch(a.label){case 0:r=new d.TagList,n=[];try{for(o=s(t),i=o.next();!i.done;i=o.next())(v=i.value)&&v[f.Tag.TaggedVariable]&&(r.push(v[f.Tag.TaggedVariable]),n.push(v))}catch(t){w={error:t}}finally{try{i&&!i.done&&(m=o.return)&&m.call(o)}finally{if(w)throw w.error}}if(!e)return[3,8];for(l=c([],u(t)),p=l.length;p>=0;p--)v=l[p],n.indexOf(v)>-1&&l.splice(p,1);a.label=1;case 1:a.trys.push([1,6,7,8]),h=s(l),y=h.next(),a.label=2;case 2:return y.done?[3,5]:(v=y.value,_=(b=r).push,[4,this.getTagForElement(v,e)]);case 3:_.apply(b,[a.sent()]),a.label=4;case 4:return y=h.next(),[3,2];case 5:return[3,8];case 6:return g=a.sent(),O={error:g},[3,8];case 7:try{y&&!y.done&&(x=h.return)&&x.call(h)}finally{if(O)throw O.error}return[7];case 8:return[2,r]}}))}))},e.prototype.getTagForElement=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),i(this,void 0,void 0,(function(){return a(this,(function(n){switch(n.label){case 0:return t&&t[f.Tag.TaggedVariable]?[2,t[f.Tag.TaggedVariable]]:t&&e?(t instanceof HTMLElement&&t.setAttribute("vsn-ref",""),[4,this.buildFrom(t.parentElement||t,!1,r)]):[3,3];case 1:return n.sent(),[4,this.getTagForElement(t,!1)];case 2:return[2,n.sent()];case 3:return[2,null]}}))}))},e.prototype.getTagForScope=function(t){return i(this,void 0,void 0,(function(){var e,r,n,o,i;return a(this,(function(a){try{for(e=s(this.tags),r=e.next();!r.done;r=e.next())if((n=r.value).uniqueScope&&n.scope===t)return[2,n]}catch(t){o={error:t}}finally{try{r&&!r.done&&(i=e.return)&&i.call(e)}finally{if(o)throw o.error}}return[2,null]}))}))},e.prototype.resetBranch=function(t){return i(this,void 0,void 0,(function(){var e,r,n,o,i,u,c,l;return a(this,(function(a){switch(a.label){case 0:t instanceof f.Tag&&(t=t.element),(e=t[f.Tag.TaggedVariable])&&e.findParentTag(),r=Array.from(t.children),a.label=1;case 1:a.trys.push([1,6,7,8]),n=s(r),o=n.next(),a.label=2;case 2:return o.done?[3,5]:(i=o.value,[4,this.resetBranch(i)]);case 3:a.sent(),a.label=4;case 4:return o=n.next(),[3,2];case 5:return[3,8];case 6:return u=a.sent(),c={error:u},[3,8];case 7:try{o&&!o.done&&(l=n.return)&&l.call(n)}finally{if(c)throw c.error}return[7];case 8:return[2]}}))}))},e.getParentElement=function(t){return t.parentElement?t.parentElement:t.assignedSlot?t.assignedSlot.parentElement:t.shadowParent?t.shadowParent:null},e}(x.EventDispatcher);e.AbstractDOM=S},3276:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},u=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.DOMObject=void 0;var c=function(t){function e(e,r){var n,o=t.call(this)||this;return o.element=e,o._uniqueScope=!1,o.delegates=[],o.isSlot&&(n=o.delegates).push.apply(n,u([],s(e.assignedNodes()))),e.assignedSlot&&(o.slot=e.assignedSlot),o}return o(e,t),Object.defineProperty(e.prototype,"isSlot",{get:function(){return this.element instanceof HTMLSlotElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSlotted",{get:function(){return this.element.hasAttribute("slot")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope?this._scope:null},set:function(t){this._scope=t},enumerable:!1,configurable:!0}),e.prototype.watchAttribute=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},e.prototype.watchStyle=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(t){return[2]}))}))},e.prototype.deconstruct=function(){var e;this._uniqueScope&&(null===(e=this.scope)||void 0===e||e.deconstruct()),this.onEventHandlers={},this.slot=null,this.delegates.length=0,t.prototype.deconstruct.call(this)},e}(r(5559).EventDispatcher);e.DOMObject=c},2509:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ShadowDOM=void 0;var i=function(t){function e(e,r,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1);var i=t.call(this,r,n,o)||this;return i._parent=e,i}return o(e,t),e}(r(9192).AbstractDOM);e.ShadowDOM=i},7942:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedDocument=void 0;var i=function(t){function e(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=t.call(this,e,r)||this;return o._document=e,o}return o(e,t),e}(r(3276).DOMObject);e.WrappedDocument=i},2144:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedWindow=void 0;var i=r(3276),a=r(4843),s=function(t){function e(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=t.call(this,e,r)||this;return o._window=e,o._scope=new a.Scope,o.scope.set("@scrollY",o._window.scrollY),o.scope.set("@scrollX",o._window.scrollX),e.addEventListener("scroll",o.onScroll.bind(o),{passive:!0}),o}return o(e,t),e.prototype.onScroll=function(t){this.scope.set("@scrollY",this._window.scrollY),this.scope.set("@scrollX",this._window.scrollX)},e}(i.DOMObject);e.WrappedWindow=s},5559:function(t,e){"use strict";var r=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},n=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.EventDispatcher=e.EventCallback=void 0;var i=function(){function t(t,e,r,n){this.fnc=t,this.key=e,this.once=r,this.context=n,this.calls=0}return t.prototype.call=function(){for(var t,e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return!(this.once&&this.calls>0)&&((t=this.fnc).apply.apply(t,n([this.context],r(e))),this.calls+=1,!0)},t}();e.EventCallback=i;var a=function(){function t(){this._allListeners=[],this._relays=[],this._lastKey=0,this._listeners={},t.sources.push(this)}return t.prototype.deconstruct=function(){for(var e in this.dispatch("deconstruct",this),t.sources.splice(t.sources.indexOf(this),1),this._listeners)delete this._listeners[e]},t.prototype.addRelay=function(t){this._relays.push(t)},t.prototype.removeRelay=function(t){this._relays.indexOf(t)>-1&&this._relays.splice(this._relays.indexOf(t),1)},t.prototype.on=function(t,e,r,n){return n=n||!1,this._lastKey++,this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(new i(e,this._lastKey,n,r)),this._lastKey},t.prototype.once=function(t,e,r){return this.on(t,e,r,!0)},t.prototype.promise=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return new Promise((function(r,n){e.once(t,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r(t)}),null)}))},t.prototype.off=function(t,e){var r,n;if(!(t in this._listeners))return!1;if(!e)return this._listeners[t]=[],!0;try{for(var i=o(this._listeners[t]),a=i.next();!a.done;a=i.next()){var s=a.value;if(e==s.key)return this._listeners[t].splice(this._listeners[t].indexOf(s),1),!0}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1},t.prototype.offWithContext=function(t,e){var r,n,i,a;if(!(t in this._listeners))return 0;var s=[],u=0;try{for(var c=o(this._listeners[t]),l=c.next();!l.done;l=c.next()){e==(h=l.value).context&&s.push(h)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}try{for(var f=o(s),p=f.next();!p.done;p=f.next()){var h=p.value;this._listeners[t].splice(this._listeners[t].indexOf(h),1),u++}}catch(t){i={error:t}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}return u},t.prototype.getListener=function(t,e){var r,n;try{for(var i=o(this._listeners[t]),a=i.next();!a.done;a=i.next()){var s=a.value;if(e==s.key)return s}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.all=function(t,e,r){return r=r||!1,this._lastKey++,this._allListeners.push(new i(t,this._lastKey,r,e)),this._lastKey},t.prototype.none=function(t){var e,r;try{for(var n=o(this._allListeners),i=n.next();!i.done;i=n.next()){var a=i.value;if(t==a.key)return this._allListeners.splice(this._allListeners.indexOf(a),1),!0}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return!1},t.prototype.noneWithContext=function(t){var e,r,n,i,a,s,u,c,l=[],f=0;try{for(var p=o(this._allListeners),h=p.next();!h.done;h=p.next()){t==(w=h.value).context&&l.push(w)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(r=p.return)&&r.call(p)}finally{if(e)throw e.error}}for(var y in this._listeners){var d=[];try{for(var v=(n=void 0,o(this._listeners[y])),b=v.next();!b.done;b=v.next()){t==(w=b.value).context&&d.push(w)}}catch(t){n={error:t}}finally{try{b&&!b.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}try{for(var _=(a=void 0,o(d)),g=_.next();!g.done;g=_.next()){var w=g.value;this._listeners[y].splice(this._listeners[y].indexOf(w),1),f++}}catch(t){a={error:t}}finally{try{g&&!g.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}}try{for(var m=o(l),O=m.next();!O.done;O=m.next()){w=O.value;this._allListeners.splice(this._allListeners.indexOf(w),1),f++}}catch(t){u={error:t}}finally{try{O&&!O.done&&(c=m.return)&&c.call(m)}finally{if(u)throw u.error}}return f},t.prototype.dispatch=function(e){for(var i,a,s,u,c,l=[],f=1;f<arguments.length;f++)l[f-1]=arguments[f];if(e in this._listeners)for(var p=0;p<this._listeners[e].length;p++){(d=this._listeners[e][p]).once&&(this.off(e,d.key),p--),d.call(l)}try{for(var h=o(this._allListeners),y=h.next();!y.done;y=h.next()){var d;(d=y.value).once&&this.none(d.key),d.call(l)}}catch(t){i={error:t}}finally{try{y&&!y.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}try{for(var v=o(this._relays),b=v.next();!b.done;b=v.next()){var _=b.value;_.dispatch.apply(_,n([e],r(l)))}}catch(t){s={error:t}}finally{try{b&&!b.done&&(u=v.return)&&u.call(v)}finally{if(s)throw s.error}}if(this!==t.stream){var g=l;l.length>0&&l[0]!==this&&(g=n([this],r(l))),(c=t.stream).dispatch.apply(c,n([e],r(g)))}},t.sources=[],t.stream=new t,t}();e.EventDispatcher=a},8001:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Formats=void 0;var o=r(1371),i=r(6417),a=function(){function t(){}return t.currency=function(e){if(!t.CurrencyFormatter){var r=function(){var e=i.Configuration.get("locale","en-US"),r=i.Configuration.get("currency","USD");t.CurrencyFormatter=new Intl.NumberFormat(e,{style:"currency",currency:r})};i.Configuration.instance.on("change:locale",r),i.Configuration.instance.on("change:currency",r),r()}return e=(""+e).replace(/[^0-9.]+/,""),e=parseFloat(e),isNaN(e)?"":t.CurrencyFormatter.format(e)},t.date=function(t){return t?t.toLocaleString():""},n([o.Registry.format("currency")],t,"currency",null),n([o.Registry.format("date")],t,"date",null),t}();e.Formats=a},9188:function(t,e){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.MessageList=void 0;var n=function(){function t(t){this.reset(),t&&this.merge(t)}return t.prototype.reset=function(){var t,e,n=this.keys;if(this._cachedList=void 0,n.length>0)try{for(var o=r(n),i=o.next();!i.done;i=o.next()){delete this[i.value]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.add=function(t,e,r){var n;void 0===r&&(r=!1),this.merge(((n={})[t]="string"==typeof e?[e]:e,n),r)},t.prototype.merge=function(t,e){var r=this;if(void 0===e&&(e=!1),t){this._cachedList=void 0;var n=this.keys,o=function(o){if(!t.hasOwnProperty(o))return"continue";var a=t[o];a instanceof Array&&(!e&&n.indexOf(o)>-1?a.map((function(t){r[o].push(t)})):a.length>0&&(i[o]=a))},i=this;for(var a in t)o(a)}},Object.defineProperty(t.prototype,"list",{get:function(){var t,e;if(this._cachedList)return this._cachedList;var n={},o=this.keys;try{for(var i=r(o),a=i.next();!a.done;a=i.next()){var s=a.value;n[s]=this[s]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return this._cachedList=n,n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){var t=Object.keys(this);return t.splice(t.indexOf("_cachedList"),1),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.keys.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!1,configurable:!0}),t}();e.MessageList=n},5453:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var s=r(9188),u=r(1525),c=r(1371),l=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this)||this;return r._hasErrors=!1,e&&r.setData(e),r._lastData=r.getData(),r._constructor(),r}return o(e,t),e.prototype._constructor=function(){},e.prototype.validate=function(){var t,e;this._hasErrors=!1,this._errors=new s.MessageList;try{for(var r=a(this.getProperties()),n=r.next();!n.done;n=r.next()){var o=n.value,i=this["__"+o].validate();i.length>0&&(this._errors.add(o,i,!0),this._hasErrors=!0)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return this._errors},e.prototype.hasErrors=function(){return this.validate(),this._hasErrors},Object.defineProperty(e.prototype,"errors",{get:function(){return this._errors},enumerable:!1,configurable:!0}),e=i([c.Registry.model("Model")],e)}(u.ScopeData);e.Model=l},7719:function(t,e){"use strict";var r=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Modifiers=e.Modifier=void 0;var o=function(){function t(t){var e=r(t.split(",")),n=e[0],o=e.slice(1);this.name=n,this.arguments=o}return t.prototype.getArguments=function(t){return void 0===t&&(t=[]),this.arguments.length?this.arguments:t},t}();e.Modifier=o;var i=function(){function t(t){var e,r;void 0===t&&(t=[]),this.modifiers=new Map;try{for(var o=n(t),i=o.next();!i.done;i=o.next()){var a=i.value;this.add(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}}return t.prototype.add=function(t){var e=new o(t);this.modifiers.set(e.name,e)},t.prototype.has=function(t){return this.modifiers.has(t)},t.prototype.get=function(t){return this.modifiers.get(t)},Object.defineProperty(t.prototype,"iter",{get:function(){return Array.from(this.modifiers.values())},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"names",{get:function(){return this.iter.map((function(t){return t.name}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.modifiers.size},enumerable:!1,configurable:!0}),t.fromAttribute=function(e){return new t(e.split("|").splice(1))},t}();e.Modifiers=i},1371:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Registry=e.RegistryStore=e.register=void 0;var i=r(5559);function a(t,e,r){return void 0===e&&(e=null),void 0===r&&(r=null),function(n,o){void 0===o&&(o=null),e=e||n.prototype.constructor.name,null!==o&&(n=n[o]),u.instance[t].register(e,n),r&&r()}}e.register=a;var s=function(t){function e(e){void 0===e&&(e=null);var r=t.call(this)||this;return r.timeouts={},r.store=e||{},r}return o(e,t),e.prototype.register=function(t,e){this.store[t]=e,this.dispatch("register",t,e),this.dispatch("registered:"+t,e)},e.prototype.get=function(t){var e=this;return new Promise((function(r,n){e.store[t]?r(e.store[t]):(console.warn("Waiting for "+t+" to be registered."),e.timeouts[t]=setTimeout((function(){console.warn("RegistryStore.get timed out after 5 seconds trying to find "+t+". Make sure the item is registered.")}),5e3),e.once("registered:"+t,(function(n){clearTimeout(e.timeouts[t]),r(n)})))}))},e.prototype.getSynchronous=function(t){return this.store[t]},e.prototype.has=function(t){return!!this.store[t]},Object.defineProperty(e.prototype,"keys",{get:function(){return Object.keys(this.store)},enumerable:!1,configurable:!0}),e}(i.EventDispatcher);e.RegistryStore=s;var u=function(t){function e(){var e=t.call(this)||this;return e.tags=new s,e.components=new s,e.functions=new s,e.controllers=new s,e.classes=new s,e.models=new s,e.templates=new s,e.services=new s,e.types=new s,e.validators=new s,e.formats=new s,e.attributes=new s,e}return o(e,t),e.component=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("components",t,e)},e.function=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("functions",t,e)},e.class=function(t){e.instance.classes.register(t.fullSelector,t)},e.controller=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("controllers",t,e)},e.model=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("models",t,e)},e.template=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("templates",t,e)},e.service=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("services",t,e)},e.type=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("types",t,e)},e.validator=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("validators",t,e)},e.format=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("formats",t,e)},e.attribute=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),a("attributes",t,e)},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e}(i.EventDispatcher);e.Registry=u},4843:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},s=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionScope=e.Scope=void 0;var u=r(5559),c=r(414),l=r(4880),f=r(8572),p=r(1525),h=r(1469),y=r(9033),d=function(t){function e(e){var r=t.call(this)||this;return r._isGarbage=!1,e&&(r.parentScope=e),r.children=[],r._data=new h.DynamicScopeData({}),r._data.addRelay(r),r}return o(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"objectify",{get:function(){var t,r,n={};try{for(var o=i(this.keys),a=o.next();!a.done;a=o.next()){var s=a.value,u=this.get(s);n[s]=u instanceof e?u.objectify:u}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentScope",{get:function(){if(this._parentScope)return this._parentScope;var t=y.DOM.instance.root.scope;return this==t?null:t},set:function(t){this._parentScope&&this._parentScope!==t&&this._parentScope.removeChild(this),t?(this._parentScope=t,t.addChild(this)):this._parentScope&&(this._parentScope.removeChild(this),this._parentScope=null)},enumerable:!1,configurable:!0}),e.prototype.addChild=function(t){this.children.push(t)},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1)},e.prototype.getReference=function(t,r){void 0===r&&(r=!0);var n=t.split("."),o=n[0],i=this,a=null,s=n.length;if(t.startsWith("?"))return new l.QueryReference(t,i);for(var u=0;u<s;u++){o=n[u],a=i.get(o,0===u);var f=[null,void 0].indexOf(a)>-1;if(r&&f&&u+1<s)a=new e(i),i.set(o,a);else if(!r&&f)return null;a&&a instanceof e&&(i=a)}return new c.ScopeReference(i,o,a)},e.prototype.get=function(t,e){void 0===e&&(e=!0);var r=this._data[t];return void 0===r?e&&this.parentScope?this.parentScope.get(t,e):"":r},e.prototype.set=function(t,e,r){if(void 0===r&&(r=!1),r){var n=typeof e;"number"===n?e%1==0?this.setType(t,"integer"):this.setType(t,"float"):"string"===n?this.setType(t,"string"):"boolean"===n&&this.setType(t,"boolean")}this._data.hasProperty(t)||this._data.createProperty(t),this._data[t]=e},Object.defineProperty(e.prototype,"keys",{get:function(){return this._data.keys},enumerable:!1,configurable:!0}),e.prototype.has=function(t){return this._data.hasProperty(t)},e.prototype.setType=function(t,e){this._data.getProperty(t,!0).type=e,this.has(t)&&this.set(t,this.get(t))},e.prototype.getType=function(t){var e=this._data.getProperty(t);return null==e?void 0:e.type},e.prototype.extend=function(t){var e,r;try{for(var n=i(t),o=n.next();!o.done;o=n.next()){var a=o.value;this.set(a,t[a])}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},e.prototype.clear=function(){var t,e;try{for(var r=i(this._data.keys),n=r.next();!n.done;n=r.next()){var o=n.value;["function","object"].indexOf(typeof this.get(o))>-1||this.set(o,null)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.cleanup=function(){this.children.length=0,this.parentScope=null},Object.defineProperty(e.prototype,"isGarbage",{get:function(){return this._isGarbage},enumerable:!1,configurable:!0}),e.prototype.collectGarbage=function(t){var e,r;void 0===t&&(t=!1),this._isGarbage=!0;try{for(var n=i(this.children),o=n.next();!o.done;o=n.next()){o.value.collectGarbage(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}t&&this.cleanup()},e.prototype.deconstruct=function(){t.prototype.deconstruct.call(this),this.collectGarbage(!0)},e.prototype.wrap=function(t,r,n){var o=this;if(void 0===r&&(r=!1),void 0===n&&(n=!0),t instanceof p.ScopeData)return this._data instanceof u.EventDispatcher&&(this._data.removeRelay(this),this._data.deconstruct()),this.wrapped=t,this._data=t,void this._data.addRelay(this);if(t instanceof e&&(t=t._data),-1===[null,void 0].indexOf(this.wrapped))throw Error("A scope can only wrap a single object");if(!t)throw Error("Can only wrap objects.");if(t.$wrapped)throw Error("An object should only be wrapped once.");this.wrapped=t,this.wrapped.$wrapped=!0;var i=function(i){if(["constructor"].indexOf(i)>-1||i.startsWith("$"))return"continue";if(c.wrapped[i]instanceof Function)return c.set(i,c.wrapped[i]),"continue";if(c.wrapped[i]instanceof Array&&(c.wrapped[i]instanceof f.WrappedArray||(c.wrapped[i]=new(f.WrappedArray.bind.apply(f.WrappedArray,s([void 0],a(t[i]))))),c.wrapped[i].on("change",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.dispatch.apply(o,s(["change:"+i],a(t)))}))),"object"==typeof c.wrapped[i]&&c.wrapped[i]&&c.wrapped[i].constructor===Object){var u=new e(c);u.wrap(c.wrapped[i]),c.wrapped[i]=u}n&&-1===[null,void 0].indexOf(c.wrapped[i])&&c.set(i,c.wrapped[i]);Object.defineProperty(c.wrapped,i,{get:function(){return o.get(i)},set:function(t){o.set(i,t)},enumerable:!0,configurable:!0}),r&&c.dispatch("change:"+i)},c=this;for(var l in t)i(l);this.wrapped.get=this.get.bind(this),this.wrapped.set=this.set.bind(this),this.wrapped.on=this.on.bind(this),this.wrapped.once=this.once.bind(this),this.wrapped.off=this.off.bind(this)},e.prototype.unwrap=function(){if(this.wrapped){var t=this.wrapped;for(var e in this.wrapped=null,t.$wrapped=!1,t)delete t[e]}},e.fromObject=function(t,r){var n=new e(r);return n.wrap(t),n},e}(r(3392).ScopeAbstract);e.Scope=d;var v=function(t){function e(e){var r=t.call(this,e)||this;return r.addRelay(e),r}return o(e,t),e.prototype.set=function(e,r){this.parentScope&&(this.parentScope.has(e)||["$","@"].indexOf(e[0])>-1)?this.parentScope.set(e,r):t.prototype.set.call(this,e,r)},e.prototype.collectGarbage=function(e){void 0===e&&(e=!0),t.prototype.collectGarbage.call(this,!0)},e}(d);e.FunctionScope=v},1469:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicScopeData=void 0;var a=function(t){function e(e){var r,n,o=t.call(this)||this;if(e instanceof Array)try{for(var a=i(e),s=a.next();!s.done;s=a.next()){var u=s.value;o.createProperty(u)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}else o.setData(e);return o}return o(e,t),e.prototype.setData=function(e){var r,n;try{for(var o=i(Object.keys(e)),a=o.next();!a.done;a=o.next()){var s=a.value;this.hasProperty(s)||this.createProperty(s)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}t.prototype.setData.call(this,e)},e.prototype.on=function(e,r,n,o){return 0==e.indexOf("change:")&&this.createProperty(e.substr(7)),t.prototype.on.call(this,e,r,n,o)},e}(r(6966).ScopeDataAbstract);e.DynamicScopeData=a},4329:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectAccessor=void 0;var i=function(t){function e(e){var r=t.call(this)||this;return r.data=e,r}return o(e,t),e.prototype.get=function(t,r){void 0===r&&(r=null);var n=this.data[t];return"object"==typeof n?new e(n):void 0===n?r:n},e.prototype.set=function(t,e){this.data[t]=e},e}(r(3392).ScopeAbstract);e.ObjectAccessor=i},4880:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryReference=void 0;var s=r(9033),u=function(t){function e(e,r){var n=t.call(this)||this;return n.path=e,n.scope=r,n}return o(e,t),e.prototype.getScope=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(r){switch(r.label){case 0:return t=(t=this.path.split(".")).splice(0,t.length-1),[4,s.DOM.instance.exec(t.join("."))];case 1:return[2,1===(e=r.sent()).length?e[0].scope:e.map((function(t){return t.scope}))]}}))}))},e.prototype.getKey=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){return[2,(t=this.path.split("."))[t.length-1]]}))}))},e.prototype.getValue=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,s.DOM.instance.exec(this.path)];case 1:return[2,t.sent()]}}))}))},e}(r(414).ScopeReference);e.QueryReference=u},3392:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeAbstract=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(r(5559).EventDispatcher);e.ScopeAbstract=i},1525:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeData=void 0;var a=function(t){function e(){var e,r,n=t.call(this)||this,o=n.__properties__.splice(0,n.__properties__.length);try{for(var a=i(o),s=a.next();!s.done;s=a.next()){!function(t,e){if(t["__"+e+"__"]){var r=t["__"+e+"__"],n=r[0],o=r[1]||{};t.createProperty(e,n,o)}}(n,s.value)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n}return o(e,t),e}(r(6966).ScopeDataAbstract);e.ScopeData=a},6966:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeDataAbstract=void 0;var u=r(9380),c=function(t){function e(){var e=t.call(this)||this;return e.__properties__||(e.__properties__=[]),e.__methods__||(e.__methods__=[]),e}return o(e,t),e.prototype.createMethod=function(t,e){},e.prototype.createProperty=function(t,e,r){var n=this;if(void 0===e&&(e=u.Property),this.hasProperty(t))return this.getProperty(t);var o=new e((r=r||{}).default,r),s=Object.getOwnPropertyDescriptor(this,t);this["__"+t]=o,this.__properties__.push(t);var c=s?s.get:function(){return o.value},l=s?s.set:function(t){o.value=t};return delete this[t],Object.defineProperty(this,t,{get:c,set:l,enumerable:!0,configurable:!0}),o.on("change",(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n.dispatch.apply(n,a(["change",t],i(e))),n.dispatch.apply(n,a(["change:"+t],i(e)))})),o},e.prototype.hasProperty=function(t){return-1!==this.__properties__.indexOf(t)},Object.defineProperty(e.prototype,"keys",{get:function(){return a([],i(this.__properties__))},enumerable:!1,configurable:!0}),e.prototype.getKeys=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=[];try{for(var i=s(this.keys),a=i.next();!a.done;a=i.next()){var u=a.value;this.getProperty(u).hasLabels(r)&&o.push(u)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}return o},e.prototype.setData=function(t){var e=this.getProperties();for(var r in t)e.indexOf(r)>-1&&(this[r]=t[r])},e.prototype.getData=function(){for(var t,e,r,n,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var a={};try{t:for(var u=s(this.getProperties()),c=u.next();!c.done;c=u.next()){var l=c.value,f=this["__"+l];try{for(var p=(r=void 0,s(o)),h=p.next();!h.done;h=p.next()){var y=h.value;if(!f.hasLabel(y))continue t}}catch(t){r={error:t}}finally{try{h&&!h.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}null!=this[l]&&f&&(a[l]=f.clean())}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}return a},e.prototype.get=function(t){return this[t]},e.prototype.set=function(t,e){this[t]=e},e.prototype.getProperties=function(){return this.__properties__},e.prototype.getProperty=function(t,e){void 0===e&&(e=!1);var r=this["__"+t];return e&&!r&&(r=this.createProperty(t)),r},e.prototype.bindToProperties=function(t,e,r){var n,o;try{for(var i=s(e),a=i.next();!a.done;a=i.next()){var u=this["__"+a.value];u&&u.on(t,r)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},e.prototype.setLastData=function(){this._lastData=this.getData()},e.prototype.revert=function(){this.setData(this._lastData)},e.prototype.isModified=function(){var t,e,r=this._lastData,n=this.getData();try{for(var o=s(this.getProperties()),i=o.next();!i.done;i=o.next()){var a=i.value;if(n[a]!=r[a])return!0}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return!1},e}(r(5559).EventDispatcher);e.ScopeDataAbstract=c},2018:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeObject=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(r(1525).ScopeData);e.ScopeObject=i},414:function(t,e){"use strict";var r=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeReference=void 0;var o=function(){function t(t,e,r){void 0===t&&(t=null),void 0===e&&(e=null),void 0===r&&(r=null),this._scope=t,this._key=e,this._value=r}return t.prototype.getScope=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this._scope]}))}))},t.prototype.getKey=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this._key]}))}))},t.prototype.getValue=function(){return r(this,void 0,void 0,(function(){return n(this,(function(t){return[2,this._value]}))}))},t}();e.ScopeReference=o},8572:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedArray=void 0;var u=r(5559),c=function(t){function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=t.apply(this,a([],i(r)))||this;return o.$wrapped=!0,Object.setPrototypeOf(o,e.prototype),o.dispatcher=new u.EventDispatcher,o}return o(e,t),e.prototype.dispatch=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];(e=this.dispatcher).dispatch.apply(e,a([t],i(r)))},e.prototype.on=function(t,e,r){this.dispatcher.on(t,e,r)},e.prototype.off=function(t,e){this.dispatcher.off(t,e)},e.prototype.once=function(t,e){this.dispatcher.once(t,e)},e.prototype.push=function(){for(var e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var u=t.prototype.push.apply(this,a([],i(n)));this.dispatch.apply(this,a(["push"],i(n))),this.dispatch("change",{added:n});try{for(var c=s(n),l=c.next();!l.done;l=c.next()){var f=l.value;this.dispatch("add",f)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return u},e.prototype.remove=function(t){var e=this.indexOf(t);return-1!==e&&(this.splice(e,1),!0)},e.prototype.pop=function(){var e=t.prototype.pop.call(this);return this.dispatch("pop",e),this.dispatch("change",{removed:[e]}),this.dispatch("remove",e),e},e.prototype.shift=function(){var e=t.prototype.shift.call(this);return this.dispatch("shift",e),this.dispatch("change",{removed:[e]}),this.dispatch("remove",e),e},e.prototype.splice=function(e,r){var n,o,i=t.prototype.splice.call(this,e,r);this.dispatch("change",{removed:i});try{for(var a=s(i),u=a.next();!u.done;u=a.next()){var c=u.value;this.dispatch("remove",c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i},e.prototype.concat=function(){for(var e,r,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var u=t.prototype.concat.apply(this,a([],i(n)));this.dispatch("change",{added:u});try{for(var c=s(u),l=c.next();!l.done;l=c.next()){var f=l.value;this.dispatch("add",f)}}catch(t){e={error:t}}finally{try{l&&!l.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}return u},e.prototype.filter=function(r,n){var o=t.prototype.filter.call(this,r,n);return new(e.bind.apply(e,a([void 0],i(o))))},e.prototype.get=function(t){return["length"].indexOf(t)>-1?this[t]:void 0},Object.defineProperty(e.prototype,"length",{get:function(){var t,e,r=0;try{for(var n=s(this),o=n.next();!o.done;o=n.next()){o.value;r+=1}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},set:function(t){this.setLength(t)},enumerable:!1,configurable:!0}),e.prototype.setLength=function(t){var e,r,n,o,i=0,a=[];try{for(var u=s(this),c=u.next();!c.done;c=u.next()){var l=c.value;(i+=1)>=t&&a.push(l)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}try{for(var f=s(a),p=f.next();!p.done;p=f.next()){l=p.value;this.splice(this.indexOf(l),1)}}catch(t){n={error:t}}finally{try{p&&!p.done&&(o=f.return)&&o.call(f)}finally{if(n)throw n.error}}},e}(Array);e.WrappedArray=c},6691:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayProperty=void 0;var s=r(9380),u=r(8572),c=function(t){function e(e,r){var n=t.call(this,new u.WrappedArray,r)||this;return n.allKey=n._value.dispatcher.all(n.relayEvent.bind(n),n),void 0!==e&&(n.value=e),n}return o(e,t),e.prototype.deconstruct=function(){this._value.dispatcher.none(this.allKey),t.prototype.deconstruct.call(this)},e.prototype.relayEvent=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];this.dispatch.apply(this,a(["change"],i(e)))},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t instanceof Array||(t=[t]),this._value instanceof u.WrappedArray){this._value.splice(0,this._value.length);for(var e=0;e<t.length;e++)this._value.push(t[e])}else t instanceof u.WrappedArray&&(this._value=t)},enumerable:!1,configurable:!0}),e.prototype.clean=function(){return Array.from(this._value)},e}(s.Property);e.ArrayProperty=c},1401:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.FloatProperty=void 0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type="float",e}return o(e,t),e}(r(9380).Property);e.FloatProperty=i},1677:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.IntegerProperty=void 0;var i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._type="integer",e}return o(e,t),e}(r(9380).Property);e.IntegerProperty=i},9380:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.Property=e.method=e.property=void 0;var a=r(5559),s=r(1371);e.property=function(t,e){return void 0===t&&(t=u),void 0===e&&(e={}),function(r,n){null==r.__properties__&&(r.__properties__=[]),-1==r.__properties__.indexOf(n)&&r.__properties__.push(n);Object.defineProperty(r,"__"+n+"__",{get:function(){return[t,e]},set:function(t){},enumerable:!1,configurable:!0})}},e.method=function(t){return void 0===t&&(t={}),function(e,r){null==e.__methods__&&(e.__methods__=[]),-1==e.__methods__.indexOf(r)&&e.__methods__.push(r);Object.defineProperty(e,"__"+r+"__",{get:function(){return t},set:function(t){},enumerable:!1,configurable:!0})}};var u=function(t){function e(e,r){var n=t.call(this)||this;return n._type="any",n.config=r,n.config.labels||(n.config.labels=[]),n.config.validators||(n.config.validators=[]),n.type=r.type||"any",n.value=e,n}return o(e,t),e.prototype.castType=function(t){var e=s.Registry.instance.types.getSynchronous(this.type);return e?e(t):t},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){var e=this._value;this._value=this.castType(t),this._value!==e&&this.dispatch("change",{oldValue:e,value:t})},enumerable:!1,configurable:!0}),e.prototype.clean=function(){return this.value},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type!=t&&(this._type=t,this.value=this.value)},enumerable:!1,configurable:!0}),e.prototype.validate=function(){var t,e,r=[];try{for(var n=i(this.config.validators||[]),o=n.next();!o.done;o=n.next()){var a=o.value;r.concat(a(this.value))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},e.prototype.getValidator=function(t){var e=s.Registry.instance.validators.getSynchronous(t);if(!e)throw new Error("Invalid validator "+t);return e},e.prototype.addValidator=function(t){"string"==typeof t&&(t=this.getValidator(t)),-1==this.config.validators.indexOf(t)&&this.config.validators.push(t)},e.prototype.addLabel=function(t){null==this.config.labels&&(this.config.labels=[]),-1==this.config.labels.indexOf(t)&&this.config.labels.push(t)},e.prototype.removeLabel=function(t){if(null!=this.config.labels){var e=this.config.labels.indexOf(t);-1!=e&&this.config.labels.splice(e,1)}},e.prototype.hasLabel=function(t){return-1!==this.config.labels.indexOf(t)},e.prototype.hasLabels=function(t){var e,r;try{for(var n=i(t),o=n.next();!o.done;o=n.next()){var a=o.value;if(!this.hasLabel(a))return!1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return!0},e}(a.EventDispatcher);e.Property=u},9618:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FloatProperty=e.IntegerProperty=e.ArrayProperty=e.property=e.Property=void 0;var n=r(9380);Object.defineProperty(e,"Property",{enumerable:!0,get:function(){return n.Property}}),Object.defineProperty(e,"property",{enumerable:!0,get:function(){return n.property}});var o=r(6691);Object.defineProperty(e,"ArrayProperty",{enumerable:!0,get:function(){return o.ArrayProperty}});var i=r(1677);Object.defineProperty(e,"IntegerProperty",{enumerable:!0,get:function(){return i.IntegerProperty}});var a=r(1401);Object.defineProperty(e,"FloatProperty",{enumerable:!0,get:function(){return a.FloatProperty}})},218:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Service=void 0;var i=r(4843),a=function(t){function e(){var e=t.call(this)||this;return e._scope=new i.Scope,e._scope.wrap(e),e}return o(e,t),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope},enumerable:!1,configurable:!0}),Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new this),this._instance},enumerable:!1,configurable:!0}),e}(r(2018).ScopeObject);e.Service=a},712:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},c=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.TagState=void 0;var l,f=r(4843),p=r(5092),h=r(9033),y=r(126),d=r(4264),v=r(6032),b=r(8447),_=r(1371),g=r(3276),w=r(7754),m=r(1857),O=r(7719);!function(t){t[t.Instantiated=0]="Instantiated",t[t.AttributesBuilt=1]="AttributesBuilt",t[t.AttributesCompiled=2]="AttributesCompiled",t[t.AttributesSetup=3]="AttributesSetup",t[t.AttributesExtracted=4]="AttributesExtracted",t[t.AttributesConnected=5]="AttributesConnected",t[t.Built=6]="Built"}(l=e.TagState||(e.TagState={}));var x=function(t){function e(r,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var a=t.call(this,r,o)||this;return a.dom=n,a.deferredAttributes=[],a.attributes=new Map,a._nonDeferredAttributes=[],a._children=[],a.inputTags=["input","select","textarea"],r[e.TaggedVariable]=a,a.rawAttributes={},a.parsedAttributes={},a.onEventHandlers={},a.analyzeElementAttributes(),a._state=l.Instantiated,a}return o(e,t),Object.defineProperty(e.prototype,"uniqueScope",{get:function(){return this._uniqueScope},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"meta",{get:function(){return this._meta||(this._meta={}),this._meta},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.onAttributeStateChange=function(t){t.previouseState===p.AttributeState.Deferred&&(this._nonDeferredAttributes.length=0)},e.prototype.getAttributesWithState=function(t){var e,r,n=[];try{for(var o=s(this.attributes.values()),i=o.next();!i.done;i=o.next()){var a=i.value;a.state===t&&n.push(a)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}return n},Object.defineProperty(e.prototype,"nonDeferredAttributes",{get:function(){var t,e;if(this._nonDeferredAttributes.length>0)return this._nonDeferredAttributes;var r=[];try{for(var n=s(this.attributes.values()),o=n.next();!o.done;o=n.next()){var i=o.value;i.state!==p.AttributeState.Deferred&&r.push(i)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return this._nonDeferredAttributes=r,r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.element.style},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"computedStyle",{get:function(){return d.VisionHelper.window&&window.getComputedStyle(this.element)||null},enumerable:!1,configurable:!0}),e.prototype.analyzeElementAttributes=function(){if(this.element.attributes&&!(this.element.attributes.length<=0))for(var t=0;t<this.element.attributes.length;t++){var e=this.element.attributes[t];if(this.rawAttributes[e.name]=e.value,e.name.indexOf(":")>-1){var r=e.name.split(":"),n=r.slice(1);n.push(e.value),this.parsedAttributes[r[0]]=n}else this.parsedAttributes[e.name]=[null,e.value]}},e.prototype.exec=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return[4,(e=new w.Tree(t)).prepare(this.scope,this.dom,this)];case 1:return r.sent(),[4,e.evaluate(this.scope,this.dom,this)];case 2:return[2,r.sent()]}}))}))},e.prototype.evaluate=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o;return a(this,(function(i){switch(i.label){case 0:i.trys.push([0,5,6,7]),t=s(this.nonDeferredAttributes),e=t.next(),i.label=1;case 1:return e.done?[3,4]:[4,e.value.evaluate()];case 2:i.sent(),i.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return r=i.sent(),n={error:r},[3,7];case 6:try{e&&!e.done&&(o=t.return)&&o.call(t)}finally{if(n)throw n.error}return[7];case 7:return[2]}}))}))},e.prototype.mutate=function(t){this.attributes.forEach((function(e){return e.mutate(t)})),this.dispatch("mutate",t)},e.prototype.get=function(t){this.element.getAttribute(t)},e.prototype.set=function(t,e){this.element.setAttribute(t,e)},e.prototype.getAttributeClass=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return t.startsWith("vsn-")?(t=this.getAttributeName(t),[2,_.Registry.instance.attributes.get(t)]):[2,null]}))}))},e.prototype.getAttributeName=function(t){if((t=t.split("|")[0]).indexOf(":")>-1){var e=t.split(":");t=e[0]}return t},e.prototype.getAttributeBinding=function(t){return(t=t.split("|")[0]).indexOf(":")>-1?t.split(":")[1]:null},Object.defineProperty(e.prototype,"isInput",{get:function(){return this.inputTags.indexOf(this.element.tagName.toLowerCase())>-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSelect",{get:function(){return"select"===this.element.tagName.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMultipleSelect",{get:function(){return this.isSelect&&this.element.hasAttribute("multiple")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.isInput?this.isMultipleSelect?Array.from(this.element.options).filter((function(t){return t.selected})).map((function(t){return t.value})):this.element.value:this.element.textContent},set:function(t){var e,r;if(this.isInput)if(this.isMultipleSelect)try{for(var n=s(Array.from(this.element.options)),o=n.next();!o.done;o=n.next()){var i=o.value;i.selected=t.indexOf(i.value)>-1}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}else this.element.setAttribute("value",t),this.element.value=t;else this.element.innerText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return!!this.isInput&&this.element.checked},set:function(t){this.isInput&&(t?(this.element.setAttribute("checked",""),this.element.checked=!0):(this.element.removeAttribute("checked"),this.element.checked=!1))},enumerable:!1,configurable:!0}),e.prototype.addChild=function(t){this._children.push(t)},e.prototype.removeChild=function(t){this._children.splice(this._children.indexOf(t),1)},Object.defineProperty(e.prototype,"children",{get:function(){return c([],u(this._children))},enumerable:!1,configurable:!0}),e.prototype.findParentTag=function(){var t=!1;if(this.element)for(var r=h.DOM.getParentElement(this.element);r;){if(r[e.TaggedVariable]){t=!0,this.parentTag=r[e.TaggedVariable];break}r=h.DOM.getParentElement(r)}if(!t&&h.DOM.instance.root!==this)return h.DOM.instance.root},Object.defineProperty(e.prototype,"parentTag",{get:function(){return this._parentTag||this.findParentTag(),this._parentTag},set:function(t){this.element!==document.body&&t.element!==document.body&&(this._parentTag&&this._parentTag!==t&&(this._parentTag.removeChild(this),this.scope.parentScope=null),this._parentTag=t,t&&(t.addChild(this),this.scope!==t.scope&&(this.scope.parentScope=t.scope)))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope?this._scope:this.uniqueScope?this.createScope(!0):this.parentTag?this.parentTag.scope:h.DOM.instance.root.scope},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controller",{get:function(){return this._controller},set:function(t){this._controller=t},enumerable:!1,configurable:!0}),e.prototype.wrap=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!0),d.VisionHelper.isConstructor(t)&&(t=new t),t instanceof y.Controller?(t.init(this.scope,this,this.element),this.controller=t):(t.$scope=this.scope,t.$tag=this,t.$el=this.element),this.scope.wrap(t,e,r),t},e.prototype.unwrap=function(){this.scope.unwrap()},e.prototype.removeFromDOM=function(){this.element.remove()},e.prototype.addToParentElement=function(){this.parentTag.element.appendChild(this.element)},e.prototype.hide=function(){this.element.hidden=!0},e.prototype.show=function(){this.element.hidden=!1},e.prototype.findAncestorByAttribute=function(t,e){return void 0===e&&(e=!1),e&&this.hasAttribute(t)?this:this.parentTag?this.parentTag.findAncestorByAttribute(t,!0):null},e.prototype.findDescendantsByAttribute=function(t,e){var r,n;void 0===e&&(e=!1);var o=[];e&&this.hasAttribute(t)&&o.push(this);try{for(var i=s(this.children),a=i.next();!a.done;a=i.next()){var u=a.value;o.concat(u.findDescendantsByAttribute(t,!0))}}catch(t){r={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},e.prototype.findChildrenByAttribute=function(t){return this.children.filter((function(e){return e.hasAttribute(t)}))},e.prototype.hasAttribute=function(t){return!!this.parsedAttributes[t]},e.prototype.getAttribute=function(t){return i(this,void 0,void 0,(function(){var e,r,n,o,i,u;return a(this,(function(a){switch(a.label){case 0:return[4,_.Registry.instance.attributes.get(t)];case 1:if(!(e=a.sent()))return[2];try{for(r=s(this.attributes.values()),n=r.next();!n.done;n=r.next())if((o=n.value)instanceof e)return[2,o]}catch(t){i={error:t}}finally{try{n&&!n.done&&(u=r.return)&&u.call(r)}finally{if(i)throw i.error}}return[2]}}))}))},e.prototype.isMagicAttribute=function(t){return e.magicAttributes.indexOf(t)>-1},e.prototype.setElementAttribute=function(t,r){var n,o;if(this.isMagicAttribute(t)){if("@text"===t)this.element.innerText=r;else if("@html"===t)this.element.innerHTML=r,h.DOM.instance.buildFrom(this.element).then((function(t){w.Tree.reprepareExecutingTrees()}));else if("@value"===t)this.value=r;else if("@class"===t&&r){(n=this.element.classList).remove.apply(n,c([],u(Array.from(this.element.classList))));var i=r instanceof Array?r:[r];i.length&&(o=this.element.classList).add.apply(o,c([],u(i)))}else if(e.flagAttributes.indexOf(t)>-1){var a=t.replace("@","");r?this.element.setAttribute(a,""):this.element.removeAttribute(a)}}else this.element.setAttribute(t,r)},e.prototype.getElementAttribute=function(t){if(this.isMagicAttribute(t)){if("@text"===t)return this.element.innerText;if("@html"===t)return this.element.innerHTML;if("@value"===t)return this.value;if("@class"===t)return Array.from(this.element.classList);if(e.flagAttributes.indexOf(t)>-1){var r=t.replace("@","");return this.element.hasAttribute(r)}}return this.element.getAttribute(t)},e.prototype.getRawAttributeValue=function(t,e){return void 0===e&&(e=null),this.rawAttributes[t]?this.rawAttributes[t]:e},e.prototype.hasRawAttribute=function(t){return void 0!==this.getRawAttributeValue(t,void 0)},e.prototype.getParsedAttributeValue=function(t,e,r){return void 0===e&&(e=0),void 0===r&&(r=null),this.parsedAttributes[t]&&this.parsedAttributes[t][e]||r},e.prototype.getTagsToBuild=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return this.isSlot?[4,h.DOM.instance.getTagsForElements(this.delegates,!0)]:[3,2];case 1:return[2,t.sent()];case 2:return[2,[this]]}}))}))},e.prototype.buildAttributes=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o,i,u,c,f,p,h,y,v,b,_,g,w;return a(this,(function(a){switch(a.label){case 0:return t=!1,e=!1,r=d.VisionHelper.isMobile(),(null===this.element.offsetParent||this.hasAttribute("hidden")||this.hasAttribute("vsn-defer"))&&(e=!0),[4,this.getTagsToBuild()];case 1:n=a.sent(),o=this.isSlot?this:null,a.label=2;case 2:a.trys.push([2,11,12,13]),i=s(n),u=i.next(),a.label=3;case 3:if(u.done)return[3,10];for(p in c=u.value,f=[],this.rawAttributes)f.push(p);h=0,a.label=4;case 4:return h<f.length?(y=f[h],c.attributes.has(y)||this.hasModifier(y,"mobile")&&!r||this.hasModifier(y,"desktop")&&r?[3,7]:[4,this.getAttributeClass(y)]):[3,8];case 5:return(v=a.sent())?(v.scoped&&(t=!0),b=v.create(c,y,v,o),c.attributes.set(y,b),e&&v.canDefer?[4,b.defer()]:[3,7]):[3,7];case 6:a.sent(),c.deferredAttributes.push(b),b.on("state",c.onAttributeStateChange,c),a.label=7;case 7:return h++,[3,4];case 8:c.element.getAttribute("id")&&(t=!0),t&&!c.uniqueScope&&(c._uniqueScope=!0),a.label=9;case 9:return u=i.next(),[3,3];case 10:return[3,13];case 11:return _=a.sent(),g={error:_},[3,13];case 12:try{u&&!u.done&&(w=i.return)&&w.call(i)}finally{if(g)throw g.error}return[7];case 13:return this._state=l.AttributesBuilt,[2]}}))}))},e.prototype.compileAttributes=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o,i,u,c,f,h,y,d;return a(this,(function(a){switch(a.label){case 0:return[4,this.getTagsToBuild()];case 1:t=a.sent(),a.label=2;case 2:a.trys.push([2,13,14,15]),e=s(t),r=e.next(),a.label=3;case 3:if(r.done)return[3,12];n=r.value,a.label=4;case 4:a.trys.push([4,9,10,11]),y=void 0,o=s(n.getAttributesWithState(p.AttributeState.Instantiated)),i=o.next(),a.label=5;case 5:return i.done?[3,8]:[4,i.value.compile()];case 6:a.sent(),a.label=7;case 7:return i=o.next(),[3,5];case 8:return[3,11];case 9:return u=a.sent(),y={error:u},[3,11];case 10:try{i&&!i.done&&(d=o.return)&&d.call(o)}finally{if(y)throw y.error}return[7];case 11:return r=e.next(),[3,3];case 12:return[3,15];case 13:return c=a.sent(),f={error:c},[3,15];case 14:try{r&&!r.done&&(h=e.return)&&h.call(e)}finally{if(f)throw f.error}return[7];case 15:return this._state=l.AttributesCompiled,[2]}}))}))},e.prototype.setupAttributes=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o,i,u,c,f,h,y,d;return a(this,(function(a){switch(a.label){case 0:return[4,this.getTagsToBuild()];case 1:t=a.sent(),a.label=2;case 2:a.trys.push([2,13,14,15]),e=s(t),r=e.next(),a.label=3;case 3:if(r.done)return[3,12];n=r.value,a.label=4;case 4:a.trys.push([4,9,10,11]),y=void 0,o=s(n.getAttributesWithState(p.AttributeState.Compiled)),i=o.next(),a.label=5;case 5:return i.done?[3,8]:[4,i.value.setup()];case 6:a.sent(),a.label=7;case 7:return i=o.next(),[3,5];case 8:return[3,11];case 9:return u=a.sent(),y={error:u},[3,11];case 10:try{i&&!i.done&&(d=o.return)&&d.call(o)}finally{if(y)throw y.error}return[7];case 11:return r=e.next(),[3,3];case 12:return[3,15];case 13:return c=a.sent(),f={error:c},[3,15];case 14:try{r&&!r.done&&(h=e.return)&&h.call(e)}finally{if(f)throw f.error}return[7];case 15:return this.isSlot||this.dom.registerElementInRoot(this),this._state=l.AttributesSetup,this.callOnWrapped("$setup"),[2]}}))}))},e.prototype.extractAttributes=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o,i,u,c,f,h,y,d;return a(this,(function(a){switch(a.label){case 0:return[4,this.getTagsToBuild()];case 1:t=a.sent(),a.label=2;case 2:a.trys.push([2,13,14,15]),e=s(t),r=e.next(),a.label=3;case 3:if(r.done)return[3,12];n=r.value,a.label=4;case 4:a.trys.push([4,9,10,11]),y=void 0,o=s(n.getAttributesWithState(p.AttributeState.Setup)),i=o.next(),a.label=5;case 5:return i.done?[3,8]:[4,i.value.extract()];case 6:a.sent(),a.label=7;case 7:return i=o.next(),[3,5];case 8:return[3,11];case 9:return u=a.sent(),y={error:u},[3,11];case 10:try{i&&!i.done&&(d=o.return)&&d.call(o)}finally{if(y)throw y.error}return[7];case 11:return r=e.next(),[3,3];case 12:return[3,15];case 13:return c=a.sent(),f={error:c},[3,15];case 14:try{r&&!r.done&&(h=e.return)&&h.call(e)}finally{if(f)throw f.error}return[7];case 15:return this._state=l.AttributesExtracted,this.callOnWrapped("$extracted"),[2]}}))}))},e.prototype.connectAttributes=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o,i,u,c,f,h,y,d;return a(this,(function(a){switch(a.label){case 0:return[4,this.getTagsToBuild()];case 1:t=a.sent(),a.label=2;case 2:a.trys.push([2,13,14,15]),e=s(t),r=e.next(),a.label=3;case 3:if(r.done)return[3,12];(n=r.value).isInput&&n.addEventHandler("input",null,n.inputMutation,n),a.label=4;case 4:a.trys.push([4,9,10,11]),y=void 0,o=s(n.getAttributesWithState(p.AttributeState.Extracted)),i=o.next(),a.label=5;case 5:return i.done?[3,8]:[4,i.value.connect()];case 6:a.sent(),a.label=7;case 7:return i=o.next(),[3,5];case 8:return[3,11];case 9:return u=a.sent(),y={error:u},[3,11];case 10:try{i&&!i.done&&(d=o.return)&&d.call(o)}finally{if(y)throw y.error}return[7];case 11:return r=e.next(),[3,3];case 12:return[3,15];case 13:return c=a.sent(),f={error:c},[3,15];case 14:try{r&&!r.done&&(h=e.return)&&h.call(e)}finally{if(f)throw f.error}return[7];case 15:return this._state=l.AttributesConnected,this.callOnWrapped("$bound"),[2]}}))}))},e.prototype.inputMutation=function(t){var e,r;if(this.isSelect){for(var n=this.element.selectedOptions,o=[],i=0;i<n.length;i++)o.push(n[i].value);try{for(var a=s(Array.from(this.element.options)),u=a.next();!u.done;u=a.next()){var c=u.value;o.indexOf(c.value)>-1?c.setAttribute("selected",""):c.removeAttribute("selected")}}catch(t){e={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}this.value=o.join(",")}else this.value=t.target.value},e.prototype.finalize=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o,i,u,c,f,h,y,v;return a(this,(function(a){switch(a.label){case 0:return[4,this.getTagsToBuild()];case 1:t=a.sent(),a.label=2;case 2:a.trys.push([2,13,14,15]),e=s(t),r=e.next(),a.label=3;case 3:if(r.done)return[3,12];n=r.value,a.label=4;case 4:a.trys.push([4,9,10,11]),y=void 0,o=s(n.getAttributesWithState(p.AttributeState.Connected)),i=o.next(),a.label=5;case 5:return i.done?[3,8]:[4,i.value.finalize()];case 6:a.sent(),a.label=7;case 7:return i=o.next(),[3,5];case 8:return[3,11];case 9:return u=a.sent(),y={error:u},[3,11];case 10:try{i&&!i.done&&(v=o.return)&&v.call(o)}finally{if(y)throw y.error}return[7];case 11:return r=e.next(),[3,3];case 12:return[3,15];case 13:return c=a.sent(),f={error:c},[3,15];case 14:try{r&&!r.done&&(h=e.return)&&h.call(e)}finally{if(f)throw f.error}return[7];case 15:return this._state=l.Built,this.callOnWrapped("$built",this,this.scope,this.element),this.dispatch("$built",this),d.VisionHelper.nice(this.setupDeferredAttributes.bind(this)),[2]}}))}))},e.prototype.callOnWrapped=function(t){for(var e,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return!!(this._uniqueScope&&this.scope&&this.scope.wrapped&&this.scope.wrapped[t])&&((e=this.scope.wrapped)[t].apply(e,c([],u(r))),!0)},e.prototype.handleEvent=function(t,e){var r,n,o=this;if(e&&e.stopPropagation(),this.onEventHandlers[t]){this.scope.set("$event",e),this.scope.set("$value",this.value);var u=!1,c=function(t){if(!u&&t.modifiers.has("preventdefault")&&e.cancelable&&(e.preventDefault(),u=!0),t.modifiers.has("once")&&l.removeEventHandler(t.event,t.handler,t.context),t.modifiers.has("throttle")){var r=t.modifiers.get("throttle").getArguments(["1000"]),n=parseInt(r[0]),s=Math.floor(Date.now());if(t.state.lastCalled&&!(t.state.lastCalled+n<s))return"continue";t.state.lastCalled=s}if(t.modifiers.has("debounce")){clearTimeout(t.state.debounceTimeout);r=t.modifiers.get("debounce").getArguments(["1000"]);var c=parseInt(r[0]);t.state.debounceTimeout=setTimeout((function(){return i(o,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,t.handler.call(t.context,e)];case 1:return r.sent(),[2]}}))}))}),c)}else t.handler.call(t.context,e)},l=this;try{for(var f=s(this.onEventHandlers[t]),p=f.next();!p.done;p=f.next()){c(p.value)}}catch(t){r={error:t}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}}},e.prototype.hasModifier=function(t,e){return this.attributes,t.indexOf("|"+e)>-1},e.prototype.stripModifier=function(t,e){return t.replace("|"+e,"")},e.prototype.getElementPath=function(t){for(var e=[],r=t;r;){var n=r.tagName;r.hasAttribute("id")?n+="#"+r.getAttribute("id"):r.hasAttribute("class")&&(n+="."+r.getAttribute("class").split(" ").join(".")),e.push(n),r=r.parentElement}return e.reverse().join(">")},e.prototype.addEventHandler=function(t,e,r,n){void 0===n&&(n=null);var o=null;if((e=e||new O.Modifiers).has("active")?o=!1:e.has("passive")&&(o=!0),!this.onEventHandlers[t]){this.onEventHandlers[t]=[];var i=b.On.WindowEvents.indexOf(t)>-1&&window?window:this.element,a={};(t.indexOf("touch")>-1||null!==o)&&(a.passive=null===o||o),i.addEventListener(t,this.handleEvent.bind(this,t),a)}this.onEventHandlers[t].push({handler:r,event:t,context:n,modifiers:e,state:{}})},e.prototype.removeEventHandler=function(t,e,r){if(void 0===r&&(r=null),this.onEventHandlers[t]){var n=this.onEventHandlers[t].find((function(t){return t.handler===e&&t.context===r}));n&&(this.onEventHandlers[t].splice(this.onEventHandlers[t].indexOf(n),1),0===this.onEventHandlers[t].length&&this.element.removeEventListener(t,this.handleEvent.bind(this,t)))}},e.prototype.removeAllEventHandlers=function(){var t,e,r,n;try{for(var o=s(Object.keys(this.onEventHandlers)),i=o.next();!i.done;i=o.next()){var a=i.value;try{for(var u=(r=void 0,s(this.onEventHandlers[a])),c=u.next();!c.done;c=u.next()){var l=c.value;this.removeEventHandler(a,l.handler,l.context)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},e.prototype.removeContextEventHandlers=function(t){var e,r,n,o;try{for(var i=s(Object.keys(this.onEventHandlers)),a=i.next();!a.done;a=i.next()){var u=a.value;try{for(var c=(n=void 0,s(this.onEventHandlers[u])),l=c.next();!l.done;l=c.next()){var f=l.value;f.context===t&&this.removeEventHandler(u,f.handler,t)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},e.prototype.createScope=function(t){return void 0===t&&(t=!1),this._scope||!t&&!this.uniqueScope||(this._uniqueScope=!0,this._scope=new f.Scope,this.parentTag&&(this.scope.parentScope=this.parentTag.scope)),this._scope},e.prototype.watchAttribute=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return this.attributes.has(t)&&this.attributes.get(t)instanceof v.StandardAttribute?[2,this.attributes.get(t)]:(this.createScope(!0),e=new v.StandardAttribute(this,t),this.attributes.set(t,e),[4,this.setupAttribute(e)]);case 1:return r.sent(),[2,e]}}))}))},e.prototype.watchStyle=function(t){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return this.attributes.has("style")?[2,this.attributes.get("style")]:(this.createScope(!0),t=new m.StyleAttribute(this,"style"),this.attributes.set("style",t),[4,this.setupAttribute(t)]);case 1:return e.sent(),[2,t]}}))}))},e.prototype.setupAttribute=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.compile()];case 1:return e.sent(),[4,t.setup()];case 2:return e.sent(),[4,t.extract()];case 3:return e.sent(),[4,t.connect()];case 4:return e.sent(),[2]}}))}))},e.prototype.setupDeferredAttributes=function(){return i(this,void 0,void 0,(function(){var t,e,r,n,o,i;return a(this,(function(a){switch(a.label){case 0:a.trys.push([0,5,6,7]),t=s(this.deferredAttributes),e=t.next(),a.label=1;case 1:return e.done?[3,4]:(r=e.value,[4,this.setupAttribute(r)]);case 2:a.sent(),a.label=3;case 3:return e=t.next(),[3,1];case 4:return[3,7];case 5:return n=a.sent(),o={error:n},[3,7];case 6:try{e&&!e.done&&(i=t.return)&&i.call(t)}finally{if(o)throw o.error}return[7];case 7:return this.deferredAttributes.length=0,[2]}}))}))},e.prototype.deconstruct=function(){this.removeAllEventHandlers(),this.attributes.forEach((function(t){return t.deconstruct()})),this.attributes.clear(),this._children.forEach((function(t){return t.deconstruct()})),this._children.length=0,this._controller&&(this._controller.deconstruct(),this._controller=null),this.element&&(this.element[e.TaggedVariable]=null,this.element=null),t.prototype.deconstruct.call(this)},e.TaggedVariable="_vsn_tag",e.magicAttributes=["@text","@html","@class","@value","@disabled","@hidden","@selected","@readonly","@multiple","@required","@autofocus"],e.flagAttributes=["@disabled","@hidden","@checked","@selected","@readonly","@multiple","@required","@autofocus"],e}(g.DOMObject);e.Tag=x},6453:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.SlotTag=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(r(712).Tag);e.SlotTag=i},3423:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.SlottedTag=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.slotted=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return this.slotTag=t,this.slot=t.element,this.findParentTag(),[2]}))}))},e.prototype.findParentTag=function(){return this.parentTag=this.slotTag,this._parentTag},e}(r(712).Tag);e.SlottedTag=s},1341:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.TagList=void 0;var s=r(4264),u=function(t){function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var o=t.apply(this,a([],i(r)))||this;return Object.setPrototypeOf(o,e.prototype),o}return o(e,t),Object.defineProperty(e.prototype,"scope",{get:function(){return this[0].scope},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elements",{get:function(){return this.map((function(t){return t.element}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this[this.length-1]},enumerable:!1,configurable:!0}),e.prototype.all=function(t){var e=this.map((function(e){return e.promise(t)}));return Promise.all(e)},e.prototype.removeClass=function(t){return this.forEach((function(e){return e.element.classList.remove(t)})),this},e.prototype.addClass=function(t){return this.forEach((function(e){return e.element.classList.add(t)})),this},e.prototype.css=function(t,e){var r=t.replace(/(-[a-z])/,(function(t){return t.replace("-","").toUpperCase()}));return this.forEach((function(t){return t.element.style[r]=e})),this},e}(Array);e.TagList=u,s.VisionHelper.inDevelopment&&s.VisionHelper.window&&(window.TagList=u)},3398:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Types=void 0;var o=r(1371),i=function(){function t(){}return t.any=function(t){return t},t.string=function(t){return""+t},t.integer=function(t){return parseInt(t)},t.float=function(t){return t=(""+t).replace(/[^\d.]+/,""),parseFloat(t)},t.boolean=function(t){return-1===[0,"0",!1,"false",""].indexOf(t)},t.date=function(t){return new Date(Date.parse(t))},n([o.Registry.type("any")],t,"any",null),n([o.Registry.type("string")],t,"string",null),n([o.Registry.type("integer")],t,"integer",null),n([o.Registry.type("float")],t,"float",null),n([o.Registry.type("boolean")],t,"boolean",null),n([o.Registry.type("date")],t,"date",null),t}();e.Types=i},3463:function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Validators=void 0;var o=r(1371),i=function(){function t(){}return t.email=function(t){var e=[];return null==t||this._emailRegex.test(t)||e.push("Please enter a valid email address"),e},t.required=function(t){var e=[];return null!=t&&0!=t.length||e.push("This field is required"),e},t.positive=function(t){var e=[];return null!=t&&t<0&&e.push("Please enter a positive number"),e},t.negative=function(t){var e=[];return null!=t&&t>0&&e.push("Please enter a negative number"),e},t._emailRegex=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,n([o.Registry.validator("email")],t,"email",null),n([o.Registry.validator("required")],t,"required",null),n([o.Registry.validator("positive")],t,"positive",null),n([o.Registry.validator("negative")],t,"negative",null),t}();e.Validators=i},8041:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.AddClassIf=void 0;var u=r(523),c=r(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onChange=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent()?this.tag.element.classList.add(this.getAttributeBinding()):this.tag.element.classList.remove(this.getAttributeBinding()),[2]}}))}))},e=i([c.Registry.attribute("vsn-add-class-if")],e)}(u.If);e.AddClassIf=l},8171:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Bind=void 0;var u=r(5092),c=r(7754),l=r(1371),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.direction="both",e.formatter=function(t){return t},e}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,new c.Tree(this.getAttributeValue()).prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return e.sent(),[4,t.prototype.compile.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return this.property=this.getAttributeBinding(this.property),(e=this.getAttributeModifiers()).length&&(e.indexOf("from")>-1?this.direction="from":e.indexOf("to")>-1&&(this.direction="to")),[4,t.prototype.setup.call(this)];case 1:return r.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){var e,r,n,o;return s(this,(function(i){switch(i.label){case 0:e=this.getAttributeValue();try{r=this.tag.scope.getReference(e)}catch(t){return console.error("error",t),[2]}return n=this,[4,r.getKey()];case 1:return n.key=i.sent(),o=this,[4,r.getScope()];case 2:return o.boundScope=i.sent(),this.valueFromElement&&this.updateFrom(),this.doUpdateTo&&(this.updateTo(),this.boundScope.on("change:"+this.key,this.updateTo,this)),[4,t.prototype.connect.call(this)];case 3:return i.sent(),[2]}}))}))},e.prototype.evaluate=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.valueFromElement&&this.updateFrom(),this.updateTo(),[4,t.prototype.evaluate.call(this)];case 1:return e.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"value",{get:function(){return this.boundScope?this.boundScope.get(this.key,!1):null},set:function(t){this.boundScope&&this.boundScope.set(this.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueFromElement",{get:function(){return this.property?this.tag.getElementAttribute(this.property):this.tag.value},enumerable:!1,configurable:!0}),e.prototype.mutate=function(e){t.prototype.mutate.call(this,e),this.doUpdateFrom&&(!this.property&&["characterData","childList"].indexOf(e.type)>-1?this.updateFrom():this.property||"attributes"!=e.type||"value"!==e.attributeName?"attributes"===e.type&&e.attributeName==this.property&&this.updateFrom():this.updateFrom())},Object.defineProperty(e.prototype,"doUpdateFrom",{get:function(){return["both","to"].indexOf(this.direction)>-1},enumerable:!1,configurable:!0}),e.prototype.updateFrom=function(){if(this.doUpdateFrom){var t=this.valueFromElement;t="string"==typeof t&&t.trim()||t;var e=this.value;e="string"==typeof e&&e.trim()||e,(e=this.formatter(e))&&t==e||(this.value=t)}},Object.defineProperty(e.prototype,"doUpdateTo",{get:function(){return["both","from"].indexOf(this.direction)>-1},enumerable:!1,configurable:!0}),e.prototype.updateTo=function(){if(this.doUpdateTo){var t=this.formatter(this.value);this.property?this.tag.setElementAttribute(this.property,t):this.tag.value=t}},e.prototype.setFormatter=function(t){this.formatter=t},e.canDefer=!1,e=i([l.Registry.attribute("vsn-bind")],e)}(u.Attribute);e.Bind=f},5514:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentAttribute=void 0;var u=r(1371),c=r(4515),l=r(2918),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(i){switch(i.label){case 0:return e=this.getAttributeBinding(),u.Registry.instance.tags.has(e)?[3,4]:[4,t.prototype.extract.call(this)];case 1:return i.sent(),r=this.getAttributeValue(),n=void 0,r?[4,u.Registry.instance.components.get(r)]:[3,3];case 2:n=i.sent(),i.label=3;case 3:n||(n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(l.Component)),u.Registry.instance.tags.register(e,n),i.label=4;case 4:return[2]}}))}))},e.scoped=!0,e=i([u.Registry.attribute("vsn-component")],e)}(c.TemplateAttribute);e.ComponentAttribute=f},3650:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ControllerAttribute=void 0;var u=r(4843),c=r(5092),l=r(1371),f=r(126),p=r(218),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.registryName="controllers",e}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(o){switch(o.label){case 0:return this.attributeKey=this.getAttributeBinding(),this.className=this.getAttributeValue(this.defaultClassName),[4,l.Registry.instance[this.registryName].get(this.className)];case 1:return e=o.sent(),this.attributeKey?(r=void 0,e.instance instanceof e?(r=e.instance.scope,e.instance instanceof p.Service&&(this.tag.dom.root.scope.addChild(r),this.tag.dom.root.scope.set(this.attributeKey,r))):(r=new u.Scope(this.tag.scope),(n=new e)instanceof f.Controller&&n.init(this.tag.scope,this.tag,this.tag.element),r.wrap(n)),this.tag.scope.set(this.attributeKey,r)):this.instantiateClass(e),[4,t.prototype.setup.call(this)];case 2:return o.sent(),[2]}}))}))},e.prototype.instantiateClass=function(t){return this.tag.wrap(t),this.tag.scope},e.canDefer=!1,e.scoped=!0,e=i([l.Registry.attribute("vsn-controller")],e)}(c.Attribute);e.ControllerAttribute=h},4893:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.DisableIf=void 0;var u=r(523),c=r(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onChange=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent()?this.tag.element.setAttribute("disabled","disabled"):this.tag.element.removeAttribute("disabled"),[2]}}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-disable-if")],e)}(u.If);e.DisableIf=l},6813:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Exec=void 0;var u=r(5092),c=r(7754),l=r(1371),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"code",{get:function(){return this.getAttributeValue()},enumerable:!1,configurable:!0}),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tree=new c.Tree(this.code),[4,this.tree.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return e.sent(),[4,t.prototype.compile.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e=this;return s(this,(function(r){switch(r.label){case 0:return this.hasModifier("defer")?(this.tag.dom.once("built",(function(){return e.execute()})),[3,3]):[3,1];case 1:return[4,this.execute()];case 2:r.sent(),r.label=3;case 3:return[4,t.prototype.extract.call(this)];case 4:return r.sent(),[2]}}))}))},e.prototype.execute=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent(),[2]}}))}))},e.canDefer=!1,e=i([l.Registry.attribute("vsn-exec")],e)}(u.Attribute);e.Exec=f},8289:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Format=void 0;var u=r(5092),c=r(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,r,n,o;return s(this,(function(i){switch(i.label){case 0:return e=this.getAttributeValue(null),r=this.getAttributeBinding(null),[4,c.Registry.instance.formats.get(e)];case 1:return n=i.sent(),o=r?"vsn-bind:"+r:"vsn-bind",[4,this.tag.getAttribute(o)];case 2:return i.sent().setFormatter(n),[4,t.prototype.extract.call(this)];case 3:return i.sent(),[2]}}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-format")],e)}(u.Attribute);e.Format=l},523:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.If=void 0;var u=r(5092),c=r(7754),l=r(1371),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e=this.getAttributeValue(),this.tree=new c.Tree(e),[4,this.tree.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return r.sent(),[4,t.prototype.compile.call(this)];case 2:return r.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.evaluate()];case 1:return e.sent(),[4,t.prototype.extract.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.tree.bindToScopeChanges(this.tag.scope,this.onChange.bind(this),this.tag.dom,this.tag)];case 1:return e.sent(),[4,t.prototype.connect.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.evaluate=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.onChange()];case 1:return e.sent(),[4,t.prototype.evaluate.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.onChange=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent()?this.tag.show():this.tag.hide(),[2]}}))}))},e.canDefer=!1,e=i([l.Registry.attribute("vsn-if")],e)}(u.Attribute);e.If=f},9979:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.JSONAttribute=void 0;var u=r(1371),c=r(5092),l=r(4843),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,r,n,o,i,a,u;return s(this,(function(s){switch(s.label){case 0:e=this.getAttributeBinding();try{r=this.tag.scope.getReference(e)}catch(t){return console.error("error",t),[2]}return[4,r.getKey()];case 1:return n=s.sent(),[4,r.getScope()];case 2:return o=s.sent(),i="script"===this.tag.element.tagName.toLowerCase()?this.tag.element.innerText:unescape(this.getAttributeValue()),(a=JSON.parse(i))&&"object"==typeof a&&a.constructor===Object?((u=new l.Scope(o)).wrap(a),o.set(n,u)):o.set(n,a),[4,t.prototype.extract.call(this)];case 3:return s.sent(),[2]}}))}))},e.canDefer=!1,e=i([u.Registry.attribute("vsn-json")],e)}(c.Attribute);e.JSONAttribute=f},9215:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyAbstract=void 0;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.specificKey=null,e}return o(e,t),e.prototype.compile=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.specificKey=this.getAttributeBinding(),[4,t.prototype.compile.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.tag.addEventHandler("keydown",this.modifiers,this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.handleEvent=function(e){return i(this,void 0,void 0,(function(){var r;return a(this,(function(n){switch(n.label){case 0:return r=!1,-1===[void 0,null,""].indexOf(this.specificKey)&&e.key.toLowerCase()!==this.specificKey&&e.code.toLowerCase()!==this.specificKey||(r=!0),r?[4,t.prototype.handleEvent.call(this,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e}(r(8447).On);e.KeyAbstract=s},9459:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyDown=void 0;var u=r(9215),c=r(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tag.addEventHandler("keydown",this.modifiers,this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e=i([c.Registry.attribute("vsn-key-down")],e)}(u.KeyAbstract);e.KeyDown=l},7459:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyUp=void 0;var u=r(9215),c=r(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tag.addEventHandler("keyup",this.modifiers,this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e=i([c.Registry.attribute("vsn-key-up")],e)}(u.KeyAbstract);e.KeyUp=l},1898:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.LazyAttribute=void 0;var u=r(1371),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loaded=!1,e}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,t.prototype.setup.call(this)];case 1:return e.sent(),this.eleTop=this.tag.element.getBoundingClientRect().top,[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.modifiers.has("active")||this.modifiers.add("passive"),this.tag.addEventHandler("scroll",this.modifiers,this.handleEvent,this),[4,this.handleEvent()];case 1:return t.sent(),[2]}}))}))},e.prototype.handleEvent=function(e){return a(this,void 0,void 0,(function(){return s(this,(function(r){switch(r.label){case 0:return!this.loaded&&window.scrollY+window.outerHeight>=this.eleTop?(this.loaded=!0,[4,t.prototype.handleEvent.call(this,e)]):[3,2];case 1:r.sent(),this.tag.removeEventHandler("scroll",this.handleEvent,this),r.label=2;case 2:return[2]}}))}))},e=i([u.Registry.attribute("vsn-lazy")],e)}(r(8447).On);e.LazyAttribute=c},2496:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.List=void 0;var c=r(5092),l=r(712),f=r(8572),p=r(2712),h=r(1371),y=r(9033),d=r(4843),v=r(1525),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var r;return o(e,t),r=e,e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(o){switch(o.label){case 0:return this.tag.element.children.length>0?(e=this.tag.element.children[0],[4,this.tag.dom.getTagForElement(e)]):[3,2];case 1:return r=o.sent(),e&&(e.hasAttribute("vsn-template")?(r.parentTag=this.tag,e.removeAttribute("vsn-template"),this.tag.element.removeChild(e),this.template=e):this.template=e.cloneNode(!0)),[3,4];case 2:return this.tag.hasRawAttribute("template")?[4,y.DOM.instance.exec(this.tag.getRawAttributeValue("template"))]:[3,4];case 3:(n=o.sent())instanceof Array&&1===n.length&&(n=n[0]),this.template=n.element.content.cloneNode(!0),o.label=4;case 4:return[4,t.prototype.setup.call(this)];case 5:return o.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,r,n,o,i,a,u,c=this;return s(this,(function(s){switch(s.label){case 0:return e=this.getAttributeBinding("items"),[4,(r=this.tag.scope.getReference(e)).getScope()];case 1:return n=s.sent(),[4,r.getKey()];case 2:return o=s.sent(),i=n.get(o),[4,this.addExistingItems(i)];case 3:if(s.sent(),n.on("change:"+o,(function(t){(null==t?void 0:t.oldValue)&&(t.oldValue instanceof f.WrappedArray&&(t.oldValue.map((function(t){c.remove(t)})),t.oldValue.offWithContext("add",c),t.oldValue.offWithContext("remove",c)),c.addExistingItems(t.value))})),!this.tag.hasRawAttribute("initial-items"))return[3,7];a=parseInt(this.tag.getRawAttributeValue("initial-items")),u=0,s.label=4;case 4:return u<a?[4,this.add({})]:[3,7];case 5:s.sent(),s.label=6;case 6:return u++,[3,4];case 7:return[4,t.prototype.extract.call(this)];case 8:return s.sent(),[2]}}))}))},e.prototype.addExistingItems=function(t){var e;return a(this,void 0,void 0,(function(){var r,n,o,i,a,c,l,h,y,d,v,b,_,g,w,m,O,x;return s(this,(function(s){switch(s.label){case 0:if(this.items=t||new f.WrappedArray,(null===(e=this.tags)||void 0===e?void 0:e.length)>0)try{for(r=u(this.tags),n=r.next();!n.done;n=r.next())(d=n.value).deconstruct(),d.removeFromDOM()}catch(t){_={error:t}}finally{try{n&&!n.done&&(g=r.return)&&g.call(r)}finally{if(_)throw _.error}}if(this.tags=this.tags||[],this.tags.length=0,!t)return[3,8];s.label=1;case 1:s.trys.push([1,6,7,8]),o=u(t),i=o.next(),s.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.add(a)]);case 3:s.sent(),s.label=4;case 4:return i=o.next(),[3,2];case 5:return[3,8];case 6:return c=s.sent(),w={error:c},[3,8];case 7:try{i&&!i.done&&(m=o.return)&&m.call(o)}finally{if(w)throw w.error}return[7];case 8:s.trys.push([8,13,14,15]),l=u(Array.from(this.tag.element.querySelectorAll("*"))),h=l.next(),s.label=9;case 9:return h.done?[3,12]:(y=h.value,p.ElementHelper.hasVisionAttribute(y,"vsn-list-item")?[4,this.tag.dom.getTagForElement(y)]:[3,11]);case 10:(d=s.sent())&&(this.tags.push(d),v=d.scope.get(this.listItemName),this.items.push((null==v?void 0:v.wrapped)||v||d.scope.wrapped||d.scope)),s.label=11;case 11:return h=l.next(),[3,9];case 12:return[3,15];case 13:return b=s.sent(),O={error:b},[3,15];case 14:try{h&&!h.done&&(x=l.return)&&x.call(l)}finally{if(O)throw O.error}return[7];case 15:return this.items instanceof f.WrappedArray||(this.items=new f.WrappedArray(this.items)),this.items.on("add",this.add,this),this.items.on("remove",this.remove,this),this.tag.scope.set("add",this.add.bind(this)),this.tag.scope.set("remove",this.remove.bind(this)),[2]}}))}))},Object.defineProperty(e.prototype,"listItemName",{get:function(){return this.tag.getRawAttributeValue("list-item-name","item")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"listItemModel",{get:function(){return this.tag.getRawAttributeValue("list-item-model")},enumerable:!1,configurable:!0}),e.prototype.remove=function(t){for(var e=0;e<this.tags.length;e++){var r=this.tags[e],n=r.scope.get(this.listItemName);if([n,n.data,n.wrapped].indexOf(t)>-1)return r.deconstruct(),r.removeFromDOM(),void this.tags.splice(e,1)}},e.prototype.add=function(t){return a(this,void 0,void 0,(function(){var e,r,n,o,i;return s(this,(function(a){switch(a.label){case 0:return e=this.template.cloneNode(!0),delete(r=e instanceof DocumentFragment?e.children[0]:e)[l.Tag.TaggedVariable],n=t instanceof v.ScopeData?t.getData():Object.assign({},t),[4,this.tag.dom.buildTag(r,!0)];case 1:return o=a.sent(),[4,this.setupTagScope(o,t)];case 2:return a.sent(),this.tag.element.appendChild(r),[4,this.tag.dom.setupTags([o])];case 3:return a.sent(),[4,this.tag.dom.buildFrom(this.tag.element)];case 4:return a.sent(),(i=o.scope.get(this.listItemName))instanceof d.Scope&&n&&i.data.setData(n),this.tags.push(o),this.tag.dispatch("add",t),[2]}}))}))},e.prototype.setupTagScope=function(t,e){return a(this,void 0,void 0,(function(){var n,o,i,a=this;return s(this,(function(s){switch(s.label){case 0:return t.meta[r.MetaItemSetupFlag]?[2]:(t.createScope(!0),n=new d.Scope(t.scope),(o=this.listItemModel)?[4,h.Registry.instance.models.get(o)]:[3,2]);case 1:i=s.sent(),s.label=2;case 2:return i&&(e&&e instanceof i||(e=new i(e),this.tag.once("$built",(function(){e.$built&&e.$built(a.tag,a.tag.scope,a.tag.element)})))),i&&(n.data instanceof i||n.wrapped instanceof i)||(n.wrapped&&n.unwrap(),n.wrap(e,!0,!0)),t.scope.set(this.listItemName,n),t.meta[r.MetaItemSetupFlag]=!0,[2]}}))}))},e.MetaItemSetupFlag="vsn-list-item-setup",e.canDefer=!1,e.scoped=!0,e=r=i([h.Registry.attribute("vsn-list")],e)}(c.Attribute);e.List=b},6846:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ListItem=void 0;var u=r(5092),c=r(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var r;return o(e,t),r=e,Object.defineProperty(e.prototype,"list",{get:function(){return this._list},enumerable:!1,configurable:!0}),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:if(this._list=this.tag.findAncestorByAttribute("vsn-list"),!this._list)throw Error(r.ERROR_NO_PARENT);return[4,this.getListAttribute()];case 1:return[4,e.sent().setupTagScope(this.tag,{})];case 2:return e.sent(),[4,t.prototype.setup.call(this)];case 3:return e.sent(),[2]}}))}))},e.prototype.getListAttribute=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this._list.getAttribute("vsn-list")];case 1:return[2,t.sent()]}}))}))},e.canDefer=!1,e.scoped=!0,e.ERROR_NO_PARENT="Cannot find list parent.",e=r=i([c.Registry.attribute("vsn-list-item")],e)}(u.Attribute);e.ListItem=l},274:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ListItemModel=void 0;var a=r(1371),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.canDefer=!1,e=i([a.Registry.attribute("vsn-list-item-model")],e)}(r(5092).Attribute);e.ListItemModel=s},3329:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ModelAttribute=void 0;var a=r(3650),s=r(1371),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.registryName="models",e}return o(e,t),e.canDefer=!1,e=i([s.Registry.attribute("vsn-model")],e)}(a.ControllerAttribute);e.ModelAttribute=u},1576:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Name=void 0;var u=r(5092),c=r(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){return(t=this.tag.scope.parentScope)&&t.set(this.getAttributeValue(),this.tag.scope),[2]}))}))},e.canDefer=!1,e.scoped=!0,e=i([c.Registry.attribute("vsn-name")],e)}(u.Attribute);e.Name=l},8447:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.On=void 0;var u=r(5092),c=r(7754),l=r(1371),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getTree=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return this.handler?[3,2]:(t=this.getAttributeValue(),this.handler=new c.Tree(t),[4,this.handler.prepare(this.tag.scope,this.tag.dom,this.tag)]);case 1:e.sent(),e.label=2;case 2:return[2,this.handler]}}))}))},e.prototype.handleEvent=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.getTree()];case 1:return[4,t.sent().evaluate(this.tag.scope,this.tag.dom,this.tag)];case 2:return t.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tag.addEventHandler(this.getAttributeBinding(),this.modifiers,this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.WindowEvents=["abort","afterprint","beforeprint","error","hashchange","load","popstate","resize","scroll","unload"],e=i([l.Registry.attribute("vsn-on")],e)}(u.Attribute);e.On=f},1895:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},l=this&&this.__spreadArray||function(t,e){for(var r=0,n=e.length,o=t.length;r<n;r++,o++)t[o]=e[r];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.PersistAttribute=void 0;var f=r(1371),p=r(5092),h=r(712),y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.valueKeys=[],e}var r;return o(e,t),r=e,e.prototype.extract=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.valueKeys=this.getAttributeValue().split(" ").map((function(t){return t.trim()})).filter((function(t){return t.length>0})),[4,t.prototype.extract.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){var e,n,o,i,a,f,p,h,y,d,v=this;return s(this,(function(s){switch(s.label){case 0:if(!(e=this.tag.element.id))throw new Error("vsn-persist requires an id attribute on the element");n=r.getPersistedValueStore(e);try{for(o=u(this.valueKeys),i=o.next();!i.done;i=o.next())a=i.value,n.has(a)&&("@class"===a?(f=n.get(a),(y=this.tag.element.classList).remove.apply(y,l([],c(Array.from(this.tag.element.classList)))),(d=this.tag.element.classList).add.apply(d,l([],c(f)))):a.startsWith("@")&&(this.tag.element.setAttribute(a.substring(1),n.get(a)),this.tag.isInput&&this.tag.once("$built",(function(){v.tag.element.dispatchEvent(new Event("input"))}))))}catch(t){p={error:t}}finally{try{i&&!i.done&&(h=o.return)&&h.call(o)}finally{if(p)throw p.error}}return[4,t.prototype.connect.call(this)];case 1:return s.sent(),[2]}}))}))},e.prototype.mutate=function(t){this.tag.state===h.TagState.Built&&this.updateFrom()},e.prototype.updateFrom=function(){var t,e,n=this.tag.element.id,o=r.getPersistedValueStore(n);try{for(var i=u(this.valueKeys),a=i.next();!a.done;a=i.next()){var s=a.value;if("@class"===s){var c=Array.from(this.tag.element.classList);o.set(s,c)}else s.startsWith("@")&&(o.set(s,this.tag.element.getAttribute(s.substring(1))),this.tag.isInput&&this.tag.dispatch("input"))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.getPersistedValueStore=function(t){return r.persistedValues.has(t)||r.persistedValues.set(t,new Map),r.persistedValues.get(t)},e.persistedValues=new Map,e.canDefer=!0,e=r=i([f.Registry.attribute("vsn-persist")],e)}(p.Attribute);e.PersistAttribute=y},6338:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Referenced=void 0;var a=r(1371),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e=i([a.Registry.attribute("vsn-ref")],e)}(r(5092).Attribute);e.Referenced=s},6957:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.RootAttribute=void 0;var c=r(5092),l=r(4264),f=r(1371),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,r,n,o,i,a;return s(this,(function(s){switch(s.label){case 0:this.tag.scope.set("$mobile",l.VisionHelper.isMobile());try{for(e=u(f.Registry.instance.functions.keys),r=e.next();!r.done;r=e.next())n=r.value,o=f.Registry.instance.functions.get(n),this.tag.scope.set(n,o)}catch(t){i={error:t}}finally{try{r&&!r.done&&(a=e.return)&&a.call(e)}finally{if(i)throw i.error}}return f.Registry.instance.functions.on("register",this.registerFunction,this),[4,t.prototype.setup.call(this)];case 1:return s.sent(),[2]}}))}))},e.prototype.registerFunction=function(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(r){return this.tag.scope.set(t,e),[2]}))}))},e.canDefer=!1,e.scoped=!0,e=i([f.Registry.attribute("vsn-root")],e)}(c.Attribute);e.RootAttribute=p},5930:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeAttribute=void 0;var c=r(5092),l=r(1371),f=r(7754),p=r(4843),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return(e=this.getAttributeValue())?(this.tree=new f.Tree(e),[4,this.tree.prepare(this.tag.scope,this.tag.dom,this.tag)]):[3,2];case 1:r.sent(),r.label=2;case 2:return[4,t.prototype.compile.call(this)];case 3:return r.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,r,n,o,i,a,c;return s(this,(function(s){switch(s.label){case 0:return this.tree?(e=this.getAttributeBinding(),[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)]):[3,2];case 1:if(!((r=s.sent())instanceof p.Scope))throw new Error("vsn-scope value must be an object, got "+typeof r);if(e)this.tag.scope.set(e,r);else try{for(n=u(r.data.keys),o=n.next();!o.done;o=n.next())i=o.value,this.tag.scope.set(i,r.data[i])}catch(t){a={error:t}}finally{try{o&&!o.done&&(c=n.return)&&c.call(n)}finally{if(a)throw a.error}}s.label=2;case 2:return[4,t.prototype.extract.call(this)];case 3:return s.sent(),[2]}}))}))},e.canDefer=!1,e.scoped=!0,e=i([l.Registry.attribute("vsn-scope")],e)}(c.Attribute);e.ScopeAttribute=h},1085:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeChange=void 0;var u=r(5092),c=r(7754),l=r(1371),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(r){switch(r.label){case 0:return e=this.getAttributeValue(),this.handler=new c.Tree(e),[4,this.handler.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return r.sent(),[4,t.prototype.compile.call(this)];case 2:return r.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){var e,r,n,o,i;return s(this,(function(a){switch(a.label){case 0:return e=this.getAttributeBinding(),[4,(r=this.tag.scope.getReference(e,!1)).getScope()];case 1:return o=(n=a.sent()).on,i="change:",[4,r.getKey()];case 2:return o.apply(n,[i+a.sent(),this.handleEvent.bind(this)]),[4,t.prototype.connect.call(this)];case 3:return a.sent(),[2]}}))}))},e.prototype.handleEvent=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.handler.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent(),[2]}}))}))},e.canDefer=!1,e=i([l.Registry.attribute("vsn-scope-change")],e)}(u.Attribute);e.ScopeChange=f},8616:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ScriptAttribute=void 0;var a=r(1371),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"code",{get:function(){return this.tag.element.innerText},enumerable:!1,configurable:!0}),e=i([a.Registry.attribute("vsn-script")],e)}(r(6813).Exec);e.ScriptAttribute=s},199:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceAttribute=void 0;var a=r(3650),s=r(1371),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.registryName="services",e.assignToParent=!1,e}return o(e,t),e.prototype.instantiateClass=function(t){return t.instance.scope},e.canDefer=!1,e=i([s.Registry.attribute("vsn-service")],e)}(a.ControllerAttribute);e.ServiceAttribute=u},3070:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.SetAttribute=void 0;var c=r(5092),l=r(1371),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.boundScope?this.boundScope.get(this.key,!1):null},set:function(t){this.boundScope&&this.boundScope.set(this.key,t)},enumerable:!1,configurable:!0}),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var t,e,r,n,o,i,a,c,f;return s(this,(function(s){switch(s.label){case 0:this.property=this.getAttributeBinding();try{t=this.tag.scope.getReference(this.property)}catch(t){return[2]}return e=this,[4,t.getKey()];case 1:return e.key=s.sent(),r=this,[4,t.getScope()];case 2:r.boundScope=s.sent(),n=this.getAttributeValue(null);try{for(o=u(this.getAttributeModifiers()),i=o.next();!i.done;i=o.next())if(a=i.value,l.Registry.instance.types.getSynchronous(a)){this.boundScope.setType(this.key,a);break}}catch(t){c={error:t}}finally{try{i&&!i.done&&(f=o.return)&&f.call(o)}finally{if(c)throw c.error}}return this.boundScope.set(this.key,n),[2]}}))}))},e.canDefer=!1,e=i([l.Registry.attribute("vsn-set")],e)}(c.Attribute);e.SetAttribute=f},6032:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.StandardAttribute=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.tag.isMagicAttribute(this.key)||this.tag.element.hasAttribute(this.attributeName)||this.tag.element.setAttribute(this.attributeName,""),[4,t.prototype.setup.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.extract=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.updateFrom(),[4,t.prototype.extract.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.tag.scope.on("change:"+this.key,this.updateTo.bind(this)),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.mutate=function(e){t.prototype.mutate.call(this,e),this.updateFrom()},Object.defineProperty(e.prototype,"needsToBeSynced",{get:function(){var t=this.tag.scope.get(this.key)||"",e=this.value;return t&&t.trim&&(t=t.trim()),e&&e.trim&&(e=e.trim()),t instanceof Array?!(e instanceof Array&&t.length===e.length)||t.map((function(t){return e.indexOf(t)>-1})).indexOf(!1)>-1:t!==e},enumerable:!1,configurable:!0}),e.prototype.updateTo=function(){this.needsToBeSynced&&(this.value=this.tag.scope.get(this.key))},e.prototype.updateFrom=function(){this.needsToBeSynced&&this.tag.scope.set(this.key,this.value)},Object.defineProperty(e.prototype,"key",{get:function(){return"@"+this.attributeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.tag.getElementAttribute(this.tag.isMagicAttribute(this.key)?this.key:this.attributeName)},set:function(t){this.tag.setElementAttribute(this.tag.isMagicAttribute(this.key)?this.key:this.attributeName,t)},enumerable:!1,configurable:!0}),e.canDefer=!1,e}(r(5092).Attribute);e.StandardAttribute=s},1857:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.StyleAttribute=void 0;var c=r(1371),l=r(5092),f=r(4843),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,r,n;return s(this,(function(o){switch(o.label){case 0:return(e=this.getAttributeValue()||null)?(this.scopeRef=this.tag.scope.getReference(e,!0),[4,this.scopeRef.getScope()]):[3,3];case 1:return r=o.sent(),[4,this.scopeRef.getKey()];case 2:return n=o.sent(),this.styleScope=r.get(n),this.styleScope||(this.styleScope=new f.Scope(r),r.set(n,this.styleScope)),[3,4];case 3:this.styleScope=this.tag.scope,o.label=4;case 4:return[4,t.prototype.setup.call(this)];case 5:return o.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.styleScope.on("change",this.handleEvent.bind(this)),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.updateFrom(),this.updateTo(),[4,t.prototype.extract.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.updateFrom=function(){var t=["cssText","getPropertyPriority","getPropertyValue","removeProperty","setProperty","length"];for(var e in this.tag.style)if(!(t.indexOf(e)>-1||isFinite(e))){var r=this.tag.style[e],n="$"+e;r&&r!==this.styleScope.get(n)&&this.styleScope.set(n,r)}},e.prototype.updateTo=function(){var t,e;try{for(var r=u(this.styleScope.keys),n=r.next();!n.done;n=r.next()){var o=n.value,i=this.styleScope.get(o);if(o.startsWith("$")){var a=o.substr(1);this.tag.element.style[a]=i.value}}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},e.prototype.mutate=function(e){t.prototype.mutate.call(this,e),this.updateFrom()},e.prototype.handleEvent=function(t,e){return a(this,void 0,void 0,(function(){var r;return s(this,(function(n){return t.startsWith("$")&&(r=t.substr(1),e.value!==e.previousValue&&(this.tag.element.style[r]=e.value)),[2]}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-styles")],e)}(l.Attribute);e.StyleAttribute=p},369:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.StyleVarAttribute=void 0;var u=r(1371),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.connect=function(){return a(this,void 0,void 0,(function(){var e,r,n,o;return s(this,(function(i){switch(i.label){case 0:e=this.getAttributeValue();try{r=this.tag.scope.getReference(e)}catch(t){return console.error("error",t),[2]}return n=this,[4,r.getKey()];case 1:return n.key=i.sent(),this.styleVar=this.getAttributeBinding(),o=this,[4,r.getScope()];case 2:return o.boundScope=i.sent(),this.boundScope.on("change:"+this.key,this.update,this),[4,t.prototype.connect.call(this)];case 3:return i.sent(),[2]}}))}))},e.prototype.update=function(t){this.tag.element.style.setProperty("--"+this.styleVar,t.value)},e.canDefer=!1,e=i([u.Registry.attribute("vsn-style-var")],e)}(r(5092).Attribute);e.StyleVarAttribute=c},4515:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TemplateAttribute=void 0;var u=r(1371),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return u.Registry.instance.templates.register(this.getAttributeBinding(),this.tag.element),[4,t.prototype.extract.call(this)];case 1:return e.sent(),[2]}}))}))},e.canDefer=!1,e=i([u.Registry.attribute("vsn-template")],e)}(r(5092).Attribute);e.TemplateAttribute=c},8696:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypeAttribute=void 0;var u=r(5092),c=r(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,r,n,o,i;return s(this,(function(a){switch(a.label){case 0:e=this.getAttributeBinding(),r=this.getAttributeValue();try{n=this.tag.scope.getReference(e)}catch(t){return console.error("error",t),[2]}return[4,n.getScope()];case 1:return i=(o=a.sent()).setType,[4,n.getKey()];case 2:return i.apply(o,[a.sent(),r]),[4,t.prototype.extract.call(this)];case 3:return a.sent(),[2]}}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-type")],e)}(u.Attribute);e.TypeAttribute=l},2103:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},u=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.XHRAttribute=void 0;var c=r(1371),l=r(5092),f=r(7754),p=r(4264),h=r(4296),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"code",{get:function(){return this.getAttributeValue()},enumerable:!1,configurable:!0}),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tree=new f.Tree(this.code),[4,this.tree.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return e.sent(),[4,t.prototype.compile.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.isForm?this.tag.addEventHandler("submit",this.modifiers,this.handleEvent,this):this.isAnchor&&this.tag.addEventHandler("click",this.modifiers,this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"isForm",{get:function(){return"FORM"===this.tag.element.tagName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAnchor",{get:function(){return"A"===this.tag.element.tagName},enumerable:!1,configurable:!0}),e.prototype.handleEvent=function(t){return a(this,void 0,void 0,(function(){var e,r,n,o,i,a,c,l,f,y,d,v;return s(this,(function(s){if(t.preventDefault(),this.request)return[2];if(this.request=new XMLHttpRequest,this.isForm){if(r=this.tag.element.getAttribute("action"),e=(e=this.getAttributeBinding(this.tag.element.getAttribute("method"))).toUpperCase(),n=new FormData(this.tag.element),"GET"==e){o={},i=Array.from(n.keys());try{for(a=u(i),c=a.next();!c.done;c=a.next())y=c.value,o[y]=n.get(y)}catch(t){d={error:t}}finally{try{c&&!c.done&&(v=a.return)&&v.call(a)}finally{if(d)throw d.error}}r=p.VisionHelper.getUriWithParams(r,o),n=null}}else this.isAnchor&&(r=this.tag.element.getAttribute("href"),e=(e=this.getAttributeBinding("GET")).toUpperCase(),["POST","PUT"].indexOf(e)>-1&&(n=new FormData));for(y in this.request.addEventListener("loadend",this.handleXHREvent.bind(this)),this.request.addEventListener("error",this.handleXHREvent.bind(this)),this.request.open(e,r),this.request.setRequestHeader("X-Requested-With","XMLHttpRequest"),l=h.XHR.instance.getHeaders())this.request.setRequestHeader(y,l[y]);if(n instanceof FormData&&(f=h.XHR.instance.getFormData()))for(y in f)n.append(y,f[y]);return this.request.send(n),[2]}))}))},e.prototype.handleXHREvent=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.tag.scope.set("status",this.request.status),this.tag.scope.set("response",this.request.response),this.request.status>=200&&this.request.status<300?[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)]:[3,2];case 1:return t.sent(),this.tag.element.dispatchEvent(new Event("xhr-success")),[3,3];case 2:this.request.status>=300&&this.request.status<400?this.tag.element.dispatchEvent(new Event("xhr-redirect")):this.request.status>=400&&this.request.status<500?(this.tag.element.dispatchEvent(new Event("xhr-client-error")),this.tag.element.dispatchEvent(new Event("xhr-error"))):(this.tag.element.dispatchEvent(new Event("xhr-server-error")),this.tag.element.dispatchEvent(new Event("xhr-error"))),t.label=3;case 3:return this.request=null,[2]}}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-xhr")],e)}(l.Attribute);e.XHRAttribute=y},2132:(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XHRAttribute=e.TypeAttribute=e.TemplateAttribute=e.StyleVarAttribute=e.StyleAttribute=e.StandardAttribute=e.SetAttribute=e.ServiceAttribute=e.ScriptAttribute=e.ScopeChange=e.ScopeAttribute=e.RootAttribute=e.Referenced=e.PersistAttribute=e.On=e.Name=e.ModelAttribute=e.ListItemModel=e.ListItem=e.List=e.LazyAttribute=e.KeyUp=e.KeyDown=e.JSONAttribute=e.If=e.Format=e.Exec=e.DisableIf=e.ControllerAttribute=e.ComponentAttribute=e.Bind=e.AddClassIf=void 0;var n=r(8041);Object.defineProperty(e,"AddClassIf",{enumerable:!0,get:function(){return n.AddClassIf}});var o=r(8171);Object.defineProperty(e,"Bind",{enumerable:!0,get:function(){return o.Bind}});var i=r(5514);Object.defineProperty(e,"ComponentAttribute",{enumerable:!0,get:function(){return i.ComponentAttribute}});var a=r(3650);Object.defineProperty(e,"ControllerAttribute",{enumerable:!0,get:function(){return a.ControllerAttribute}});var s=r(4893);Object.defineProperty(e,"DisableIf",{enumerable:!0,get:function(){return s.DisableIf}});var u=r(6813);Object.defineProperty(e,"Exec",{enumerable:!0,get:function(){return u.Exec}});var c=r(8289);Object.defineProperty(e,"Format",{enumerable:!0,get:function(){return c.Format}});var l=r(523);Object.defineProperty(e,"If",{enumerable:!0,get:function(){return l.If}});var f=r(9979);Object.defineProperty(e,"JSONAttribute",{enumerable:!0,get:function(){return f.JSONAttribute}});var p=r(9459);Object.defineProperty(e,"KeyDown",{enumerable:!0,get:function(){return p.KeyDown}});var h=r(7459);Object.defineProperty(e,"KeyUp",{enumerable:!0,get:function(){return h.KeyUp}});var y=r(1898);Object.defineProperty(e,"LazyAttribute",{enumerable:!0,get:function(){return y.LazyAttribute}});var d=r(2496);Object.defineProperty(e,"List",{enumerable:!0,get:function(){return d.List}});var v=r(6846);Object.defineProperty(e,"ListItem",{enumerable:!0,get:function(){return v.ListItem}});var b=r(274);Object.defineProperty(e,"ListItemModel",{enumerable:!0,get:function(){return b.ListItemModel}});var _=r(3329);Object.defineProperty(e,"ModelAttribute",{enumerable:!0,get:function(){return _.ModelAttribute}});var g=r(1576);Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return g.Name}});var w=r(8447);Object.defineProperty(e,"On",{enumerable:!0,get:function(){return w.On}});var m=r(1895);Object.defineProperty(e,"PersistAttribute",{enumerable:!0,get:function(){return m.PersistAttribute}});var O=r(6338);Object.defineProperty(e,"Referenced",{enumerable:!0,get:function(){return O.Referenced}});var x=r(6957);Object.defineProperty(e,"RootAttribute",{enumerable:!0,get:function(){return x.RootAttribute}});var S=r(5930);Object.defineProperty(e,"ScopeAttribute",{enumerable:!0,get:function(){return S.ScopeAttribute}});var T=r(1085);Object.defineProperty(e,"ScopeChange",{enumerable:!0,get:function(){return T.ScopeChange}});var A=r(8616);Object.defineProperty(e,"ScriptAttribute",{enumerable:!0,get:function(){return A.ScriptAttribute}});var E=r(199);Object.defineProperty(e,"ServiceAttribute",{enumerable:!0,get:function(){return E.ServiceAttribute}});var P=r(3070);Object.defineProperty(e,"SetAttribute",{enumerable:!0,get:function(){return P.SetAttribute}});var j=r(6032);Object.defineProperty(e,"StandardAttribute",{enumerable:!0,get:function(){return j.StandardAttribute}});var k=r(1857);Object.defineProperty(e,"StyleAttribute",{enumerable:!0,get:function(){return k.StyleAttribute}});var N=r(369);Object.defineProperty(e,"StyleVarAttribute",{enumerable:!0,get:function(){return N.StyleVarAttribute}});var R=r(4515);Object.defineProperty(e,"TemplateAttribute",{enumerable:!0,get:function(){return R.TemplateAttribute}});var C=r(8696);Object.defineProperty(e,"TypeAttribute",{enumerable:!0,get:function(){return C.TypeAttribute}});var L=r(2103);Object.defineProperty(e,"XHRAttribute",{enumerable:!0,get:function(){return L.XHRAttribute}})},4296:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.XHR=void 0;var a=r(1371),s=r(218),u=r(9380),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.siteHeaders={},e.siteFormData={},e}return o(e,t),e.prototype.addHeader=function(t,e,r){void 0===r&&(r=null),null===r&&(r=window.location.hostname),this.siteHeaders[r]||(this.siteHeaders[r]={}),this.siteHeaders[r][t]=e},e.prototype.addFormData=function(t,e,r){void 0===r&&(r=null),null===r&&(r=window.location.hostname),this.siteFormData[r]||(this.siteFormData[r]={}),this.siteFormData[r][t]=e},e.prototype.getHeaders=function(t){return void 0===t&&(t=null),null===t&&(t=window.location.hostname),this.siteHeaders[t]},e.prototype.getFormData=function(t){return void 0===t&&(t=null),null===t&&(t=window.location.hostname),this.siteFormData[t]},i([u.property()],e.prototype,"siteHeaders",void 0),i([u.property()],e.prototype,"siteFormData",void 0),e=i([a.Registry.service("XHR")],e)}(s.Service);e.XHR=c},7389:()=>{!function(){if(void 0!==window.Reflect&&void 0!==window.customElements&&!window.customElements.polyfillWrapFlushCallback){var t=HTMLElement,e=function(){return Reflect.construct(t,[],this.constructor)};window.HTMLElement=e,HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}}()},6099:function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceDemo=void 0,o(r(3145),e);var i=r(3365);Object.defineProperty(e,"ServiceDemo",{enumerable:!0,get:function(){return i.ServiceDemo}})},3365:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__decorate||function(t,e,r,n){var o,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,r,a):o(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},a=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ServiceDemo=void 0;var u=r(3145),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.count=0,e}return o(e,t),e.prototype.add=function(t){return void 0===t&&(t=1),a(this,void 0,void 0,(function(){return s(this,(function(e){return[2,this.count+=t]}))}))},i([u.property(u.IntegerProperty)],e.prototype,"count",void 0),e=i([u.Registry.service("ServiceDemo")],e)}(u.Service);e.ServiceDemo=c},2712:function(t,e,r){"use strict";var n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ElementHelper=void 0;var o=r(2947),i=function(){function t(){}return t.hasVisionAttribute=function(t,e){var r,i;if(void 0===e&&(e="vsn-"),!t.attributes||t.attributes.length<=0)return!1;for(var a=0;a<t.attributes.length;a++){if(t.attributes[a].name.startsWith(e))return!0}try{for(var s=n(Array.from(t.classList)),u=s.next();!u.done;u=s.next()){var c=u.value;if(o.ClassNode.isClass(c))return!0}}catch(t){r={error:t}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return!1},t.normalizeElementID=function(t){return t?t.replace(/-([a-zA-Z0-9])/g,(function(t){return t[1].toUpperCase()})):null},t}();e.ElementHelper=i},4264:function(t,e){"use strict";var r=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.VisionHelper=void 0;var o=function(){function t(){}return t.isConstructor=function(t){return t&&t.hasOwnProperty("prototype")&&!!t.prototype&&!!t.prototype.constructor&&!!t.prototype.constructor.name},Object.defineProperty(t,"document",{get:function(){return"object"==typeof document?document:null},enumerable:!1,configurable:!0}),Object.defineProperty(t,"window",{get:function(){return"object"==typeof window?window:null},enumerable:!1,configurable:!0}),t.isMobile=function(){var e,r=!1;return navigator&&t.window&&(e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(r=!0)),r},Object.defineProperty(t,"inDevelopment",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"doBenchmark",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"inLegacy",{get:function(){return"es5"===process.env.BUILD_TARGET},enumerable:!1,configurable:!0}),t.getUriWithParams=function(t,e){var r=window.location.origin;!t.startsWith(".")&&t.startsWith("/")||(r+=window.location.pathname);var n=new URL(t,r),o=new URLSearchParams(n.search);for(var i in e)void 0!==e[i]&&o.set(i,e[i]);return n.search=o.toString(),n.toString()},t.wait=function(t){return r(this,void 0,void 0,(function(){return n(this,(function(e){return[2,new Promise((function(e){setTimeout(e,1e3*t)}))]}))}))},t.nice=function(e,r){void 0===r&&(r=100),t.window&&window.requestIdleCallback?window.requestIdleCallback(e):setTimeout(e,r)},Object.defineProperty(t,"wasmSupport",{get:function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var t=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}return!1},enumerable:!1,configurable:!0}),t}();e.VisionHelper=o},8412:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0,e.VERSION="0.1.132"},3145:function(t,e,r){"use strict";var n,o=this&&this.__extends||(n=function(t,e){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},n(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),a=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||i(e,t,r)},s=this&&this.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.vision=e.Tag=e.MessageList=e.EventDispatcher=e.Service=e.Model=e.Controller=e.WrappedArray=e.ScopeReference=e.Scope=e.DOM=e.Validators=e.Types=e.Formats=e.Vision=void 0;var c=r(9033),l=r(8572),f=r(1371),p=r(6417),h=r(4264),y=r(7754),d=r(5559),v=r(1469),b=r(8412);r(7389);var _=function(t){function e(){var r=t.call(this)||this;return r.registry=f.Registry.instance,r.config=p.Configuration.instance,document.ondragover=function(t){return t.cancelable&&t.preventDefault()},f.Registry.instance.tags.on("register",r.defineComponent,r),h.VisionHelper.document?document.addEventListener("DOMContentLoaded",r.setup.bind(r)):console.warn("No dom, running in CLI mode."),r.registry.functions.register("log",console.log),r.registry.functions.register("warn",console.warn),r.registry.functions.register("error",console.error),r.registry.functions.register("info",console.info),r.registry.functions.register("wait",h.VisionHelper.wait),r.registry.models.register("Object",Object),r.registry.controllers.register("WrappedArray",l.WrappedArray),r.registry.controllers.register("Data",v.DynamicScopeData),h.VisionHelper.window&&(window.Vision=e,window.Registry=f.Registry,window.vision=window.vsn=r,window.Tree=y.Tree,window.$=r.exec.bind(r),h.VisionHelper.window.dispatchEvent(new Event("vsn"))),r}return o(e,t),e.prototype.defineComponent=function(t,e){c.DOM.instance.built?customElements.define(t,e):c.DOM.instance.once("built",(function(){customElements.define(t,e)}))},Object.defineProperty(e.prototype,"dom",{get:function(){return this._dom},enumerable:!1,configurable:!0}),e.prototype.exec=function(t,e){return s(this,void 0,void 0,(function(){return u(this,(function(r){switch(r.label){case 0:return[4,this._dom.exec(t,e)];case 1:return[2,r.sent()]}}))}))},e.prototype.setup=function(){return s(this,void 0,void 0,(function(){var t,e,r;return u(this,(function(n){switch(n.label){case 0:return document.body.setAttribute("vsn-root",""),this._dom=c.DOM.instance,t=(new Date).getTime(),[4,this._dom.buildFrom(document,!0)];case 1:return n.sent(),e=(new Date).getTime(),r=e-t,console.info("Took "+r+"ms to start up VisionJS. https://www.vsnjs.com/","v"+b.VERSION),[2]}}))}))},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e}(d.EventDispatcher);e.Vision=_,a(r(1371),e),a(r(2132),e),a(r(9618),e),a(r(5092),e),a(r(7754),e);var g=r(8001);Object.defineProperty(e,"Formats",{enumerable:!0,get:function(){return g.Formats}});var w=r(3398);Object.defineProperty(e,"Types",{enumerable:!0,get:function(){return w.Types}});var m=r(3463);Object.defineProperty(e,"Validators",{enumerable:!0,get:function(){return m.Validators}});var O=r(9033);Object.defineProperty(e,"DOM",{enumerable:!0,get:function(){return O.DOM}});var x=r(4843);Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return x.Scope}});var S=r(414);Object.defineProperty(e,"ScopeReference",{enumerable:!0,get:function(){return S.ScopeReference}});var T=r(8572);Object.defineProperty(e,"WrappedArray",{enumerable:!0,get:function(){return T.WrappedArray}});var A=r(126);Object.defineProperty(e,"Controller",{enumerable:!0,get:function(){return A.Controller}});var E=r(5453);Object.defineProperty(e,"Model",{enumerable:!0,get:function(){return E.Model}});var P=r(218);Object.defineProperty(e,"Service",{enumerable:!0,get:function(){return P.Service}});var j=r(5559);Object.defineProperty(e,"EventDispatcher",{enumerable:!0,get:function(){return j.EventDispatcher}});var k=r(9188);Object.defineProperty(e,"MessageList",{enumerable:!0,get:function(){return k.MessageList}});var N=r(712);Object.defineProperty(e,"Tag",{enumerable:!0,get:function(){return N.Tag}}),e.vision=_.instance}},e={};(function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports})(6099)})();