/* Copyright 2022, VSNjs. vsn 0.1.69 (Sat, 28 May 2022 15:26:19 GMT) */if (window) window['VSN_VERSION']='0.1.69';
(()=>{"use strict";var t={7754:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Tree=e.AttributableNodes=e.TokenType=e.BlockType=void 0;var i,a,s=n(4123),u=n(7549),c=n(6094),l=n(8130),p=n(8052),f=n(329),h=n(3187),y=n(1185),d=n(3770),b=n(2020),v=n(6006),_=n(9446),g=n(2999),w=n(5728),m=n(3203),O=n(8673),T=n(1560),A=n(6357),E=n(2166),S=n(2751),x=n(9826),P=n(2321),j=n(4789),k=n(5155),N=n(3484),R=n(2947),C=n(1096),L=n(2393);!function(t){t[t.BRACE=0]="BRACE",t[t.BRACKET=1]="BRACKET",t[t.PAREN=2]="PAREN",t[t.STATEMENT=3]="STATEMENT"}(i=e.BlockType||(e.BlockType={})),function(t){t[t.NULL=0]="NULL",t[t.WHITESPACE=1]="WHITESPACE",t[t.TYPE_INT=2]="TYPE_INT",t[t.TYPE_UINT=3]="TYPE_UINT",t[t.TYPE_FLOAT=4]="TYPE_FLOAT",t[t.TYPE_STRING=5]="TYPE_STRING",t[t.RETURN=6]="RETURN",t[t.NOT=7]="NOT",t[t.OF=8]="OF",t[t.IN=9]="IN",t[t.FOR=10]="FOR",t[t.IF=11]="IF",t[t.ELSE_IF=12]="ELSE_IF",t[t.ELSE=13]="ELSE",t[t.FUNC=14]="FUNC",t[t.ON=15]="ON",t[t.CLASS=16]="CLASS",t[t.NAME=17]="NAME",t[t.L_BRACE=18]="L_BRACE",t[t.R_BRACE=19]="R_BRACE",t[t.L_BRACKET=20]="L_BRACKET",t[t.R_BRACKET=21]="R_BRACKET",t[t.L_PAREN=22]="L_PAREN",t[t.R_PAREN=23]="R_PAREN",t[t.TILDE=24]="TILDE",t[t.PERIOD=25]="PERIOD",t[t.COMMA=26]="COMMA",t[t.COLON=27]="COLON",t[t.SEMICOLON=28]="SEMICOLON",t[t.STRING_FORMAT=29]="STRING_FORMAT",t[t.STRING_LITERAL=30]="STRING_LITERAL",t[t.NUMBER_LITERAL=31]="NUMBER_LITERAL",t[t.BOOLEAN_LITERAL=32]="BOOLEAN_LITERAL",t[t.NULL_LITERAL=33]="NULL_LITERAL",t[t.STRICT_EQUALS=34]="STRICT_EQUALS",t[t.STRICT_NOT_EQUALS=35]="STRICT_NOT_EQUALS",t[t.EQUALS=36]="EQUALS",t[t.NOT_EQUALS=37]="NOT_EQUALS",t[t.GREATER_THAN_EQUAL=38]="GREATER_THAN_EQUAL",t[t.LESS_THAN_EQUAL=39]="LESS_THAN_EQUAL",t[t.GREATER_THAN=40]="GREATER_THAN",t[t.LESS_THAN=41]="LESS_THAN",t[t.ASSIGN=42]="ASSIGN",t[t.AND=43]="AND",t[t.OR=44]="OR",t[t.ADD=45]="ADD",t[t.SUBTRACT=46]="SUBTRACT",t[t.MULTIPLY=47]="MULTIPLY",t[t.DIVIDE=48]="DIVIDE",t[t.ADD_ASSIGN=49]="ADD_ASSIGN",t[t.SUBTRACT_ASSIGN=50]="SUBTRACT_ASSIGN",t[t.MULTIPLY_ASSIGN=51]="MULTIPLY_ASSIGN",t[t.DIVIDE_ASSIGN=52]="DIVIDE_ASSIGN",t[t.EXCLAMATION_POINT=53]="EXCLAMATION_POINT",t[t.ELEMENT_REFERENCE=54]="ELEMENT_REFERENCE",t[t.ELEMENT_ATTRIBUTE=55]="ELEMENT_ATTRIBUTE",t[t.ELEMENT_STYLE=56]="ELEMENT_STYLE",t[t.ELEMENT_QUERY=57]="ELEMENT_QUERY",t[t.UNIT=58]="UNIT",t[t.XHR_GET=59]="XHR_GET",t[t.XHR_POST=60]="XHR_POST",t[t.XHR_PUT=61]="XHR_PUT",t[t.XHR_DELETE=62]="XHR_DELETE",t[t.MODIFIER=63]="MODIFIER"}(a=e.TokenType||(e.TokenType={}));var M=[{type:a.WHITESPACE,pattern:/^[\s\n\r]+/},{type:a.XHR_POST,pattern:/^>>/},{type:a.XHR_PUT,pattern:/^<>/},{type:a.XHR_GET,pattern:/^<</},{type:a.XHR_DELETE,pattern:/^></},{type:a.TYPE_INT,pattern:/^int+/},{type:a.TYPE_UINT,pattern:/^uint+/},{type:a.TYPE_FLOAT,pattern:/^float+/},{type:a.UNIT,pattern:/^\d+\.?\d?(?:cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)/},{type:a.TYPE_STRING,pattern:/^string+/},{type:a.BOOLEAN_LITERAL,pattern:/^(true|false)/},{type:a.NULL_LITERAL,pattern:/^null/},{type:a.RETURN,pattern:/^return\s/},{type:a.NOT,pattern:/^not\s/},{type:a.OF,pattern:/^of\s/},{type:a.IN,pattern:/^in\s/},{type:a.FOR,pattern:/^for\s?(?=\()/},{type:a.IF,pattern:/^if\s?(?=\()/},{type:a.ELSE_IF,pattern:/^else if\s?(?=\()/},{type:a.ELSE,pattern:/^else\s?(?=\{)/},{type:a.FUNC,pattern:/^func\s/},{type:a.ON,pattern:/^on\s/},{type:a.CLASS,pattern:/^class\s/},{type:a.ELEMENT_ATTRIBUTE,pattern:/^\.?@[-_a-zA-Z0-9]*/},{type:a.ELEMENT_STYLE,pattern:/^\.?\$[-a-zA-Z0-9]*/},{type:a.ELEMENT_REFERENCE,pattern:/^#[-_a-zA-Z0-9]*/},{type:a.ELEMENT_QUERY,pattern:/^\?[>|<]?\(([#.\[\]:,=\-_a-zA-Z0-9*\s]*[\]_a-zA-Z0-9*])\)/},{type:a.NAME,pattern:/^[_a-zA-Z][_a-zA-Z0-9]*/},{type:a.NUMBER_LITERAL,pattern:/^-?\d+(?:\.\d+)?(?:e[+\-]?\d+)?/i},{type:a.L_BRACE,pattern:/^{/},{type:a.R_BRACE,pattern:/^}/},{type:a.L_BRACKET,pattern:/^\[/},{type:a.R_BRACKET,pattern:/^]/},{type:a.L_PAREN,pattern:/^\(/},{type:a.R_PAREN,pattern:/^\)/},{type:a.TILDE,pattern:/^~/},{type:a.PERIOD,pattern:/^\./},{type:a.COMMA,pattern:/^,/},{type:a.EQUALS,pattern:/^==/},{type:a.NOT_EQUALS,pattern:/^!=/},{type:a.GREATER_THAN,pattern:/^>/},{type:a.LESS_THAN,pattern:/^</},{type:a.GREATER_THAN_EQUAL,pattern:/^>=/},{type:a.LESS_THAN_EQUAL,pattern:/^<=/},{type:a.COLON,pattern:/^:/},{type:a.SEMICOLON,pattern:/^;/},{type:a.STRING_FORMAT,pattern:/^`([^`]*)`/},{type:a.STRING_LITERAL,pattern:/^"([^"]*)"/},{type:a.STRING_LITERAL,pattern:/^'([^']*)'/},{type:a.AND,pattern:/^&&/},{type:a.OR,pattern:/^\|\|/},{type:a.ADD_ASSIGN,pattern:/^\+=/},{type:a.SUBTRACT_ASSIGN,pattern:/^-=/},{type:a.MULTIPLY_ASSIGN,pattern:/^\*=/},{type:a.DIVIDE_ASSIGN,pattern:/^\/=/},{type:a.ADD,pattern:/^\+/},{type:a.SUBTRACT,pattern:/^-/},{type:a.MULTIPLY,pattern:/^\*/},{type:a.DIVIDE,pattern:/^\//},{type:a.ASSIGN,pattern:/^=/},{type:a.EXCLAMATION_POINT,pattern:/^!/},{type:a.MODIFIER,pattern:/^\|\S+/}];e.AttributableNodes=[s.RootScopeMemberNode,u.ScopeMemberNode,c.ElementAttributeNode];var D=function(){function t(e){this.code=e,t.cache[e]?this._root=t.cache[e]:(this.parse(),t.cache[e]=this._root)}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),t.prototype.parse=function(){var e=t.tokenize(this.code);this._root=t.processTokens(e)},t.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,this._root.evaluate(t,e,n)];case 1:return[2,r.sent()]}}))}))},t.prototype.prepare=function(t,e,n){return void 0===n&&(n=null),r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return this._root.isPreparationRequired()?[4,this._root.prepare(t,e,n)]:[2];case 1:return[2,r.sent()]}}))}))},t.prototype.bindToScopeChanges=function(t,e,n,i){return void 0===i&&(i=null),r(this,void 0,void 0,(function(){var r,a,l,p,f;return o(this,(function(o){switch(o.label){case 0:r=0,a=this._root.findChildrenByTypes([s.RootScopeMemberNode,u.ScopeMemberNode,c.ElementAttributeNode],"ScopeMemberNodes"),o.label=1;case 1:return r<a.length?(l=a[r],p=t,l instanceof u.ScopeMemberNode?[4,l.scope.evaluate(t,n)]:[3,3]):[3,8];case 2:return p=o.sent(),[3,5];case 3:return l instanceof c.ElementAttributeNode&&l.elementRef?[4,l.elementRef.evaluate(t,n,i)]:[3,5];case 4:p=o.sent()[0].scope,o.label=5;case 5:return[4,l.name.evaluate(t,n,i)];case 6:f=o.sent(),p.on("change:"+f,e),o.label=7;case 7:return r++,[3,1];case 8:return[2]}}))}))},t.tokenize=function(t){var e,n=[];if(!t||0===t.length)return n;do{e=!1;for(var r=0,o=M;r<o.length;r++){var i=o[r],a=i.pattern.exec(t);if(a){n.push({type:i.type,value:a[a.length-1],full:a[0],groups:a}),t=t.substring(a[0].length),e=!0;break}}}while(t.length>0&&e);return n},t.stripWhiteSpace=function(t){for(var e=0;e<t.length;e++)t[e].type===a.WHITESPACE&&(t.splice(e,1),e--);return t},t.processTokens=function(e){var n=[],r=null,o=0;for(t.stripWhiteSpace(e);e.length>0&&!(++o>1e3);){e[0].type===a.RETURN&&e.shift();var i=e[0];if(i.type===a.NAME)r=new s.RootScopeMemberNode(new p.LiteralNode(i.value)),e.shift();else if(j.XHRNode.match(e))r=j.XHRNode.parse(r,e[0],e);else if(i.type===a.IF)r=f.IfStatementNode.parse(r,i,e),n.push(r),r=null;else if(i.type===a.FOR)r=h.ForStatementNode.parse(r,i,e),n.push(r),r=null;else if(i.type===a.FUNC)r=N.FunctionNode.parse(r,i,e),n.push(r),r=null;else if(i.type===a.ON)r=C.OnNode.parse(r,i,e),n.push(r),r=null;else if(i.type===a.CLASS)r=R.ClassNode.parse(r,i,e),n.push(r),r=null;else if(k.StringFormatNode.match(e))r=k.StringFormatNode.parse(r,e[0],e);else if(i.type===a.STRING_LITERAL)r=new p.LiteralNode(i.value),e.shift();else if(i.type===a.NUMBER_LITERAL)r=new y.NumberLiteralNode(i.value),e.shift();else if(e[0].type===a.ELEMENT_REFERENCE)r=new d.ElementQueryNode(e[0].value,!0),e.shift();else if(e[0].type===a.ELEMENT_QUERY)r=d.ElementQueryNode.parse(r,e[0],e);else if(e[0].type===a.L_BRACKET)r=r?b.IndexNode.parse(r,i,e):v.ArrayNode.parse(r,i,e);else if(e[0].type===a.L_BRACE)r=_.ObjectNode.parse(r,i,e);else if(e[0].type===a.ELEMENT_ATTRIBUTE)r=new c.ElementAttributeNode(r,e[0].value),e.shift();else if(e[0].type===a.ELEMENT_STYLE)r=new g.ElementStyleNode(r,e[0].value),e.shift();else if(null!==r&&i.type===a.PERIOD&&e[1].type===a.NAME)r=new u.ScopeMemberNode(r,new p.LiteralNode(e[1].value)),e.splice(0,2);else if(e[0].type===a.L_PAREN){for(var M=[],D=0,I=t.getBlockTokens(e);D<I.length;D++){var B=I[D];M.push(t.processTokens(B))}r=r?new w.FunctionCallNode(r,new m.FunctionArgumentNode(M)):new l.BlockNode(M)}else if(e[0].type===a.SEMICOLON)r&&n.push(r),r=null,e.shift();else if(O.InNode.match(e))r=O.InNode.parse(r,i,e);else if(T.ComparisonNode.match(e))r=T.ComparisonNode.parse(r,i,e);else if(A.ArithmeticNode.match(e))r=A.ArithmeticNode.parse(r,i,e);else if(E.ArithmeticAssignmentNode.match(e))r=E.ArithmeticAssignmentNode.parse(r,i,e);else if(e[0].type===a.WHITESPACE)e.shift();else if(e[0].type===a.UNIT)r=new S.UnitLiteralNode(e[0].value),e.shift();else if(e[0].type===a.BOOLEAN_LITERAL)r=new x.BooleanLiteralNode(e[0].value),e.shift();else if(e[0].type===a.NULL_LITERAL)r=new p.LiteralNode(null),e.shift();else if(e[0].type===a.EXCLAMATION_POINT)r=P.NotNode.parse(r,e[0],e);else{if(e[0].type!==a.MODIFIER){var F=t.toCode(e,10);throw Error("Syntax Error. Near "+F)}r=L.ModifierNode.parse(r,e[0],e)}}return r&&n.push(r),new l.BlockNode(n)},t.toCode=function(t,e){var n="";e=e||t.length;for(var r=0;r<e&&t[r];r++)n+=t[r].value;return n},t.getBlockInfo=function(t){var e,n,r,o,s,u=t[0];switch(e=u.type===a.L_PAREN?i.PAREN:u.type===a.L_BRACE?i.BRACE:u.type===a.L_BRACKET?i.BRACKET:i.STATEMENT){case i.PAREN:n=a.L_PAREN,r=a.R_PAREN,o="(",s=")";break;case i.BRACE:n=a.L_BRACE,r=a.R_BRACE,o="{",s="}";break;case i.BRACKET:n=a.L_BRACKET,r=a.R_BRACKET,o="[",s="]";break;default:n=null,r=a.SEMICOLON,o=null,s=";"}return{type:e,open:n,close:r,openCharacter:o,closeCharacter:s}},t.getNextStatementTokens=function(e,n,r,o){void 0===n&&(n=!0),void 0===r&&(r=!0),void 0===o&&(o=!1);var i=t.getBlockInfo(e);return r&&e[0].type===i.open&&e.shift(),t.getTokensUntil(e,i.close,n,o)},t.getBlockTokens=function(e,n){void 0===n&&(n=a.COMMA);for(var r=t.getBlockInfo(e),o=0,i=[],s=[],u=0;u<e.length;u++){var c=e[u];if(c.type===r.open?(o+=1)>1&&s.push(c):c.type===r.close?(o-=1)>0&&s.push(c):null!==n&&c.type===n&&1==o?(i.push(s),s=[]):c.type!==a.WHITESPACE&&s.push(c),e.shift(),u--,0===o)return s.length>0&&i.push(s),i}throw Error("Invalid Syntax, missing "+r.closeCharacter)},t.getTokensUntil=function(e,n,r,o,i,s){void 0===n&&(n=a.SEMICOLON),void 0===r&&(r=!0),void 0===o&&(o=!1),void 0===i&&(i=!1),void 0===s&&(s=null);var u=[];s=s||t.getBlockInfo(e);for(var c=0,l=0,p=0,f=0;f<e.length;f++){var h=e[f];if(h.type===s.open&&0===f||(h.type===a.L_PAREN&&(c+=1),h.type===a.L_BRACE&&(l+=1),h.type===a.L_BRACKET&&(p+=1)),[n,a.R_BRACKET,a.R_BRACE,a.R_PAREN].indexOf(h.type)>-1)if(c>0&&h.type===a.R_PAREN)c-=1;else if(l>0&&h.type===a.R_BRACE)l-=1;else if(p>0&&h.type===a.R_BRACKET)p-=1;else{if(h.type===n&&0===c&&0===l&&0===p){o&&u.push(h),(o||r)&&h.type!==a.SEMICOLON&&e.shift();break}if(h.type!==n||!(c>0||l>0||p>0)){if(i)break;throw Error("Invalid syntax, expecting "+n+".")}}u.push(h),e.shift(),f--}return u},t.consumeTypes=function(t,e){for(var n=[],r=0,o=t;r<o.length;r++){var i=o[r];if(!(e.indexOf(i.type)>-1))break;n.push(i)}return t.splice(0,n.length),n},t.apply=function(e,n,i,a){return r(this,void 0,void 0,(function(){return o(this,(function(r){switch(r.label){case 0:return[4,new t(e).evaluate(n,i,a)];case 1:return[2,r.sent()]}}))}))},t.cache={},t}();e.Tree=D},2166:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ArithmeticAssignmentNode=void 0;var s=n(4843),u=n(3276),c=n(7754),l=n(8403),p=n(4123),f=n(7549),h=n(3770),y=n(6094),d=n(2999),b=n(2751),v=n(3145),_=function(t){function e(e,n,r){var o=t.call(this)||this;return o.left=e,o.right=n,o.type=r,o}return o(e,t),e.prototype._getChildNodes=function(){return[this.left,this.right]},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,c,l,p,b,_,g,w;return a(this,(function(a){switch(a.label){case 0:return r=[],[4,this.left.name.evaluate(t,e,n)];case 1:return o=a.sent(),this.left instanceof f.ScopeMemberNode?[4,this.left.scope.evaluate(t,e,n)]:[3,3];case 2:return i=a.sent(),this.left.scope instanceof h.ElementQueryNode?this.left.scope.first?r.push(i):r.push.apply(r,i):i instanceof s.Scope?r.push(i):i instanceof v.Controller?r.push(i.scope):r.push(t),[3,6];case 3:return(this.left instanceof y.ElementAttributeNode||this.left instanceof d.ElementStyleNode)&&this.left.elementRef?[4,this.left.elementRef.evaluate(t,e,n)]:[3,5];case 4:return c=a.sent(),this.left.elementRef.first?r.push(c):r=c,[3,6];case 5:r.push(t),a.label=6;case 6:l=[],p=0,b=r,a.label=7;case 7:return p<b.length?(_=b[p])instanceof u.DOMObject?[4,this.handleDOMObject(o,e,t,_,n)]:[3,9]:[3,13];case 8:return a.sent(),[3,12];case 9:return _.$wrapped&&_.$scope&&(_=_.$scope),[4,this.left.evaluate(t,e,n)];case 10:return g=a.sent(),[4,this.right.evaluate(t,e,n)];case 11:w=a.sent(),g=this.handle(o,g,w,_),l.push(g),a.label=12;case 12:return p++,[3,7];case 13:return[2,l.length>1?l:l[0]]}}))}))},e.prototype.handle=function(t,e,n,r){return e=e instanceof Array?this.handleArray(t,e,n,r):e instanceof b.UnitLiteral||n instanceof b.UnitLiteral?this.handleUnit(t,e,n,r):Number.isFinite(e)?this.handleNumber(t,e,n,r):this.handleString(t,e,n,r)},e.prototype.handleNumber=function(t,e,n,r){switch(null===n||Number.isFinite(n)||(n=parseFloat(""+n)),e=e,n=n,this.type){case c.TokenType.ASSIGN:e=n;break;case c.TokenType.ADD_ASSIGN:e+=n;break;case c.TokenType.SUBTRACT_ASSIGN:e-=n;break;case c.TokenType.MULTIPLY_ASSIGN:e*=n;break;case c.TokenType.DIVIDE_ASSIGN:e/=n}return r.set(t,e),e},e.prototype.handleString=function(t,e,n,r){switch(this.type){case c.TokenType.ASSIGN:e=n;break;case c.TokenType.ADD_ASSIGN:e=""+e+n;break;case c.TokenType.SUBTRACT_ASSIGN:e.replace(n,"");break;case c.TokenType.MULTIPLY_ASSIGN:e*=n;break;case c.TokenType.DIVIDE_ASSIGN:e/=n}return r.set(t,e),e},e.prototype.handleUnit=function(t,e,n,r){e instanceof b.UnitLiteral||(e=new b.UnitLiteral(e)),n instanceof b.UnitLiteral||(n=new b.UnitLiteral(n));var o=e.unit||n.unit||"px";switch(this.type){case c.TokenType.ASSIGN:e=n;break;case c.TokenType.ADD_ASSIGN:e=new b.UnitLiteral(""+(e.amount+n.amount)+o);break;case c.TokenType.SUBTRACT_ASSIGN:e=new b.UnitLiteral(""+(e.amount-n.amount)+o);break;case c.TokenType.MULTIPLY_ASSIGN:e=new b.UnitLiteral(""+e.amount*n.amount+o);break;case c.TokenType.DIVIDE_ASSIGN:e=new b.UnitLiteral(""+e.amount/n.amount+o)}return r.set(t,e),e},e.prototype.handleDOMObject=function(t,e,n,r,o){return i(this,void 0,void 0,(function(){var i,s;return a(this,(function(a){switch(a.label){case 0:return i=r.scope.get(t),[4,this.right.evaluate(n,e,o)];case 1:return s=a.sent(),[2,this.handle(t,i,s,r.scope)]}}))}))},e.prototype.handleArray=function(t,e,n,r){switch(n instanceof Array||(n=[n]),this.type){case c.TokenType.ASSIGN:e.splice(0,e.length),e.push.apply(e,n);break;case c.TokenType.ADD_ASSIGN:e.push.apply(e,n);break;case c.TokenType.SUBTRACT_ASSIGN:for(var o=e.length-1;o>=0;o--)n.indexOf(e[o])>-1&&(e.splice(o,1),o++);break;case c.TokenType.TILDE:for(var i=0,a=n;i<a.length;i++){var s=a[i],u=e.indexOf(s);u>-1?e.splice(u,1):e.push(s)}}return r.dispatch("change:"+t),e},e.match=function(t){return[c.TokenType.ASSIGN,c.TokenType.ADD_ASSIGN,c.TokenType.SUBTRACT_ASSIGN,c.TokenType.MULTIPLY_ASSIGN,c.TokenType.DIVIDE_ASSIGN,c.TokenType.TILDE].indexOf(t[0].type)>-1},e.parse=function(t,n,r){if(!(t instanceof p.RootScopeMemberNode||t instanceof f.ScopeMemberNode||t instanceof y.ElementAttributeNode||t instanceof d.ElementStyleNode))throw SyntaxError("Invalid assignment syntax near "+c.Tree.toCode(r.splice(0,10)));r.splice(0,1);var o=c.Tree.getTokensUntil(r,c.TokenType.SEMICOLON,!1,!0,!0,{type:c.BlockType.STATEMENT,open:c.TokenType.NULL,close:c.TokenType.SEMICOLON,openCharacter:"",closeCharacter:";"});return new e(t,c.Tree.processTokens(o),n.type)},e}(l.Node);e.ArithmeticAssignmentNode=_},6357:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ArithmeticNode=void 0;var s=n(7754),u=function(t){function e(e,n,r){var o=t.call(this)||this;return o.left=e,o.right=n,o.type=r,o}return o(e,t),e.prototype._getChildNodes=function(){return[this.left,this.right]},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.left.evaluate(t,e,n)];case 1:return r=i.sent(),[4,this.right.evaluate(t,e,n)];case 2:switch(o=i.sent(),this.type){case s.TokenType.ADD:return[2,r+o];case s.TokenType.SUBTRACT:return[2,r-o];case s.TokenType.MULTIPLY:return[2,r*o];case s.TokenType.DIVIDE:return[2,r/o]}return[2]}}))}))},e.match=function(t){return[s.TokenType.ADD,s.TokenType.SUBTRACT,s.TokenType.MULTIPLY,s.TokenType.DIVIDE].indexOf(t[0].type)>-1},e.parse=function(t,n,r){return r.splice(0,1),new e(t,s.Tree.processTokens(s.Tree.getNextStatementTokens(r)),n.type)},e}(n(8403).Node);e.ArithmeticNode=u},6006:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayNode=void 0;var u=n(8572),c=n(7754),l=function(t){function e(e){var n=t.call(this)||this;return n.values=e,n}return o(e,t),e.prototype._getChildNodes=function(){return new(Array.bind.apply(Array,s([void 0],this.values)))},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,s,c,l;return a(this,(function(a){switch(a.label){case 0:r=new u.WrappedArray,o=0,i=this.values,a.label=1;case 1:return o<i.length?(s=i[o],l=(c=r).push,[4,s.evaluate(t,e,n)]):[3,4];case 2:l.apply(c,[a.sent()]),a.label=3;case 3:return o++,[3,1];case 4:return[2,r]}}))}))},e.match=function(t){return t[0].type===c.TokenType.L_BRACKET},e.parse=function(t,n,r){for(var o=[],i=0,a=c.Tree.getBlockTokens(r);i<a.length;i++){var s=a[i];o.push(c.Tree.processTokens(s))}return new e(o)},e}(n(8403).Node);e.ArrayNode=l},8130:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.BlockNode=void 0;var u=function(t){function e(e){var n=t.call(this)||this;return n.statements=e,n}return o(e,t),e.prototype._getChildNodes=function(){return s([],this.statements)},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:r=null,o=0,i.label=1;case 1:return o<this.statements.length?[4,this.statements[o].evaluate(t,e,n)]:[3,4];case 2:r=i.sent(),i.label=3;case 3:return o++,[3,1];case 4:return[2,r]}}))}))},e}(n(8403).Node);e.BlockNode=u},9826:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.BooleanLiteralNode=void 0;var i=function(t){function e(e){var n=t.call(this,e)||this;return n.value=e,n.value="true"===e,n}return o(e,t),e}(n(8052).LiteralNode);e.BooleanLiteralNode=i},2947:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ClassNode=void 0;var s=n(4843),u=n(712),c=n(7754),l=n(8403),p=n(1371),f=n(1096),h=function(t){function e(e,n){var r=t.call(this)||this;return r.name=e,r.block=n,r.requiresPrep=!0,r.classScope=new s.Scope,r._ready=!1,r}return o(e,t),e.prototype.updateMeta=function(t){return(t=t||{}).ClassNode=this,t},e.prototype.prepare=function(t,n,r,o){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var t,i,s;return a(this,(function(a){switch(a.label){case 0:return(o=o||{}).ClassNodePrepare=!0,e.classes[this.name]?[2]:(e.classes[this.name]=this,[4,this.block.prepare(this.classScope,n,r,o)]);case 1:a.sent(),p.Registry.class(this),t=0,i=Array.from(n.querySelectorAll("."+this.name)),a.label=2;case 2:return t<i.length?(s=i[t],[4,e.checkForClassChanges(s,n,s[u.Tag.TaggedVariable]||null)]):[3,5];case 3:a.sent(),a.label=4;case 4:return t++,[3,2];case 5:return[2]}}))}))},e.prototype.prepareTag=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return null===n&&(n=this.classScope.has("construct")),t.createScope(!0),r=this.updateMeta(),[4,this.block.prepare(t.scope,e,t,r)];case 1:return o.sent(),n?[4,this.classScope.get("construct").getFunction(t.scope,e,t,!1)]:[3,4];case 2:return[4,o.sent()()];case 3:o.sent(),o.label=4;case 4:return t.preppedClasses.push(this.name),[2]}}))}))},e.prototype.tearDownTag=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,s;return a(this,(function(a){switch(a.label){case 0:return null===n&&(n=this.classScope.has("deconstruct")),n?[4,this.classScope.get("deconstruct").getFunction(t.scope,e,t,!1)]:[3,3];case 1:return[4,a.sent()()];case 2:a.sent(),a.label=3;case 3:for(r=0,o=this.classScope.keys;r<o.length;r++)i=o[r],this.classScope.get(i)instanceof f.OnNode&&(s=this.classScope.get(i),t.removeContextEventHandlers(s));return t.preppedClasses.splice(t.preppedClasses.indexOf(this.name),1),[2]}}))}))},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,null]}))}))},e.parse=function(t,n,r){r.shift();for(var o=[],i=0,a=r;i<a.length;i++){var s=a[i];if(s.type===c.TokenType.L_BRACE)break;o.push(s.value)}var u=o.join("").trim();return r.splice(0,o.length),new e(u,c.Tree.processTokens(c.Tree.getNextStatementTokens(r,!0,!0)))},e.checkForClassChanges=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,s,u,c,l,f,h,y;return a(this,(function(a){switch(a.label){case 0:return r=Array.from(t.classList),o=r.filter((function(t){return p.Registry.instance.classes.has(t)})),n?[3,2]:[4,e.getTagForElement(t,!0)];case 1:n=a.sent(),a.label=2;case 2:o=o.filter((function(t){return!n.preppedClasses.includes(t)})),i=n.preppedClasses.filter((function(t){return!r.includes(t)})),s=0,u=o,a.label=3;case 3:return s<u.length?(c=u[s],(y=p.Registry.instance.classes.getSynchronous(c))?[4,y.prepareTag(n,e)]:[3,5]):[3,6];case 4:a.sent(),a.label=5;case 5:return s++,[3,3];case 6:l=0,f=i,a.label=7;case 7:return l<f.length?(h=f[l],(y=p.Registry.instance.classes.getSynchronous(h))?[4,y.tearDownTag(n,e)]:[3,9]):[3,10];case 8:a.sent(),a.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},e.isClass=function(t){return!!this.classes[t]},e.classes={},e}(l.Node);e.ClassNode=h},1560:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ComparisonNode=void 0;var s=n(7754),u=function(t){function e(e,n,r){var o=t.call(this)||this;return o.left=e,o.right=n,o.type=r,o}return o(e,t),e.prototype._getChildNodes=function(){return[this.left,this.right]},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.left.evaluate(t,e,n)];case 1:return r=i.sent(),[4,this.right.evaluate(t,e,n)];case 2:switch(o=i.sent(),this.type){case s.TokenType.EQUALS:return[2,r===o];case s.TokenType.NOT_EQUALS:return[2,r!==o];case s.TokenType.GREATER_THAN:return[2,r>o];case s.TokenType.LESS_THAN:return[2,r<o];case s.TokenType.GREATER_THAN_EQUAL:return[2,r>=o];case s.TokenType.LESS_THAN_EQUAL:return[2,r<=o]}return[2]}}))}))},e.match=function(t){return[s.TokenType.EQUALS,s.TokenType.NOT_EQUALS,s.TokenType.GREATER_THAN,s.TokenType.LESS_THAN,s.TokenType.GREATER_THAN_EQUAL,s.TokenType.LESS_THAN_EQUAL].indexOf(t[0].type)>-1},e.parse=function(t,n,r){return r.splice(0,1),new e(t,s.Tree.processTokens(s.Tree.getNextStatementTokens(r)),n.type)},e}(n(8403).Node);e.ComparisonNode=u},6765:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConditionalNode=void 0;var s=n(8572),u=function(t){function e(e,n){var r=t.call(this)||this;return r.condition=e,r.block=n,r}return o(e,t),e.prototype._getChildNodes=function(){return[this.condition,this.block]},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return[4,this.condition.evaluate(t,e,n)];case 1:return r=o.sent(),!1,[2,r instanceof s.WrappedArray?r.length>0:!!r]}}))}))},e}(n(8403).Node);e.ConditionalNode=u},6094:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ElementAttributeNode=void 0;var s=n(1008),u=n(8403),c=n(8052),l=function(t){function e(e,n){var r=t.call(this)||this;return r.elementRef=e,r.attr=n,r.requiresPrep=!0,r}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return new c.LiteralNode("@"+this.attributeName)},enumerable:!1,configurable:!0}),e.prototype._getChildNodes=function(){var t=[];return this.elementRef&&t.push(this.elementRef),t},Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.attr.startsWith(".")?this.attr.substring(2):this.attr.substring(1)},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o=this;return a(this,(function(i){switch(i.label){case 0:return this.elementRef?[4,this.elementRef.evaluate(t,e,n,!0)]:[3,2];case 1:return r=i.sent(),[3,3];case 2:if(!n)return[2];r=new s.TagList(n),i.label=3;case 3:return 1===r.length?[2,r[0].scope.get("@"+this.attributeName)]:[2,r.map((function(t){return t.scope.get("@"+o.attributeName)}))]}}))}))},e.prototype.prepare=function(t,e,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),i(this,void 0,void 0,(function(){var o,i,s;return a(this,(function(a){switch(a.label){case 0:return this.elementRef?[4,this.elementRef.prepare(t,e,n,r)]:[3,7];case 1:return a.sent(),[4,this.elementRef.evaluate(t,e,n,!0)];case 2:o=a.sent(),i=0,s=o,a.label=3;case 3:return i<s.length?[4,s[i].watchAttribute(this.attributeName)]:[3,6];case 4:a.sent(),a.label=5;case 5:return i++,[3,3];case 6:return[3,9];case 7:return n?[4,n.watchAttribute(this.attributeName)]:[3,9];case 8:a.sent(),a.label=9;case 9:return[2]}}))}))},e}(u.Node);e.ElementAttributeNode=l},3770:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ElementQueryNode=void 0;var s=n(9033),u=function(t){function e(e,n,r){void 0===n&&(n=!1),void 0===r&&(r=s.EQuerySelectDirection.ALL);var o=t.call(this)||this;return o.query=e,o.first=n,o.direction=r,o.requiresPrep=!0,o}return o(e,t),e.prototype.evaluate=function(t,e,n,r){return void 0===n&&(n=null),void 0===r&&(r=!1),i(this,void 0,void 0,(function(){var o,i;return a(this,(function(a){switch(a.label){case 0:return(o=n)?[3,2]:[4,e.getTagForScope(t)];case 1:o=a.sent(),a.label=2;case 2:return n=o,[4,e.get(this.query,!0,n,this.direction)];case 3:return i=a.sent(),[2,this.first&&!r?i[0]:i]}}))}))},e.prototype.prepare=function(t,e,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),i(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return(r=n)?[3,2]:[4,e.getTagForScope(t)];case 1:r=o.sent(),o.label=2;case 2:return n=r,[4,e.get(this.query,!0,n)];case 3:return o.sent(),[2]}}))}))},e.parse=function(t,n,r){r.shift();var o=!1,i=s.EQuerySelectDirection.ALL;return n.full.startsWith("?>")?i=s.EQuerySelectDirection.DOWN:n.full.startsWith("?<")&&(i=s.EQuerySelectDirection.UP,o=!0),new e(n.value,o,i)},e}(n(8403).Node);e.ElementQueryNode=u},2999:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ElementStyleNode=void 0;var s=n(1008),u=n(8403),c=n(8052),l=function(t){function e(e,n){var r=t.call(this)||this;return r.elementRef=e,r.attr=n,r.requiresPrep=!0,r}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return new c.LiteralNode("$"+this.attributeName)},enumerable:!1,configurable:!0}),e.prototype._getChildNodes=function(){var t=[];return this.elementRef&&t.push(this.elementRef),t},Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.attr.startsWith(".")?this.attr.substring(2):this.attr.substring(1)},enumerable:!1,configurable:!0}),e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o=this;return a(this,(function(i){switch(i.label){case 0:return this.elementRef?[4,this.elementRef.evaluate(t,e,n,!0)]:[3,2];case 1:return r=i.sent(),[3,3];case 2:if(!n)return[2];r=new s.TagList(n),i.label=3;case 3:return 1===r.length?[2,r[0].scope.get("$"+this.attributeName)]:[2,r.map((function(t){return t.scope.get("$"+o.attributeName)}))]}}))}))},e.prototype.prepare=function(t,e,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),i(this,void 0,void 0,(function(){var o,i,s;return a(this,(function(a){switch(a.label){case 0:return this.elementRef?[4,this.elementRef.prepare(t,e,n,r)]:[3,7];case 1:return a.sent(),[4,this.elementRef.evaluate(t,e,n,!0)];case 2:o=a.sent(),i=0,s=o,a.label=3;case 3:return i<s.length?[4,s[i].watchStyle(this.attributeName)]:[3,6];case 4:a.sent(),a.label=5;case 5:return i++,[3,3];case 6:return[3,9];case 7:return n?[4,n.watchStyle(this.attributeName)]:[3,9];case 8:a.sent(),a.label=9;case 9:return[2]}}))}))},e}(u.Node);e.ElementStyleNode=l},3187:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ForStatementNode=void 0;var s=n(7754),u=n(8403),c=n(8052),l=function(t){function e(e,n,r){var o=t.call(this)||this;return o.variable=e,o.list=n,o.block=r,o}return o(e,t),e.prototype._getChildNodes=function(){return[this.variable,this.list,this.block]},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.variable.evaluate(t,e,n)];case 1:return r=a.sent(),[4,this.list.evaluate(t,e,n)];case 2:o=a.sent(),i=0,a.label=3;case 3:return i<o.length?(t.set(r,o[i]),[4,this.block.evaluate(t,e,n)]):[3,6];case 4:a.sent(),a.label=5;case 5:return i++,[3,3];case 6:return[2,null]}}))}))},e.parse=function(t,n,r){if(r[1].type!==s.TokenType.L_PAREN)throw SyntaxError("Syntax error: Missing (");if(r[3].type!==s.TokenType.OF)throw SyntaxError("Syntax error: Missing of");r.splice(0,1);var o=s.Tree.getNextStatementTokens(r),i=o.splice(0,1)[0];o.splice(0,1);var a=s.Tree.processTokens(o),u=s.Tree.processTokens(s.Tree.getBlockTokens(r,null)[0]);return new e(new c.LiteralNode(i.value),a,u)},e}(u.Node);e.ForStatementNode=l},3203:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionArgumentNode=void 0;var u=function(t){function e(e){var n=t.call(this)||this;return n.args=e,n}return o(e,t),e.prototype._getChildNodes=function(){return s([],this.args)},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,s,u,c;return a(this,(function(a){switch(a.label){case 0:r=[],o=0,i=this.args,a.label=1;case 1:return o<i.length?(s=i[o],c=(u=r).push,[4,s.evaluate(t,e,n)]):[3,4];case 2:c.apply(u,[a.sent()]),a.label=3;case 3:return o++,[3,1];case 4:return[2,r]}}))}))},e}(n(8403).Node);e.FunctionArgumentNode=u},5728:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionCallNode=void 0;var u=n(8403),c=n(7549),l=n(3484),p=n(1371),f=n(1008),h=function(t){function e(e,n){var r=t.call(this)||this;return r.fnc=e,r.args=n,r}return o(e,t),e.prototype._getChildNodes=function(){return[this.fnc,this.args]},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,u,h,y,d,b,v,_,g,w,m,O,T,A,E;return a(this,(function(a){switch(a.label){case 0:return r=t,this.fnc instanceof c.ScopeMemberNode?(console.log("scope member"),[4,this.fnc.scope.evaluate(t,e,n)]):[3,2];case 1:(r=a.sent())instanceof f.TagList&&console.log("scope member list"),a.label=2;case 2:return[4,this.args.evaluate(t,e,n)];case 3:return o=a.sent(),[4,this.fnc.evaluate(t,e,n)];case 4:return(i=a.sent())?[3,15]:[4,this.fnc.name.evaluate(t,e,n)];case 5:u=a.sent(),h=[],y=[],d=0,b=0,v=n.preppedClasses,a.label=6;case 6:return b<v.length?(_=v[b],(g=p.Registry.instance.classes.getSynchronous(_))&&g.classScope.has(u)?(A=g.classScope.get(u),y.push(A),m=(w=h).push,[4,A.evaluate(r,e,n)]):[3,9]):[3,10];case 7:return[4,a.sent().apply(void 0,o)];case 8:m.apply(w,[a.sent()]),d++,a.label=9;case 9:return b++,[3,6];case 10:O=0,T=y,a.label=11;case 11:return O<T.length?[4,(A=T[O]).collectGarbage()]:[3,14];case 12:a.sent(),a.label=13;case 13:return O++,[3,11];case 14:if(1===d)return[2,h[0]];if(0===d)throw new Error("Function "+u+" not found");return[2,h];case 15:return i instanceof l.FunctionNode?[4,i.evaluate(r,e,n)]:[3,19];case 16:return[4,a.sent().apply(void 0,o)];case 17:return E=a.sent(),[4,i.collectGarbage()];case 18:return a.sent(),[2,E];case 19:return[2,i.call.apply(i,s([r.wrapped||r],o))];case 20:return[2]}}))}))},e}(u.Node);e.FunctionCallNode=h},3484:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionNode=void 0;var s=n(4843),u=n(7754),c=function(t){function e(e,n,r){var o=t.call(this)||this;return o.name=e,o.args=n,o.block=r,o.requiresPrep=!0,o.garbage=[],o}return o(e,t),e.prototype._getChildNodes=function(){return[this.block]},e.prototype.prepare=function(e,n,r,o){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){return a(this,(function(i){switch(i.label){case 0:return(null==o?void 0:o.ClassNode)||e.set(this.name,this),[4,t.prototype.prepare.call(this,e,n,r,o)];case 1:return i.sent(),[2]}}))}))},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,this.getFunction(t,e,n)];case 1:return[2,r.sent()]}}))}))},e.prototype.collectGarbage=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){for(t=0,e=this.garbage;t<e.length;t++)e[t].collectGarbage();return this.garbage=[],[2]}))}))},e.prototype.getFunction=function(t,e,n,r){return void 0===n&&(n=null),void 0===r&&(r=!0),i(this,void 0,void 0,(function(){var o,u=this;return a(this,(function(c){return console.log("FunctionNode.getFunction("+this.name+")"),o=this,[2,function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return i(u,void 0,void 0,(function(){var i,u,l,p;return a(this,(function(a){switch(a.label){case 0:for(!r||t instanceof s.FunctionScope?i=t:(i=new s.FunctionScope(t),o.garbage.push(i)),u=0,l=this.args;u<l.length;u++)p=l[u],i.set(p,c.shift());return[4,this.block.evaluate(i,e,n)];case 1:return[2,a.sent()]}}))}))}]}))}))},e.parse=function(t,n,r,o){void 0===o&&(o=e),r.shift();for(var i=r.shift(),a=[],s=0,c=u.Tree.getBlockTokens(r);s<c.length;s++){var l=c[s];a.push(l[0].value)}var p=u.Tree.processTokens(u.Tree.getNextStatementTokens(r,!0,!0));return new o(i.value,a,p)},e}(n(8403).Node);e.FunctionNode=c},329:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.IfStatementNode=void 0;var u=n(7754),c=n(8403),l=n(6765),p=n(8052),f=function(t){function e(e){var n=t.call(this)||this;return n.nodes=e,n}return o(e,t),e.prototype._getChildNodes=function(){return s([],this.nodes)},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:r=0,o=this.nodes,a.label=1;case 1:return r<o.length?[4,(i=o[r]).evaluate(t,e,n)]:[3,5];case 2:return a.sent()?[4,i.block.evaluate(t,e,n)]:[3,4];case 3:return[2,a.sent()];case 4:return r++,[3,1];case 5:return[2]}}))}))},e.parseConditional=function(t){if(-1===[u.TokenType.IF,u.TokenType.ELSE_IF].indexOf(t[0].type))throw SyntaxError("Invalid Syntax");return t.splice(0,1),new l.ConditionalNode(u.Tree.processTokens(u.Tree.getBlockTokens(t,null)[0]),u.Tree.processTokens(u.Tree.getBlockTokens(t,null)[0]))},e.parse=function(t,n,r){if(r[1].type!==u.TokenType.L_PAREN)throw SyntaxError("If statement needs to be followed by a condition encased in parenthesis.");var o=[];for(o.push(e.parseConditional(r));r.length>0&&u.TokenType.ELSE_IF===r[0].type;)o.push(e.parseConditional(r));return r.length>0&&u.TokenType.ELSE===r[0].type&&(r.splice(0,1),o.push(new l.ConditionalNode(new p.LiteralNode(!0),u.Tree.processTokens(u.Tree.getBlockTokens(r,null)[0])))),new e(o)},e}(c.Node);e.IfStatementNode=f},8673:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.InNode=void 0;var s=n(7754),u=function(t){function e(e,n,r){void 0===r&&(r=!1);var o=t.call(this)||this;return o.left=e,o.right=n,o.flip=r,o}return o(e,t),e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i;return a(this,(function(a){switch(a.label){case 0:return[4,this.left.evaluate(t,e,n)];case 1:return r=a.sent(),[4,this.right.evaluate(t,e,n)];case 2:return o=a.sent(),i=o.indexOf(r)>-1,this.flip&&(i=!i),[2,i]}}))}))},e.prototype._getChildNodes=function(){return[this.left,this.right]},e.match=function(t){return t[0].type===s.TokenType.IN||t[0].type===s.TokenType.NOT&&t[1].type===s.TokenType.IN},e.parse=function(t,n,r){var o=r[0].type===s.TokenType.NOT;o&&r.splice(0,1),r.splice(0,1);var i=s.Tree.getNextStatementTokens(r,!1,!1,!0);return new e(t,s.Tree.processTokens(i),o)},e}(n(8403).Node);e.InNode=u},2020:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.IndexNode=void 0;var s=n(7754),u=function(t){function e(e,n,r){void 0===r&&(r=null);var o=t.call(this)||this;return o.object=e,o.index=n,o.indexTwo=r,o}return o(e,t),e.prototype._getChildNodes=function(){var t=[this.object,this.index];return this.indexTwo&&t.push(this.indexTwo),t},e.prototype.negativeIndex=function(t,e){return Number.isFinite(e)&&e<0?t.length+e:e},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,s,u,c,l,p,f;return a(this,(function(a){switch(a.label){case 0:return[4,this.object.evaluate(t,e,n)];case 1:return r=a.sent(),i=this.negativeIndex,s=[r],[4,this.index.evaluate(t,e,n)];case 2:return o=i.apply(this,s.concat([a.sent()])),Number.isFinite(o)&&this.indexTwo?(c=this.negativeIndex,l=[r],[4,this.indexTwo.evaluate(t,e,n)]):[3,4];case 3:for(u=c.apply(this,l.concat([a.sent()])),p=[],f=o;f<=u;f++)p.push(r[f]);return[2,p];case 4:return[2,r[o]]}}))}))},e.match=function(t){return t[0].type===s.TokenType.L_BRACKET},e.parse=function(t,n,r){for(var o=[],i=0,a=s.Tree.getBlockTokens(r,s.TokenType.COLON);i<a.length;i++){var u=a[i];o.push(s.Tree.processTokens(u))}return new e(t,o[0],o.length>1&&o[1])},e}(n(8403).Node);e.IndexNode=u},8052:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.LiteralNode=void 0;var s=function(t){function e(e){var n=t.call(this)||this;return n.value=e,n}return o(e,t),e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,this.value]}))}))},e}(n(8403).Node);e.LiteralNode=s},2393:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ModifierNode=void 0;var s=function(t){function e(e,n){var r=t.call(this)||this;return r.name=e,r.block=n,r}return o(e,t),e.prototype.prepare=function(t,e,n,r){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,null]}))}))},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){return a(this,(function(t){return[2,null]}))}))},e.parse=function(t,e,n){var r=n.shift().value.substr(1);return t.modifiers.push(r),t},e}(n(8403).Node);e.ModifierNode=s},8403:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Node=void 0;var o=function(){function t(){this.requiresPrep=!1,this.nodeCache={},this.modifiers=[]}return t.prototype.isPreparationRequired=function(){if(this.requiresPrep)return!0;if(void 0!==this._isPreparationRequired)return this._isPreparationRequired;for(var t=0,e=this.getChildNodes();t<e.length;t++){if(e[t].isPreparationRequired())return this._isPreparationRequired=!0,!0}return!1},t.prototype.prepare=function(t,e,o,i){return void 0===o&&(o=null),void 0===i&&(i=null),n(this,void 0,void 0,(function(){var n,a;return r(this,(function(r){switch(r.label){case 0:n=0,a=this.getChildNodes(),r.label=1;case 1:return n<a.length?[4,a[n].prepare(t,e,o,i)]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.cleanup=function(t,e,o){return n(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:n=0,i=this.getChildNodes(),r.label=1;case 1:return n<i.length?[4,i[n].cleanup(t,e,o)]:[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype._getChildNodes=function(){return[]},t.prototype.getChildNodes=function(){return void 0===this.childNodes&&(this.childNodes=this._getChildNodes()),this.childNodes},t.prototype.findChildrenByType=function(t){return this.findChildrenByTypes([t])},t.prototype.findChildrenByTypes=function(t,e){if(void 0===e&&(e=null),null!==e&&this.nodeCache[e])return this.nodeCache[e];for(var n=[],r=0,o=this.getChildNodes();r<o.length;r++)for(var i=o[r],a=0,s=t;a<s.length;a++){var u=s[a];i instanceof u&&n.push(i);var c=i.findChildrenByType(u);n.push.apply(n,c)}return null!==e&&(this.nodeCache[e]=n),n},t}();e.Node=o},2321:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.NotNode=void 0;var s=n(7754),u=function(t){function e(e){var n=t.call(this)||this;return n.toFlip=e,n}return o(e,t),e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){return a(this,(function(r){switch(r.label){case 0:return[4,this.toFlip.evaluate(t,e,n)];case 1:return[2,!r.sent()]}}))}))},e.prototype._getChildNodes=function(){return[this.toFlip]},e.parse=function(t,n,r){var o;return r.splice(0,1),o=r[0].type===s.TokenType.L_PAREN?s.Tree.getNextStatementTokens(r):s.Tree.consumeTypes(r,[s.TokenType.BOOLEAN_LITERAL,s.TokenType.NUMBER_LITERAL,s.TokenType.STRING_LITERAL,s.TokenType.NAME,s.TokenType.PERIOD]),new e(s.Tree.processTokens(o))},e}(n(8403).Node);e.NotNode=u},1185:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.NumberLiteralNode=void 0;var i=function(t){function e(e){var n=t.call(this,e)||this;return n.value=e,n.value.indexOf(".")>-1?n.value=parseFloat(n.value):n.value=parseInt(n.value),n}return o(e,t),e}(n(8052).LiteralNode);e.NumberLiteralNode=i},9446:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectNode=void 0;var u=n(4843),c=n(7754),l=function(t){function e(e,n){var r=t.call(this)||this;return r.keys=e,r.values=n,r}return o(e,t),e.prototype._getChildNodes=function(){return new(Array.bind.apply(Array,s([void 0],this.values)))},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,s,c,l,p;return a(this,(function(a){switch(a.label){case 0:r=new u.Scope,o=0,a.label=1;case 1:return o<this.values.length?(i=this.keys[o],s=this.values[o],l=(c=r).set,[4,i.evaluate(t,e,n)]):[3,5];case 2:return p=[a.sent()],[4,s.evaluate(t,e,n)];case 3:l.apply(c,p.concat([a.sent()])),a.label=4;case 4:return o++,[3,1];case 5:return[2,r]}}))}))},e.match=function(t){return t[0].type===c.TokenType.L_BRACE},e.parse=function(t,n,r){for(var o=c.Tree.getNextStatementTokens(r),i=[],a=[];o.length>0;){var s=c.Tree.getTokensUntil(o,c.TokenType.COLON,!1);if(o[0].type!==c.TokenType.COLON)throw Error("Invalid object literal syntax. Expecting :");o.splice(0,1);var u=c.Tree.getTokensUntil(o,c.TokenType.COMMA,!0,!1,!0,{type:c.BlockType.STATEMENT,open:null,close:null,openCharacter:null,closeCharacter:null});i.push(c.Tree.processTokens(s)),a.push(c.Tree.processTokens(u))}return new e(i,a)},e}(n(8403).Node);e.ObjectNode=l},1096:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.OnNode=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.prepare=function(e,n,r,o){return void 0===r&&(r=null),i(this,void 0,void 0,(function(){var s,u,c=this;return a(this,(function(l){switch(l.label){case 0:return s=null==o?void 0:o.ClassNodePrepare,!r||s?[3,2]:[4,this.getFunction(e,n,r)];case 1:u=l.sent(),r.addEventHandler(this.name,[],(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(c,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,u.apply(void 0,t)];case 1:return e.sent(),[4,this.collectGarbage()];case 2:return e.sent(),[2]}}))}))}),this),l.label=2;case 2:return[4,t.prototype.prepare.call(this,e,n,r,o)];case 3:return l.sent(),[2]}}))}))},e.parse=function(n,r,o){return t.parse.call(this,n,r,o,e)},e}(n(3484).FunctionNode);e.OnNode=s},4123:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.RootScopeMemberNode=void 0;var s=n(4843),u=function(t){function e(e){var n=t.call(this)||this;return n.name=e,n}return o(e,t),e.prototype._getChildNodes=function(){return[this.name]},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o;return a(this,(function(i){switch(i.label){case 0:return[4,this.name.evaluate(t,e,n)];case 1:return r=i.sent(),[4,this.applyModifiers(r,t,e,n)];case 2:return i.sent(),[2,(o=t.get(r))instanceof s.Scope&&o.wrapped||o]}}))}))},e}(n(4829).ScopeNodeAbstract);e.RootScopeMemberNode=u},7549:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeMemberNode=void 0;var s=n(4843),u=n(1008),c=n(3276),l=n(3770),p=function(t){function e(e,n){var r=t.call(this)||this;return r.scope=e,r.name=n,r}return o(e,t),e.prototype._getChildNodes=function(){return[this.scope,this.name]},e.prototype.evaluate=function(t,e,n){return void 0===n&&(n=null),i(this,void 0,void 0,(function(){var r,o,i,p,f,h,y,d,b,v,_;return a(this,(function(a){switch(a.label){case 0:return r=[],o=[],this.scope instanceof l.ElementQueryNode?[4,this.scope.evaluate(t,e,n)]:[3,2];case 1:return i=a.sent(),this.scope.first?r.push(i):r=i,[3,4];case 2:return[4,this.scope.evaluate(t,e,n)];case 3:(p=a.sent())instanceof u.TagList?r=p:r.push(p),a.label=4;case 4:f=0,h=r,a.label=5;case 5:return f<h.length?((y=h[f])instanceof c.DOMObject&&(y=y.scope),y?[3,7]:(d=Error,b='Cannot access "',[4,this.name.evaluate(t,e,n)])):[3,11];case 6:throw d.apply(void 0,[b+a.sent()+'" of undefined.']);case 7:return[4,this.name.evaluate(t,e,n)];case 8:return v=a.sent(),[4,this.applyModifiers(v,y,e,n)];case 9:a.sent(),_=y.get(v,!1),o.push(_ instanceof s.Scope&&_.wrapped||_),a.label=10;case 10:return f++,[3,5];case 11:return[2,1===o.length?o[0]:o]}}))}))},e}(n(4829).ScopeNodeAbstract);e.ScopeMemberNode=p},4829:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeNodeAbstract=void 0;var s=n(8403),u=n(1371),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.applyModifiers=function(t,e,n,r){return i(this,void 0,void 0,(function(){var n,r,o,i;return a(this,(function(a){for(r=0,o=this.modifiers;r<o.length;r++)if(i=o[r],u.Registry.instance.types.has(i)){n=i;break}return n&&e.setType(t,n),[2]}))}))},e}(s.Node);e.ScopeNodeAbstract=c},5155:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.StringFormatNode=void 0;var s=n(8403),u=n(7754),c=function(t){function e(e,n){var r=t.call(this)||this;return r.segments=e,r.value=n,r}return o(e,t),e.prototype.getChildNodes=function(){return this.segments&&Object.values(this.segments)||[]},e.prototype.evaluate=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,u,c;return a(this,(function(a){switch(a.label){case 0:for(i in r=this.value,o=[],this.segments)o.push(i);s=0,a.label=1;case 1:return s<o.length?(u=o[s],[4,this.segments[u].evaluate(t,e,n)]):[3,4];case 2:c=a.sent(),r=r.replace("${"+u+"}",c),a.label=3;case 3:return s++,[3,1];case 4:return[2,r]}}))}))},e.parse=function(t,n,r){for(var o={},i=0,a=Array.from(new Set(n.value.match(/\$\{([^}]+)}/g)));i<a.length;i++){var s=a[i].split(/\$\{|}/)[1],c=new u.Tree(s);o[s]=c.root}return r.shift(),new e(o,n.value)},e.match=function(t){return t[0].type===u.TokenType.STRING_FORMAT},e}(s.Node);e.StringFormatNode=c},2751:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.UnitLiteralNode=e.UnitLiteral=void 0;var i=n(8052),a=function(){function t(t){this._value=t,this.value=this._value}return Object.defineProperty(t.prototype,"amount",{get:function(){return this._amount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unit",{get:function(){return this._unit},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){return""+this._amount+this._unit},set:function(t){t.indexOf(".")>-1?this._amount=parseFloat(t):this._amount=parseInt(t),isNaN(this._amount)&&(this._amount=0);var e=/[^\d.]+$/.exec(t);this._unit=e&&e[0]||""},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this.value},t}();e.UnitLiteral=a;var s=function(t){function e(e){return t.call(this,new a(e))||this}return o(e,t),e}(i.LiteralNode);e.UnitLiteralNode=s},4789:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.XHRNode=void 0;var s=n(8403),u=n(7754),c=n(4843),l=n(6966),p=n(4264),f=function(t){function e(e,n,r){var o=t.call(this)||this;return o.left=e,o.requestType=n,o.url=r,o}return o(e,t),e.prototype.getChildNodes=function(){var t=[this.url];return this.left&&t.push(this.left),t},e.prototype.evaluate=function(t,e,n){return i(this,void 0,void 0,(function(){var r,o,i,s,f,h,y;return a(this,(function(a){switch(a.label){case 0:return[4,this.url.evaluate(t,e,n)];case 1:return r=a.sent(),this.left?[4,this.left.evaluate(t,e,n)]:[3,3];case 2:return s=a.sent(),[3,4];case 3:s={},a.label=4;case 4:switch((i=s)instanceof c.Scope&&(i=i.data),i instanceof l.ScopeDataAbstract&&(i=i.getData()),this.requestType){case u.TokenType.XHR_POST:o="POST";break;case u.TokenType.XHR_PUT:o="PUT";break;case u.TokenType.XHR_DELETE:o="DELETE";break;default:o="GET"}return"GET"===(f={method:o}).method?r=p.VisionHelper.getUriWithParams(r,i):f.body="string"==typeof i?i:JSON.stringify(i),[4,fetch(r,f)];case 5:return h=a.sent(),(y=h.headers.get("content-type"))&&y.includes("application/json")?[4,h.json()]:[3,7];case 6:return[2,a.sent()];case 7:return[4,h.text()];case 8:return[2,a.sent()]}}))}))},e.parse=function(t,n,r){r.splice(0,1);var o=u.Tree.processTokens(u.Tree.getNextStatementTokens(r,!1,!1,!1));return new e(t,n.type,o)},e.match=function(t){return[u.TokenType.XHR_POST,u.TokenType.XHR_PUT,u.TokenType.XHR_GET,u.TokenType.XHR_DELETE].indexOf(t[0].type)>-1},e}(s.Node);e.XHRNode=f},5092:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Attribute=e.AttributeState=void 0;var s,u=n(4264),c=n(5559);!function(t){t[t.Instantiated=0]="Instantiated",t[t.Deferred=1]="Deferred",t[t.Compiled=2]="Compiled",t[t.Setup=3]="Setup",t[t.Extracted=4]="Extracted",t[t.Connected=5]="Connected",t[t.Built=6]="Built"}(s=e.AttributeState||(e.AttributeState={}));var l=function(t){function e(e,n){var r=t.call(this)||this;return r.tag=e,r.attributeName=n,r.configure(),u.VisionHelper.window&&u.VisionHelper.window.Attributes.push(r),r}return o(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),e.prototype.defer=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(s.Deferred),[2]}))}))},e.prototype.configure=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(s.Instantiated),[2]}))}))},e.prototype.compile=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(s.Compiled),[2]}))}))},e.prototype.setup=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(s.Setup),[2]}))}))},e.prototype.extract=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(s.Extracted),[2]}))}))},e.prototype.connect=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(s.Connected),[2]}))}))},e.prototype.evaluate=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){return this.setState(s.Built),[2]}))}))},e.prototype.getAttributeValue=function(t){return void 0===t&&(t=null),this.tag.getRawAttributeValue(this.attributeName,t)},e.prototype.getAttributeBinding=function(t){return void 0===t&&(t=null),this.tag.getAttributeBinding(this.attributeName)||t},e.prototype.getAttributeModifiers=function(t){void 0===t&&(t=[]);var e=this.tag.getAttributeModifiers(this.attributeName);return e.length&&e||t},e.prototype.hasModifier=function(t){return this.getAttributeModifiers().indexOf(t)>-1},e.prototype.mutate=function(t){},Object.defineProperty(e.prototype,"value",{get:function(){return this.tag.element.getAttribute(this.attributeName)||""},set:function(t){this.tag.element.setAttribute(this.attributeName,t)},enumerable:!1,configurable:!0}),e.prototype.setState=function(t){var e=this._state;this._state=t,this.dispatch("state",{state:t,previousState:e,attribute:this})},e.create=function(t,e,n){return new n(t,e)},e.scoped=!1,e.canDefer=!0,e}(c.EventDispatcher);e.Attribute=l},44:function(t,e,n){var r=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.benchmarkResultsAll=e.benchmarkResultsMatch=e.benchmarkResults=e.benchmarkEnd=e.benchmarkStart=e.benchmark=e.BENCHMARKS=void 0;var o=n(4264);e.BENCHMARKS=[];var i={};function a(t){return(t=t instanceof Array?t:t&&[t]||[]).map((function(t){return t.toLowerCase()}))}function s(t,e){return(e=r([],a(e))).sort(),e.length&&(t+"."+e.join(".")).toLowerCase()||t&&t.toLowerCase()||"nopath"}function u(t,e,n,r){return void 0===r&&(r=null),(r instanceof Date||Number.isFinite(r))&&(!Number.isFinite(n)&&n instanceof Date&&(n=n.getTime()),!Number.isFinite(r)&&r instanceof Date&&(r=r.getTime()),n=r-n),{name:t,tags:e=a(e),path:s(t,e),time:n}}function c(t,e){for(var n in t=a(t),e=a(e))if(-1===t.indexOf(n))return!1;return!0}function l(t,n,r){return void 0===r&&(r=!1),function(i,s,c){if(o.VisionHelper.doBenchmark){var l=c.value;c.value=function(){for(var o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];t=i.__BENCHMARK_NAME__||t||s,n=a(n),(i.__BENCHMARK_NAME__||i.__BENCHMARK_TAGS__)&&(n.push(t||s),n.push.apply(n,i.__BENCHMARK_TAGS__));var p=new Date,f=l.apply(this,o),h=new Date,y=u(t,n,p,h);return e.BENCHMARKS.push(y),r&&console.log(y),f}}}}function p(t,e){o.VisionHelper.doBenchmark&&(t=s(t,e),i[t]=new Date)}function f(t,n,r){if(void 0===r&&(r=null),o.VisionHelper.doBenchmark){var a=s(t,n),c=u(t,n,i[a],new Date);if(e.BENCHMARKS.push(c),r||null===r&&c.time>10){var l=c.path?t+"["+c.path+"]":t;console.warn(l+" took "+c.time+"ms to complete.")}return p(t),c}}function h(t,n){if(void 0===n&&(n=null),o.VisionHelper.doBenchmark){for(var r=s(t,n),i=0,a=0,u=0,l=e.BENCHMARKS;u<l.length;u++){var p=l[u];(!n&&p.name===t||p.path===r||!t&&c(p.tags,n))&&(i++,a+=p.time)}return{name:t,calls:i,time:a,average:a/i}}}function y(t){if(o.VisionHelper.doBenchmark){for(var n={},r=0,i=0,a=0,s=e.BENCHMARKS;a<s.length;a++){var u=s[a];t.test(u.name)&&!n[u.name]&&(n[u.name]=h(u.name),r+=n[u.name].calls,i+=n[u.name].time)}return n.ALL={name:"ALL",calls:r,time:i,average:i/r},n}}function d(){if(o.VisionHelper.doBenchmark){for(var t={},n=0,r=0,i=0,a=e.BENCHMARKS;i<a.length;i++){var s=a[i];if(!t[s.name]){var u=s.path?s.name+"."+s.path:s.name;t[u]=h(s.name,s.tags),n+=t[u].calls,r+=t[u].time}}return t.ALL={name:"ALL",calls:n,time:r,average:r/n},t}}e.benchmark=l,e.benchmarkStart=p,e.benchmarkEnd=f,e.benchmarkResults=h,e.benchmarkResultsMatch=y,e.benchmarkResultsAll=d,o.VisionHelper.doBenchmark&&o.VisionHelper.window&&(window.benchmark=l,window.benchmarks=e.BENCHMARKS,window.benchmarkStart=p,window.benchmarkEnd=f,window.benchmarkResults=h,window.benchmarkResultsMatch=y,window.benchmarkResultsAll=d)},6417:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Configuration=void 0;var i=n(4264),a=function(t){function e(){var e=t.call(this)||this;return e.data=i.VisionHelper.window&&window.$configuration||{},e}return o(e,t),e.prototype.get=function(t,e){return void 0===e&&(e=null),void 0===this.data[t]?e:this.data[t]},e.prototype.set=function(t,e){var n=this.data[t];this.data[t]=e,this.dispatch("change:"+t,{value:e,previous:n}),this.dispatch("change",{key:t,value:e,previous:n})},e.set=function(t,n){e.instance.set(t,n)},e.get=function(t,n){return void 0===n&&(n=null),e.instance.get(t,n)},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e}(n(5559).EventDispatcher);e.Configuration=a},126:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Controller=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,n){this._scope=t,this._tag=e,this._element=n},e.prototype.get=function(t){var e;return null===(e=this._scope)||void 0===e?void 0:e.get(t)},e.prototype.set=function(t,e){var n;null===(n=this._scope)||void 0===n||n.set(t,e)},e}(n(1525).ScopeData);e.Controller=i},9033:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.DOM=e.EQuerySelectDirection=void 0;var u,c=n(712),l=n(2712),p=n(6417),f=n(7754),h=n(1008),y=n(2144),d=n(7942),b=n(5559),v=n(2947);!function(t){t[t.ALL=0]="ALL",t[t.UP=1]="UP",t[t.DOWN=2]="DOWN"}(u=e.EQuerySelectDirection||(e.EQuerySelectDirection={}));var _=function(t){function e(e,n,r){void 0===n&&(n=!0),void 0===r&&(r=!1);var o=t.call(this)||this;return o.rootElement=e,o.debug=r,o.queued=[],o.observer=new MutationObserver(o.mutation.bind(o)),o.tags=[],o.window=new y.WrappedWindow(window),o.document=new d.WrappedDocument(window.document),n&&o.buildFrom(e,!0),o.evaluate(),p.Configuration.instance.on("change",o.evaluate.bind(o)),o}return o(e,t),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!1,configurable:!0}),e.prototype.get=function(t,e,n,r){return void 0===e&&(e=!1),void 0===n&&(n=null),void 0===r&&(r=u.DOWN),i(this,void 0,void 0,(function(){var o;return a(this,(function(i){switch(i.label){case 0:switch(t){case"window":return[3,1];case"document":return[3,2];case"body":return[3,3]}return[3,4];case 1:return[2,new h.TagList(this.window)];case 2:return[2,new h.TagList(this.document)];case 3:return[2,new h.TagList(this.root)];case 4:return o=void 0,o=r===u.DOWN?this.querySelectorAll(t,n):r===u.UP?[this.querySelectorClosest(t,n)]:this.querySelectorAll(t),[4,this.getTagsForElements(Array.from(o),e)];case 5:return[2,i.sent()]}}))}))},e.prototype.getFromTag=function(t,e,n){return void 0===n&&(n=!1),i(this,void 0,void 0,(function(){var r;return a(this,(function(o){switch(o.label){case 0:return r=this.querySelectorElement(t.element,e),[4,this.getTagsForElements(Array.from(r),n)];case 1:return[2,o.sent()]}}))}))},e.prototype.registerElementInRoot=function(t){var e=t.element.getAttribute("id");e&&this.root.scope.set("#"+e,t.scope)},e.prototype.querySelectorClosest=function(t,e){return void 0===e&&(e=null),e.element.closest(t)},e.prototype.querySelectorAll=function(t,e){void 0===e&&(e=null);var n=e&&!t.startsWith("#")?e.element:this.rootElement;return this.querySelectorElement(n,t)},e.prototype.querySelectorElement=function(t,e){var n=e.indexOf(":parent");if(n>-1){var r=e.substring(0,n),o=e.substring(n+7);if(r.length>0){for(var i=[],a=0,s=Array.from(this.querySelectorElement(t,r));a<s.length;a++){var u=s[a];o.length>0?i.push.apply(i,Array.from(this.querySelectorElement(u.parentElement,o))):i.push(u.parentElement)}return i}return 0===o.length?[t.parentElement]:this.querySelectorElement(t.parentElement,o)}return t.querySelectorAll(e)},e.prototype.querySelector=function(t){return this.rootElement.querySelector(t)},e.prototype.exec=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,(e=new f.Tree(t)).prepare(this.root.scope,this)];case 1:return n.sent(),[4,e.evaluate(this.root.scope,this)];case 2:return[2,n.sent()]}}))}))},e.prototype.evaluate=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:clearTimeout(this.evaluateTimeout),t=0,e=this.tags,n.label=1;case 1:return t<e.length?[4,e[t].evaluate()]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.mutation=function(t){return i(this,void 0,void 0,(function(){var e,n,r,o,i,s,u,c;return a(this,(function(a){switch(a.label){case 0:e=0,n=t,a.label=1;case 1:return e<n.length?(r=n[e],[4,this.getTagForElement(r.target)]):[3,9];case 2:return(o=a.sent())&&o.mutate(r),"attributes"!==r.type||"class"!==r.attributeName?[3,4]:[4,v.ClassNode.checkForClassChanges(r.target,this,o)];case 3:a.sent(),a.label=4;case 4:i=0,s=Array.from(r.removedNodes),a.label=5;case 5:return i<s.length?(u=s[i],[4,this.getTagForElement(u)]):[3,8];case 6:(c=a.sent())&&c.deconstruct(),a.label=7;case 7:return i++,[3,5];case 8:return e++,[3,1];case 9:return[2]}}))}))},e.prototype.buildFrom=function(t,e){return void 0===e&&(e=!1),i(this,void 0,void 0,(function(){var n,r,o,i,s,u,p,f,h,y,d,b,_,g,w,m,O,T,A,E,S,x,P,j,k,N,R;return a(this,(function(a){switch(a.label){case 0:for(n=[],e&&(document.body.setAttribute("vsn-root",""),document.ondragover=function(t){return t.cancelable&&t.preventDefault()}),r=0,o=this.tags;r<o.length;r++)R=o[r],n.push(R.element);if(i=[],s=[],u=[],t&&t.querySelectorAll)for(p=0,f=Array.from(t.querySelectorAll("*"));p<f.length;p++)d=f[p],l.ElementHelper.hasVisionAttribute(d)&&(d.hasAttribute("vsn-template")&&"template"===d.tagName||u.indexOf(d.parentElement)>-1?u.push(d):this.queued.indexOf(d)>-1||(this.queued.push(d),s.push(d)));for(h=0,y=s;h<y.length;h++)d=y[h],n.indexOf(d)>-1||(R=new c.Tag(d,this),this.tags.push(R),i.push(R),n.push(d));return e?(b=this,[4,this.getTagForElement(document.body)]):[3,2];case 1:b._root=a.sent(),a.label=2;case 2:_=0,g=i,a.label=3;case 3:return _<g.length?[4,(R=g[_]).buildAttributes()]:[3,6];case 4:a.sent(),a.label=5;case 5:return _++,[3,3];case 6:w=0,m=i,a.label=7;case 7:return w<m.length?[4,(R=m[w]).compileAttributes()]:[3,10];case 8:a.sent(),a.label=9;case 9:return w++,[3,7];case 10:O=0,T=i,a.label=11;case 11:return O<T.length?[4,(R=T[O]).setupAttributes()]:[3,14];case 12:a.sent(),a.label=13;case 13:return O++,[3,11];case 14:A=0,E=i,a.label=15;case 15:return A<E.length?[4,(R=E[A]).extractAttributes()]:[3,18];case 16:a.sent(),a.label=17;case 17:return A++,[3,15];case 18:S=0,x=i,a.label=19;case 19:return S<x.length?[4,(R=x[S]).connectAttributes()]:[3,22];case 20:a.sent(),a.label=21;case 21:return S++,[3,19];case 22:P=0,j=i,a.label=23;case 23:return P<j.length?[4,(R=j[P]).finalize()]:[3,26];case 24:a.sent(),this.queued.splice(this.queued.indexOf(R.element),1),a.label=25;case 25:return P++,[3,23];case 26:k=0,N=i,a.label=27;case 27:return k<N.length?(R=N[k],this.observer.observe(R.element,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),[4,v.ClassNode.checkForClassChanges(R.element,this,R)]):[3,30];case 28:a.sent(),a.label=29;case 29:return k++,[3,27];case 30:return this.dispatch("built"),[2]}}))}))},e.prototype.getTagsForElements=function(t,e){return void 0===e&&(e=!1),i(this,void 0,void 0,(function(){var n,r,o,i,u,c,l,p,f,y,d,b;return a(this,(function(a){switch(a.label){case 0:for(n=new h.TagList,r=[],o=0,i=this.tags;o<i.length;o++)u=i[o],t.indexOf(u.element)>-1&&(n.push(u),r.push(u.element));if(!e)return[3,4];for(c=s([],t),l=c.length;l>=0;l--)y=c[l],r.indexOf(y)>-1&&c.pop();p=0,f=c,a.label=1;case 1:return p<f.length?(y=f[p],b=(d=n).push,[4,this.getTagForElement(y,e)]):[3,4];case 2:b.apply(d,[a.sent()]),a.label=3;case 3:return p++,[3,1];case 4:return[2,n]}}))}))},e.prototype.getTagForElement=function(t,e){return void 0===e&&(e=!1),i(this,void 0,void 0,(function(){var n,r,o;return a(this,(function(i){switch(i.label){case 0:for(n=0,r=this.tags;n<r.length;n++)if((o=r[n]).element===t)return[2,o];return t&&e?(t instanceof HTMLElement&&t.setAttribute("vsn-ref",""),[4,this.buildFrom(t.parentElement||t)]):[3,3];case 1:return i.sent(),[4,this.getTagForElement(t,!1)];case 2:return[2,i.sent()];case 3:return[2,null]}}))}))},e.prototype.getTagForScope=function(t){return i(this,void 0,void 0,(function(){var e,n,r;return a(this,(function(o){for(e=0,n=this.tags;e<n.length;e++)if((r=n[e]).scope===t)return[2,r];return[2,null]}))}))},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e(document,!1,!1)),e._instance},enumerable:!1,configurable:!0}),e}(b.EventDispatcher);e.DOM=_},3276:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DOMObject=void 0;var i=function(t){function e(e,n){var r=t.call(this)||this;return r.element=e,r._uniqueScope=!1,r}return o(e,t),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope?this._scope:null},set:function(t){this._scope=t},enumerable:!1,configurable:!0}),e.prototype.watchAttribute=function(t){},e.prototype.watchStyle=function(t){},e.prototype.deconstruct=function(){var e;this._uniqueScope&&(null===(e=this.scope)||void 0===e||e.deconstruct()),t.prototype.deconstruct.call(this)},e}(n(5559).EventDispatcher);e.DOMObject=i},7942:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedDocument=void 0;var i=function(t){function e(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=t.call(this,e,n)||this;return o._document=e,o}return o(e,t),e}(n(3276).DOMObject);e.WrappedDocument=i},2144:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedWindow=void 0;var i=n(3276),a=n(4843),s=function(t){function e(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=t.call(this,e,n)||this;return o._window=e,o._scope=new a.Scope,o.scope.set("@scrollY",o._window.scrollY),o.scope.set("@scrollX",o._window.scrollX),e.addEventListener("scroll",o.onScroll.bind(o),{passive:!0}),o}return o(e,t),e.prototype.onScroll=function(t){this.scope.set("@scrollY",this._window.scrollY),this.scope.set("@scrollX",this._window.scrollX)},e}(i.DOMObject);e.WrappedWindow=s},5559:function(t,e){var n=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.EventDispatcher=e.EventCallback=void 0;var r=function(){function t(t,e,n,r){this.fnc=t,this.key=e,this.once=n,this.context=r,this.calls=0}return t.prototype.call=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return!(this.once&&this.calls>0)&&((t=this.fnc).apply.apply(t,n([this.context],e)),this.calls+=1,!0)},t}();e.EventCallback=r;var o=function(){function t(){this._allListeners=[],this._relays=[],this._lastKey=0,this._listeners={},t.sources.push(this)}return t.prototype.deconstruct=function(){for(var e in this.dispatch("deconstruct",this),t.sources.splice(t.sources.indexOf(this),1),this._listeners)delete this._listeners[e]},t.prototype.addRelay=function(t){this._relays.push(t)},t.prototype.removeRelay=function(t){this._relays.indexOf(t)>-1&&this._relays.splice(this._relays.indexOf(t),1)},t.prototype.on=function(t,e,n,o){return o=o||!1,this._lastKey++,this._listeners[t]=this._listeners[t]||[],this._listeners[t].push(new r(e,this._lastKey,o,n)),this._lastKey},t.prototype.once=function(t,e,n){return this.on(t,e,n,!0)},t.prototype.off=function(t,e){if(!(t in this._listeners))return!1;if(!e)return this._listeners[t]=[],!0;for(var n=0,r=this._listeners[t];n<r.length;n++){var o=r[n];if(e==o.key)return this._listeners[t].splice(this._listeners[t].indexOf(o),1),!0}return!1},t.prototype.offWithContext=function(t,e){if(!(t in this._listeners))return 0;for(var n=[],r=0,o=0,i=this._listeners[t];o<i.length;o++){e==(u=i[o]).context&&n.push(u)}for(var a=0,s=n;a<s.length;a++){var u=s[a];this._listeners[t].splice(this._listeners[t].indexOf(u),1),r++}return r},t.prototype.getListener=function(t,e){for(var n=0,r=this._listeners[t];n<r.length;n++){var o=r[n];if(e==o.key)return o}},t.prototype.all=function(t,e,n){return n=n||!1,this._lastKey++,this._allListeners.push(new r(t,this._lastKey,n,e)),this._lastKey},t.prototype.none=function(t){for(var e=0,n=this._allListeners;e<n.length;e++){var r=n[e];if(t==r.key)return this._allListeners.splice(this._allListeners.indexOf(r),1),!0}return!1},t.prototype.noneWithContext=function(t){for(var e=[],n=0,r=0,o=this._allListeners;r<o.length;r++){t==(s=o[r]).context&&e.push(s)}for(var i=0,a=e;i<a.length;i++){var s=a[i];this._allListeners.splice(this._allListeners.indexOf(s),1),n++}return n},t.prototype.dispatch=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(t in this._listeners)for(var o=0;o<this._listeners[t].length;o++){(s=this._listeners[t][o]).once&&(this.off(t,s.key),o--),s.call(e)}for(var i=0,a=this._allListeners;i<a.length;i++){var s;(s=a[i]).once&&this.none(s.key),s.call(e)}for(var u=0,c=this._relays;u<c.length;u++){var l=c[u];l.dispatch.apply(l,n([t],e))}},t.sources=[],t}();e.EventDispatcher=o},8001:function(t,e,n){var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Formats=void 0;var o=n(1371),i=n(6417),a=function(){function t(){}return t.currency=function(e){if(!t.CurrencyFormatter){var n=function(){var e=i.Configuration.get("locale","en-US"),n=i.Configuration.get("currency","USD");t.CurrencyFormatter=new Intl.NumberFormat(e,{style:"currency",currency:n})};i.Configuration.instance.on("change:locale",n),i.Configuration.instance.on("change:currency",n),n()}return e=(""+e).replace(/[^0-9.]+/,""),t.CurrencyFormatter.format(parseFloat(e))},t.date=function(t){return t?t.toLocaleString():""},r([o.Registry.format("currency")],t,"currency",null),r([o.Registry.format("date")],t,"date",null),t}();e.Formats=a},9188:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageList=void 0;var n=function(){function t(t){this.reset(),t&&this.merge(t)}return t.prototype.reset=function(){var t=this.keys;if(this._cachedList=void 0,t.length>0)for(var e=0,n=t;e<n.length;e++){delete this[n[e]]}},t.prototype.add=function(t,e,n){var r;void 0===n&&(n=!1),this.merge(((r={})[t]="string"==typeof e?[e]:e,r),n)},t.prototype.merge=function(t,e){var n=this;if(void 0===e&&(e=!1),t){this._cachedList=void 0;var r=this.keys,o=function(o){if(!t.hasOwnProperty(o))return"continue";var a=t[o];a instanceof Array&&(!e&&r.indexOf(o)>-1?a.map((function(t){n[o].push(t)})):a.length>0&&(i[o]=a))},i=this;for(var a in t)o(a)}},Object.defineProperty(t.prototype,"list",{get:function(){if(this._cachedList)return this._cachedList;for(var t={},e=0,n=this.keys;e<n.length;e++){var r=n[e];t[r]=this[r]}return this._cachedList=t,t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){var t=Object.keys(this);return t.splice(t.indexOf("_cachedList"),1),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this.keys.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.length},enumerable:!1,configurable:!0}),t}();e.MessageList=n},5453:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Model=void 0;var i=n(9188),a=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._hasErrors=!1,e&&n.setData(e),n._lastData=n.getData(),n._constructor(),n}return o(e,t),e.prototype._constructor=function(){},e.prototype.validate=function(){this._hasErrors=!1,this._errors=new i.MessageList;for(var t=0,e=this.getProperties();t<e.length;t++){var n=e[t],r=this["__"+n].validate();r.length>0&&(this._errors.add(n,r,!0),this._hasErrors=!0)}return this._errors},e.prototype.hasErrors=function(){return this.validate(),this._hasErrors},Object.defineProperty(e.prototype,"errors",{get:function(){return this._errors},enumerable:!1,configurable:!0}),e}(n(1525).ScopeData);e.Model=a},7677:function(t,e,n){var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Query=void 0;var i=n(1008),a=n(4264),s=n(9033),u=n(2144),c=n(7942);e.Query=function(t,e){return void 0===e&&(e=null),r(this,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:return a.VisionHelper.document?[4,(e=e||s.DOM.instance).get(t,!0)]:[3,2];case 1:return 1==(n=r.sent()).length||1==n.length&&(n[0]instanceof u.WrappedWindow||n[0]instanceof c.WrappedDocument)?[2,n[0]]:[2,n];case 2:return[2,new i.TagList]}}))}))}},1371:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Registry=e.RegistryStore=e.register=void 0;var i=n(5559),a=n(9045);function s(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),function(r,o){void 0===o&&(o=null),e=e||r.prototype.constructor.name,null!==o&&(r=r[o]),c.instance[t].register(e,r),n&&n()}}e.register=s;var u=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n.timeouts={},n.store=e||{},n}return o(e,t),e.prototype.register=function(t,e){this.store[t]=e,this.dispatch("register",t,e),this.dispatch("registered:"+t,e)},e.prototype.get=function(t){var e=this,n=a.SimplePromise.defer();return this.store[t]?n.resolve(this.store[t]):(console.warn("Waiting for "+t+" to be registered."),this.timeouts[t]=setTimeout((function(){console.warn("RegistryStore.get timed out after 5 seconds trying to find "+t+". Make sure the item is registered.")}),5e3),this.once("registered:"+t,(function(r){clearTimeout(e.timeouts[t]),n.resolve(r)}))),n.promise},e.prototype.getSynchronous=function(t){return this.store[t]},e.prototype.has=function(t){return!!this.store[t]},Object.defineProperty(e.prototype,"keys",{get:function(){return Object.keys(this.store)},enumerable:!1,configurable:!0}),e}(i.EventDispatcher);e.RegistryStore=u;var c=function(t){function e(){var e=t.call(this)||this;return e.functions=new u,e.controllers=new u,e.classes=new u,e.models=new u,e.templates=new u,e.types=new u,e.validators=new u,e.formats=new u,e.attributes=new u,e}return o(e,t),e.function=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),s("functions",t,e)},e.class=function(t){e.instance.classes.register(t.name,t)},e.controller=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),s("controllers",t,e)},e.model=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),s("models",t,e)},e.template=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),s("templates",t,e)},e.type=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),s("types",t,e)},e.validator=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),s("validators",t,e)},e.format=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),s("formats",t,e)},e.attribute=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=null),s("attributes",t,e)},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e}(i.EventDispatcher);e.Registry=c},4843:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionScope=e.Scope=void 0;var a=n(5559),s=n(414),u=n(4880),c=n(8572),l=n(1525),p=n(1469),f=function(t){function e(e){var n=t.call(this)||this;return e&&(n.parentScope=e),n.children=[],n._data=new p.DynamicScopeData({}),n._data.addRelay(n),n}return o(e,t),Object.defineProperty(e.prototype,"data",{get:function(){return this._data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentScope",{get:function(){return this._parentScope},set:function(t){t?(this._parentScope=t,t.addChild(this)):this._parentScope&&(this._parentScope.removeChild(this),this._parentScope=null)},enumerable:!1,configurable:!0}),e.prototype.addChild=function(t){this.children.push(t)},e.prototype.removeChild=function(t){var e=this.children.indexOf(t);e>-1&&this.children.splice(e,1)},e.prototype.getReference=function(t,n){void 0===n&&(n=!0);var r=t.split("."),o=r[0],i=this,a=null,c=r.length;if(t.startsWith("?"))return new u.QueryReference(t,i);for(var l=0;l<c;l++){o=r[l],a=i.get(o,0===l);var p=[null,void 0].indexOf(a)>-1;if(n&&p&&l+1<c)a=new e(i),i.set(o,a);else if(!n&&p)return null;a&&a instanceof e&&(i=a)}return new s.ScopeReference(i,o,a)},e.prototype.get=function(t,e){void 0===e&&(e=!0);var n=this._data[t];return void 0===n?e&&this.parentScope?this.parentScope.get(t,e):"":n},e.prototype.set=function(t,e){this._data.hasProperty(t)||this._data.createProperty(t),this._data[t]=e},Object.defineProperty(e.prototype,"keys",{get:function(){return this._data.keys},enumerable:!1,configurable:!0}),e.prototype.has=function(t){return this._data.hasProperty(t)},e.prototype.setType=function(t,e){this._data.getProperty(t,!0).type=e,this.has(t)&&this.set(t,this.get(t))},e.prototype.getType=function(t){var e=this._data.getProperty(t);return null==e?void 0:e.type},e.prototype.extend=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];this.set(r,t[r])}},e.prototype.clear=function(){for(var t=0,e=this._data.keys;t<e.length;t++){var n=e[t];["function","object"].indexOf(typeof this.get(n))>-1||this.set(n,null)}},e.prototype.cleanup=function(){this.children.length=0,this.parentScope=null},e.prototype.collectGarbage=function(t){void 0===t&&(t=!1);for(var e=0,n=this.children;e<n.length;e++){n[e].collectGarbage(t)}t&&this.cleanup()},e.prototype.deconstruct=function(){t.prototype.deconstruct.call(this),this.collectGarbage(!0)},e.prototype.wrap=function(t,n,r){var o=this;if(void 0===n&&(n=!1),void 0===r&&(r=!0),t instanceof l.ScopeData)return this._data instanceof a.EventDispatcher&&(this._data.removeRelay(this),this._data.deconstruct()),this.wrapped=t,this._data=t,void this._data.addRelay(this);if(t instanceof e&&(t=t._data),-1===[null,void 0].indexOf(this.wrapped))throw Error("A scope can only wrap a single object");if(!t)throw Error("Can only wrap objects.");if(t.$wrapped)throw Error("An object should only be wrapped once.");this.wrapped=t,this.wrapped.$wrapped=!0;var s=function(a){if(["constructor"].indexOf(a)>-1||a.startsWith("$"))return"continue";if(u.wrapped[a]instanceof Function)return u.set(a,u.wrapped[a]),"continue";if(u.wrapped[a]instanceof Array&&(u.wrapped[a]instanceof c.WrappedArray||(u.wrapped[a]=new(c.WrappedArray.bind.apply(c.WrappedArray,i([void 0],t[a])))),u.wrapped[a].on("change",(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];o.dispatch.apply(o,i(["change:"+a],t))}))),"object"==typeof u.wrapped[a]&&u.wrapped[a]&&u.wrapped[a].constructor===Object){var s=new e(u);s.wrap(u.wrapped[a]),u.wrapped[a]=s}r&&-1===[null,void 0].indexOf(u.wrapped[a])&&u.set(a,u.wrapped[a]);Object.defineProperty(u.wrapped,a,{get:function(){return o.get(a)},set:function(t){o.set(a,t)},enumerable:!0,configurable:!0}),n&&u.dispatch("change:"+a)},u=this;for(var p in t)s(p);this.wrapped.get=this.get.bind(this),this.wrapped.set=this.set.bind(this),this.wrapped.on=this.on.bind(this),this.wrapped.once=this.once.bind(this),this.wrapped.off=this.off.bind(this)},e.prototype.unwrap=function(){if(this.wrapped){var t=this.wrapped;for(var e in this.wrapped=null,t.$wrapped=!1,t)delete t[e]}},e.fromObject=function(t,n){var r=new e(n);return r.wrap(t),r},e}(a.EventDispatcher);e.Scope=f;var h=function(t){function e(e){var n=t.call(this,e)||this;return n.addRelay(e),n}return o(e,t),e.prototype.set=function(e,n){this.parentScope&&(this.parentScope.has(e)||["$","@"].indexOf(e[0])>-1)?this.parentScope.set(e,n):t.prototype.set.call(this,e,n)},e.prototype.collectGarbage=function(e){void 0===e&&(e=!0),t.prototype.collectGarbage.call(this,!0),this.cleanup()},e}(f);e.FunctionScope=h},1469:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicScopeData=void 0;var i=function(t){function e(e){var n=t.call(this)||this;if(e instanceof Array)for(var r=0,o=e;r<o.length;r++){var i=o[r];n.createProperty(i)}else n.setData(e);return n}return o(e,t),e.prototype.setData=function(e){for(var n=0,r=Object.keys(e);n<r.length;n++){var o=r[n];this.hasProperty(o)||this.createProperty(o)}t.prototype.setData.call(this,e)},e.prototype.on=function(e,n,r,o){return 0==e.indexOf("change:")&&this.createProperty(e.substr(7)),t.prototype.on.call(this,e,n,r,o)},e}(n(6966).ScopeDataAbstract);e.DynamicScopeData=i},4880:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryReference=void 0;var s=n(9033),u=function(t){function e(e,n){var r=t.call(this)||this;return r.path=e,r.scope=n,r}return o(e,t),e.prototype.getScope=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:return t=(t=this.path.split(".")).splice(0,t.length-1),[4,s.DOM.instance.exec(t.join("."))];case 1:return[2,1===(e=n.sent()).length?e[0].scope:e.map((function(t){return t.scope}))]}}))}))},e.prototype.getKey=function(){return i(this,void 0,void 0,(function(){var t;return a(this,(function(e){return[2,(t=this.path.split("."))[t.length-1]]}))}))},e.prototype.getValue=function(){return i(this,void 0,void 0,(function(){return a(this,(function(t){switch(t.label){case 0:return[4,s.DOM.instance.exec(this.path)];case 1:return[2,t.sent()]}}))}))},e}(n(414).ScopeReference);e.QueryReference=u},1525:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeData=void 0;var i=function(t){function e(){for(var e=t.call(this)||this,n=0,r=e.__properties__.splice(0,e.__properties__.length);n<r.length;n++){!function(t,e){if(t["__"+e+"__"]){t.__properties__.push(e);var n=t["__"+e+"__"],r=n[0],o=n[1]||{};t.createProperty(e,r,o)}}(e,r[n])}return e}return o(e,t),e}(n(6966).ScopeDataAbstract);e.ScopeData=i},6966:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeDataAbstract=void 0;var a=n(9380),s=function(t){function e(){var e=t.call(this)||this;return e.__properties__||(e.__properties__=[]),e}return o(e,t),e.prototype.createProperty=function(t,e,n){var r=this;void 0===e&&(e=a.Property);var o=new e((n=n||{}).default,n),s=Object.getOwnPropertyDescriptor(this,t);this["__"+t]=o,this.__properties__.push(t);var u=s?s.get:function(){return o.value},c=s?s.set:function(t){o.value=t};return delete this[t],Object.defineProperty(this,t,{get:u,set:c,enumerable:!0,configurable:!0}),o.on("change",(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];r.dispatch.apply(r,i(["change",t],e)),r.dispatch.apply(r,i(["change:"+t],e))})),o},e.prototype.hasProperty=function(t){return-1!==this.__properties__.indexOf(t)},Object.defineProperty(e.prototype,"keys",{get:function(){return i([],this.__properties__)},enumerable:!1,configurable:!0}),e.prototype.getKeys=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,o=this.keys;r<o.length;r++){var i=o[r],a=this.getProperty(i);a.hasLabels(t)&&n.push(i)}return n},e.prototype.setData=function(t){var e=this.getProperties();for(var n in t)e.indexOf(n)>-1&&(this[n]=t[n])},e.prototype.getData=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n={};t:for(var r=0,o=this.getProperties();r<o.length;r++){for(var i=o[r],a=this["__"+i],s=0,u=t;s<u.length;s++){var c=u[s];if(!a.hasLabel(c))continue t}null!=this[i]&&a&&(n[i]=a.clean())}return n},e.prototype.getProperties=function(){return this.__properties__},e.prototype.getProperty=function(t,e){void 0===e&&(e=!1);var n=this["__"+t];return e&&!n&&(n=this.createProperty(t)),n},e.prototype.bindToProperties=function(t,e,n){for(var r=0,o=e;r<o.length;r++){var i=this["__"+o[r]];i&&i.on(t,n)}},e.prototype.setLastData=function(){this._lastData=this.getData()},e.prototype.revert=function(){this.setData(this._lastData)},e.prototype.isModified=function(){for(var t=this._lastData,e=this.getData(),n=0,r=this.getProperties();n<r.length;n++){var o=r[n];if(e[o]!=t[o])return!0}return!1},e}(n(5559).EventDispatcher);e.ScopeDataAbstract=s},414:function(t,e){var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeReference=void 0;var o=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),this._scope=t,this._key=e,this._value=n}return t.prototype.getScope=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,this._scope]}))}))},t.prototype.getKey=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,this._key]}))}))},t.prototype.getValue=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){return[2,this._value]}))}))},t}();e.ScopeReference=o},8572:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.WrappedArray=void 0;var a=n(5559),s=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return o.$wrapped=!0,Object.setPrototypeOf(o,e.prototype),o.dispatcher=new a.EventDispatcher,o}return o(e,t),e.prototype.dispatch=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(e=this.dispatcher).dispatch.apply(e,i([t],n))},e.prototype.on=function(t,e){this.dispatcher.on(t,e)},e.prototype.off=function(t,e){this.dispatcher.off(t,e)},e.prototype.once=function(t,e){this.dispatcher.once(t,e)},e.prototype.push=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.prototype.push.apply(this,e);this.dispatch.apply(this,i(["push"],e)),this.dispatch("change",{added:e});for(var o=0,a=e;o<a.length;o++){var s=a[o];this.dispatch("add",s)}return r},e.prototype.remove=function(t){var e=this.indexOf(t);return-1!==e&&(this.splice(e,1),!0)},e.prototype.pop=function(){var e=t.prototype.pop.call(this);return this.dispatch("pop",e),this.dispatch("change",{removed:[e]}),this.dispatch("remove",e),e},e.prototype.shift=function(){var e=t.prototype.shift.call(this);return this.dispatch("shift",e),this.dispatch("change",{removed:[e]}),this.dispatch("remove",e),e},e.prototype.splice=function(e,n){var r=t.prototype.splice.call(this,e,n);this.dispatch("change",{removed:r});for(var o=0,i=r;o<i.length;o++){var a=i[o];this.dispatch("remove",a)}return r},e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.prototype.concat.apply(this,e);this.dispatch("change",{added:r});for(var o=0,i=r;o<i.length;o++){var a=i[o];this.dispatch("add",a)}return r},e.prototype.filter=function(n,r){var o=t.prototype.filter.call(this,n,r);return new(e.bind.apply(e,i([void 0],o)))},e.prototype.get=function(t){return["length"].indexOf(t)>-1?this[t]:void 0},Object.defineProperty(e.prototype,"length",{get:function(){for(var t=0,e=0;e<this.length;e++){this[e];t+=1}return t},set:function(t){this.setLength(t)},enumerable:!1,configurable:!0}),e.prototype.setLength=function(t){for(var e=0,n=[],r=0;r<this.length;r++){var o=this[r];(e+=1)>=t&&n.push(o)}for(var i=0,a=n;i<a.length;i++){o=a[i];this.splice(this.indexOf(o),1)}},e}(Array);e.WrappedArray=s},6691:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayProperty=void 0;var a=n(9380),s=n(8572),u=function(t){function e(e,n){var r=t.call(this,new s.WrappedArray,n)||this;return r.allKey=r._value.dispatcher.all(r.relayEvent.bind(r),r),void 0!==e&&(r.value=e),r}return o(e,t),e.prototype.deconstruct=function(){this._value.dispatcher.none(this.allKey),t.prototype.deconstruct.call(this)},e.prototype.relayEvent=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.dispatch.apply(this,i(["change"],e))},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t instanceof Array||(t=[t]),this._value instanceof s.WrappedArray){this._value.splice(0,this._value.length);for(var e=0;e<t.length;e++)this._value.push(t[e])}else t instanceof s.WrappedArray&&(this._value=t)},enumerable:!1,configurable:!0}),e.prototype.clean=function(){return Array.from(this._value)},e}(a.Property);e.ArrayProperty=u},9380:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.Property=e.property=void 0;var i=n(5559),a=n(1371);e.property=function(t,e){return void 0===t&&(t=s),void 0===e&&(e={}),function(n,r){null==n.__properties__&&(n.__properties__=[]),-1==n.__properties__.indexOf(r)&&n.__properties__.push(r);Object.defineProperty(n,"__"+r+"__",{get:function(){return[t,e]},set:function(t){},enumerable:!1,configurable:!0})}};var s=function(t){function e(e,n){var r=t.call(this)||this;return r._type="any",r.config=n,r.config.labels||(r.config.labels=[]),r.config.validators||(r.config.validators=[]),r.type=n.type||"any",r.value=e,r}return o(e,t),e.prototype.castType=function(t){var e=a.Registry.instance.types.getSynchronous(this.type);return e?e(t):t},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){var e=this._value;this._value=this.castType(t),this._value!==e&&this.dispatch("change",{oldValue:e,value:t})},enumerable:!1,configurable:!0}),e.prototype.clean=function(){return this.value},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type!=t&&(this._type=t,this.value=this.value)},enumerable:!1,configurable:!0}),e.prototype.validate=function(){for(var t=[],e=0,n=this.config.validators||[];e<n.length;e++){var r=n[e];t.concat(r(this.value))}return t},e.prototype.getValidator=function(t){var e=a.Registry.instance.validators.getSynchronous(t);if(!e)throw new Error("Invalid validator "+t);return e},e.prototype.addValidator=function(t){"string"==typeof t&&(t=this.getValidator(t)),-1==this.config.validators.indexOf(t)&&this.config.validators.push(t)},e.prototype.addLabel=function(t){null==this.config.labels&&(this.config.labels=[]),-1==this.config.labels.indexOf(t)&&this.config.labels.push(t)},e.prototype.removeLabel=function(t){if(null!=this.config.labels){var e=this.config.labels.indexOf(t);-1!=e&&this.config.labels.splice(e,1)}},e.prototype.hasLabel=function(t){return-1!==this.config.labels.indexOf(t)},e.prototype.hasLabels=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(!this.hasLabel(r))return!1}return!0},e}(i.EventDispatcher);e.Property=s},9618:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayProperty=e.property=e.Property=void 0;var r=n(9380);Object.defineProperty(e,"Property",{enumerable:!0,get:function(){return r.Property}}),Object.defineProperty(e,"property",{enumerable:!0,get:function(){return r.property}});var o=n(6691);Object.defineProperty(e,"ArrayProperty",{enumerable:!0,get:function(){return o.ArrayProperty}})},9045:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.SimplePromise=e.noop=e.EPromiseStates=void 0;var i,a=n(5559);!function(t){t[t.PENDING=0]="PENDING",t[t.FULFILLED=1]="FULFILLED",t[t.REJECTED=2]="REJECTED"}(i=e.EPromiseStates||(e.EPromiseStates={})),e.noop=function(t){return t};var s=function(t){function e(e){var n=t.call(this)||this;n._result=null,n._state=i.PENDING,n.promiseClass=Object.getPrototypeOf(n).constructor;try{e(n._resolve.bind(n),n._reject.bind(n))}catch(t){n._reject(t)}return n}return o(e,t),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this._result},enumerable:!1,configurable:!0}),e.defer=function(){var t=new e((function(t,e){}));return{promise:t,resolve:t._resolve.bind(t),reject:t._reject.bind(t)}},e.resolve=function(t){return new e((function(n){t instanceof e?t.then((function(t){n(t)})):n(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){for(var n=e.defer(),r=!0,o=0,a=t;o<a.length;o++){var s=a[o];if(s.state==i.PENDING)r=!1,s.once("fulfilled",(function(r){e.poolResults(t,n)})),s.once("rejected",(function(t){n.reject(t)}));else if(s.state==i.REJECTED){n.reject(s.result),r=!1;break}}return r&&e.poolResults(t,n),n.promise},e.poolResults=function(t,e){for(var n=!0,r=[],o=0,a=t;o<a.length;o++){var s=a[o];if(s.state===i.REJECTED){e.reject(s.result);break}s.state===i.PENDING&&(n=!1),r.push(s.result)}n&&e.resolve(r)},e.race=function(t){for(var n=e.defer(),r=0,o=t;r<o.length;r++){var i=o[r];i.once("fulfilled",(function(t){n.resolve(t)})),i.once("rejected",(function(t){n.reject(t)}))}return n.promise},e.prototype.then=function(t,e){var n=this;return new this.promiseClass((function(r,o){n.state===i.FULFILLED?t&&r(t(n.result)):n.state===i.REJECTED?e&&o(e(n.result)):(n.once("fulfilled",(function(e){t&&r(t(e))})),n.once("rejected",(function(t){e&&o(e(t))})))}))},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.finally=function(t){return this.then((function(e){return t(e)}),(function(e){return t(e)}))},e.prototype._resolve=function(t){this.state===i.PENDING&&(this._state=i.FULFILLED,this._result=t,this.dispatch("fulfilled",t))},e.prototype._reject=function(t){this.state===i.PENDING&&(this._state=i.REJECTED,this._result=t,this.dispatch("rejected",t))},e}(a.EventDispatcher);e.SimplePromise=s},712:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},s=this&&this.__spreadArray||function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=e.TagState=void 0;var u,c=n(4843),l=n(5092),p=n(9033),f=n(126),h=n(4264),y=n(6032),d=n(8447),b=n(1371),v=n(44),_=n(3276),g=n(7754),w=n(1857);!function(t){t[t.Instantiated=0]="Instantiated",t[t.AttributesBuilt=1]="AttributesBuilt",t[t.AttributesCompiled=2]="AttributesCompiled",t[t.AttributesSetup=3]="AttributesSetup",t[t.AttributesExtracted=4]="AttributesExtracted",t[t.AttributesConnected=5]="AttributesConnected",t[t.Built=6]="Built"}(u=e.TagState||(e.TagState={}));var m=function(t){function e(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var a=t.call(this,n,o)||this;return a.dom=r,a.deferredAttributes=[],a.preppedClasses=[],a._nonDeferredAttributes=[],a._children=[],a.inputTags=["input","select","textarea"],n[e.TaggedVariable]=a,a.rawAttributes={},a.parsedAttributes={},a.attributes=[],a.onEventHandlers={},a.analyzeElementAttributes(),a._state=u.Instantiated,h.VisionHelper.window&&(h.VisionHelper.window.Tags||(h.VisionHelper.window.Tags=[],h.VisionHelper.window.Attributes=[]),h.VisionHelper.window.Tags.push(a)),a}return o(e,t),Object.defineProperty(e.prototype,"uniqueScope",{get:function(){return this._uniqueScope},enumerable:!1,configurable:!0}),e.prototype.onAttributeStateChange=function(t){t.previouseState===l.AttributeState.Deferred&&(this._nonDeferredAttributes.length=0)},Object.defineProperty(e.prototype,"nonDeferredAttributes",{get:function(){if(this._nonDeferredAttributes.length>0)return this._nonDeferredAttributes;var t=this.attributes.filter((function(t){return t.state!==l.AttributeState.Deferred}));return this._nonDeferredAttributes=t,t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.element.style},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"computedStyle",{get:function(){return h.VisionHelper.window&&window.getComputedStyle(this.element)||null},enumerable:!1,configurable:!0}),e.prototype.analyzeElementAttributes=function(){if(this.element.attributes&&!(this.element.attributes.length<=0))for(var t=0;t<this.element.attributes.length;t++){var e=this.element.attributes[t];if(this.rawAttributes[e.name]=e.value,e.name.indexOf(":")>-1){var n=e.name.split(":"),r=n.slice(1);r.push(e.value),this.parsedAttributes[n[0]]=r}else this.parsedAttributes[e.name]=[null,e.value]}},e.prototype.exec=function(t){return i(this,void 0,void 0,(function(){var e;return a(this,(function(n){switch(n.label){case 0:return[4,(e=new g.Tree(t)).prepare(this.scope,this.dom,this)];case 1:return n.sent(),[4,e.evaluate(this.scope,this.dom,this)];case 2:return[2,n.sent()]}}))}))},e.prototype.evaluate=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:t=0,e=this.nonDeferredAttributes,n.label=1;case 1:return t<e.length?[4,e[t].evaluate()]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))},e.prototype.mutate=function(t){this.attributes.map((function(e){return e.mutate(t)})),this.dispatch("mutate",t)},e.prototype.get=function(t){this.element.getAttribute(t)},e.prototype.set=function(t,e){this.element.setAttribute(t,e)},e.prototype.getAttributeClass=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){return t.startsWith("vsn-")?(t=this.getAttributeName(t),[2,b.Registry.instance.attributes.get(t)]):[2,null]}))}))},e.prototype.getAttributeName=function(t){if((t=t.split("|")[0]).indexOf(":")>-1){var e=t.split(":");t=e[0]}return t},e.prototype.getAttributeBinding=function(t){return(t=t.split("|")[0]).indexOf(":")>-1?t.split(":")[1]:null},e.prototype.getAttributeModifiers=function(t){return t.split("|").splice(1)},Object.defineProperty(e.prototype,"isInput",{get:function(){return this.inputTags.indexOf(this.element.tagName.toLowerCase())>-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSelect",{get:function(){return"select"===this.element.tagName.toLowerCase()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMultipleSelect",{get:function(){return this.isSelect&&this.element.hasAttribute("multiple")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.isInput?this.isMultipleSelect?Array.from(this.element.options).filter((function(t){return t.selected})).map((function(t){return t.value})):this.element.value:this.element.textContent},set:function(t){if(this.isInput)if(this.isMultipleSelect)for(var e=0,n=Array.from(this.element.options);e<n.length;e++){var r=n[e];r.selected=t.indexOf(r.value)>-1}else this.element.setAttribute("value",t),this.element.value=t;else this.element.innerText=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return!!this.isInput&&this.element.checked},set:function(t){this.isInput&&(t?(this.element.setAttribute("checked",""),this.element.checked=!0):(this.element.removeAttribute("checked"),this.element.checked=!1))},enumerable:!1,configurable:!0}),e.prototype.addChild=function(t){this._children.push(t)},Object.defineProperty(e.prototype,"children",{get:function(){return s([],this._children)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parentTag",{get:function(){if(!this._parentTag){for(var t=this.element.parentElement,n=!1;t;){if(t[e.TaggedVariable]){n=!0,this.parentTag=t[e.TaggedVariable];break}t=t.parentElement}if(!n&&p.DOM.instance.root!==this)return p.DOM.instance.root}return this._parentTag},set:function(t){this.element!==document.body&&(this._parentTag=t,t.addChild(this),this.scope!==t.scope&&(this.scope.parentScope=t.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope?this._scope:this.uniqueScope?this.createScope(!0):this.parentTag?this.parentTag.scope:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controller",{get:function(){return this._controller},set:function(t){this._controller=t},enumerable:!1,configurable:!0}),e.prototype.wrap=function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!0),h.VisionHelper.isConstructor(t)&&(t=new t),t instanceof f.Controller?(t.init(this.scope,this,this.element),this.controller=t):(t.$scope=this.scope,t.$tag=this,t.$el=this.element),this.scope.wrap(t,e,n),t},e.prototype.unwrap=function(){this.scope.unwrap()},e.prototype.removeFromDOM=function(){this.element.remove()},e.prototype.addToParentElement=function(){this.parentTag.element.appendChild(this.element)},e.prototype.hide=function(){this.element.hidden=!0},e.prototype.show=function(){this.element.hidden=!1},e.prototype.findAncestorByAttribute=function(t,e){return void 0===e&&(e=!1),e&&this.hasAttribute(t)?this:this.parentTag?this.parentTag.findAncestorByAttribute(t,!0):null},e.prototype.findDescendantsByAttribute=function(t,e){void 0===e&&(e=!1);var n=[];e&&this.hasAttribute(t)&&n.push(this);for(var r=0,o=this.children;r<o.length;r++){var i=o[r];n.concat(i.findDescendantsByAttribute(t,!0))}return n},e.prototype.findChildrenByAttribute=function(t){return this.children.filter((function(e){return e.hasAttribute(t)}))},e.prototype.hasAttribute=function(t){return!!this.parsedAttributes[t]},e.prototype.getAttribute=function(t){return i(this,void 0,void 0,(function(){var e,n,r,o;return a(this,(function(i){switch(i.label){case 0:return[4,b.Registry.instance.attributes.get(t)];case 1:if(!(e=i.sent()))return[2];for(n=0,r=this.attributes;n<r.length;n++)if((o=r[n])instanceof e)return[2,o];return[2]}}))}))},e.prototype.isMagicAttribute=function(t){return e.magicAttributes.indexOf(t)>-1},e.prototype.setElementAttribute=function(t,e){var n,r;if(this.isMagicAttribute(t)){if("@text"===t)this.element.innerText=e;else if("@html"===t)this.element.innerHTML=e,p.DOM.instance.buildFrom(this.element);else if("@value"===t)this.value=e;else if("@class"===t&&e){(n=this.element.classList).remove.apply(n,Array.from(this.element.classList));var o=e instanceof Array?e:[e];o.length&&(r=this.element.classList).add.apply(r,o)}}else this.element.setAttribute(t,e)},e.prototype.getElementAttribute=function(t){if(this.isMagicAttribute(t)){if("@text"===t)return this.element.innerText;if("@html"===t)return this.element.innerHTML;if("@value"===t)return this.value;if("@class"===t)return Array.from(this.element.classList)}return this.element.getAttribute(t)},e.prototype.getRawAttributeValue=function(t,e){return void 0===e&&(e=null),this.rawAttributes[t]?this.rawAttributes[t]:e},e.prototype.hasRawAttribute=function(t){return void 0!==this.getRawAttributeValue(t,void 0)},e.prototype.getParsedAttributeValue=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),this.parsedAttributes[t]&&this.parsedAttributes[t][e]||n},e.prototype.buildAttributes=function(){return i(this,void 0,void 0,(function(){var t,e,n,r,o,i,s,c,l;return a(this,(function(a){switch(a.label){case 0:for(o in t=!1,e=!1,this.attributes.length=0,n=h.VisionHelper.isMobile(),(null===this.element.offsetParent||this.hasAttribute("hidden")||this.hasAttribute("vsn-defer"))&&(e=!0),r=[],this.rawAttributes)r.push(o);i=0,a.label=1;case 1:return i<r.length?(s=r[i],this.hasModifier(s,"mobile")&&!n||this.hasModifier(s,"desktop")&&n?[3,4]:[4,this.getAttributeClass(s)]):[3,5];case 2:return(c=a.sent())?(c.scoped&&(t=!0),l=c.create(this,s,c),this.attributes.push(l),e&&c.canDefer?[4,l.defer()]:[3,4]):[3,4];case 3:a.sent(),this.deferredAttributes.push(l),l.on("state",this.onAttributeStateChange.bind(this)),a.label=4;case 4:return i++,[3,1];case 5:return this.element.getAttribute("id")&&(t=!0),t&&!this.uniqueScope&&(this._uniqueScope=!0),this._state=u.AttributesBuilt,[2]}}))}))},e.prototype.compileAttributes=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:t=0,e=this.nonDeferredAttributes,n.label=1;case 1:return t<e.length?[4,e[t].compile()]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return this._state=u.AttributesCompiled,[2]}}))}))},e.prototype.setupAttributes=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:h.VisionHelper.doBenchmark&&v.benchmarkStart("Tag.setupAttributes"),t=0,e=this.nonDeferredAttributes,n.label=1;case 1:return t<e.length?[4,e[t].setup()]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return h.VisionHelper.doBenchmark&&v.benchmarkEnd("Tag.setupAttributes","Attribute.setup"),this.dom.registerElementInRoot(this),h.VisionHelper.doBenchmark&&v.benchmarkEnd("Tag.setupAttributes","register"),this._state=u.AttributesSetup,this.callOnWrapped("$setup"),h.VisionHelper.doBenchmark&&v.benchmarkEnd("Tag.setupAttributes","$setup"),[2]}}))}))},e.prototype.extractAttributes=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:t=0,e=this.nonDeferredAttributes,n.label=1;case 1:return t<e.length?[4,e[t].extract()]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return this._state=u.AttributesExtracted,this.callOnWrapped("$extracted"),[2]}}))}))},e.prototype.connectAttributes=function(){return i(this,void 0,void 0,(function(){var t,e;return a(this,(function(n){switch(n.label){case 0:this.isInput&&this.addEventHandler("input",[],this.inputMutation,this),t=0,e=this.nonDeferredAttributes,n.label=1;case 1:return t<e.length?[4,e[t].connect()]:[3,4];case 2:n.sent(),n.label=3;case 3:return t++,[3,1];case 4:return this._state=u.AttributesConnected,this.callOnWrapped("$bound"),[2]}}))}))},e.prototype.inputMutation=function(t){if(this.isSelect){for(var e=this.element.selectedOptions,n=[],r=0;r<e.length;r++)n.push(e[r].value);for(var o=0,i=Array.from(this.element.options);o<i.length;o++){var a=i[o];n.indexOf(a.value)>-1?a.setAttribute("selected",""):a.removeAttribute("selected")}this.value=n.join(",")}else this.value=t.target.value},e.prototype.finalize=function(){this._state=u.Built,this.callOnWrapped("$built",this,this.scope,this.element),h.VisionHelper.nice(this.setupDeferredAttributes.bind(this))},e.prototype.callOnWrapped=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return!!(this._uniqueScope&&this.scope&&this.scope.wrapped&&this.scope.wrapped[t])&&((e=this.scope.wrapped)[t].apply(e,n),!0)},e.prototype.handleEvent=function(t,e){if(e&&e.stopPropagation(),this.onEventHandlers[t]){this.scope.set("$event",e),this.scope.set("$value",this.value);for(var n=0,r=this.onEventHandlers[t];n<r.length;n++){var o=r[n];o.handler.call(o.context,e)}}},e.prototype.hasModifier=function(t,e){return t.indexOf("|"+e)>-1},e.prototype.stripModifier=function(t,e){return t.replace("|"+e,"")},e.prototype.addEventHandler=function(t,e,n,r){void 0===r&&(r=null);var o=null;if(e.indexOf("active")>-1?o=!1:e.indexOf("passive")>-1&&(o=!0),!this.onEventHandlers[t]){this.onEventHandlers[t]=[];var i=d.On.WindowEvents.indexOf(t)>-1&&window?window:this.element,a={};(t.indexOf("touch")>-1||null!==o)&&(a.passive=null===o||o),i.addEventListener(t,this.handleEvent.bind(this,t),a)}this.onEventHandlers[t].push({handler:n,event:t,context:r})},e.prototype.removeEventHandler=function(t,e,n){if(void 0===n&&(n=null),this.onEventHandlers[t]){var r=this.onEventHandlers[t].find((function(t){return t.handler===e&&t.context===n}));r&&(this.onEventHandlers[t].splice(this.onEventHandlers[t].indexOf(r),1),0===this.onEventHandlers[t].length&&this.element.removeEventListener(t,this.handleEvent.bind(this,t)))}},e.prototype.removeContextEventHandlers=function(t){for(var e=0,n=Object.keys(this.onEventHandlers);e<n.length;e++)for(var r=n[e],o=0,i=this.onEventHandlers[r];o<i.length;o++){var a=i[o];a.context===t&&this.removeEventHandler(r,a.handler,t)}},e.prototype.createScope=function(t){return void 0===t&&(t=!1),this._scope||!t&&!this.uniqueScope||(this._uniqueScope=!0,this._scope=new c.Scope,this.parentTag&&(this.scope.parentScope=this.parentTag.scope)),this._scope},e.prototype.watchAttribute=function(t){return i(this,void 0,void 0,(function(){var e,n,r,o;return a(this,(function(i){switch(i.label){case 0:for(e=0,n=this.attributes;e<n.length;e++)if((r=n[e])instanceof y.StandardAttribute&&r.attributeName==t)return[2,r];return this.createScope(!0),o=new y.StandardAttribute(this,t),this.attributes.push(o),[4,this.setupAttribute(o)];case 1:return i.sent(),[2,o]}}))}))},e.prototype.watchStyle=function(t){return i(this,void 0,void 0,(function(){var t,e,n,r;return a(this,(function(o){switch(o.label){case 0:for(t=0,e=this.attributes;t<e.length;t++)if((n=e[t])instanceof w.StyleAttribute)return[2,n];return this.createScope(!0),r=new w.StyleAttribute(this,"style"),this.attributes.push(r),[4,this.setupAttribute(r)];case 1:return o.sent(),[2,r]}}))}))},e.prototype.setupAttribute=function(t){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,t.compile()];case 1:return e.sent(),[4,t.setup()];case 2:return e.sent(),[4,t.extract()];case 3:return e.sent(),[4,t.connect()];case 4:return e.sent(),[2]}}))}))},e.prototype.setupDeferredAttributes=function(){return i(this,void 0,void 0,(function(){var t,e,n;return a(this,(function(r){switch(r.label){case 0:t=0,e=this.deferredAttributes,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.setupAttribute(n)]):[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return this.deferredAttributes.length=0,[2]}}))}))},e.prototype.deconstruct=function(){this.attributes.forEach((function(t){return t.deconstruct()})),this.attributes.length=0,this._children.forEach((function(t){return t.deconstruct()})),this._children.length=0,t.prototype.deconstruct.call(this)},e.TaggedVariable="_vsn_tag",e.magicAttributes=["@text","@html","@class","@value"],e}(_.DOMObject);e.Tag=m},1008:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.TagList=void 0;var i=n(4264),a=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return Object.setPrototypeOf(o,e.prototype),o}return o(e,t),Object.defineProperty(e.prototype,"scope",{get:function(){return this[0].scope},enumerable:!1,configurable:!0}),e.prototype.on=function(t,e,n){return"function"==typeof e?this.forEach((function(n){return n.element.addEventListener(t,e)})):this.forEach((function(r){r.element.addEventListener(t,(function(t){t.target.matches(e)&&n(t)}))})),this},Object.defineProperty(e.prototype,"elements",{get:function(){return this.map((function(t){return t.element}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this[this.length-1]},enumerable:!1,configurable:!0}),e.prototype.removeClass=function(t){return this.forEach((function(e){return e.element.classList.remove(t)})),this},e.prototype.addClass=function(t){return this.forEach((function(e){return e.element.classList.add(t)})),this},e.prototype.css=function(t,e){var n=t.replace(/(-[a-z])/,(function(t){return t.replace("-","").toUpperCase()}));return this.forEach((function(t){return t.element.style[n]=e})),this},e}(Array);e.TagList=a,i.VisionHelper.inDevelopment&&i.VisionHelper.window&&(window.TagList=a)},3398:function(t,e,n){var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Types=void 0;var o=n(1371),i=function(){function t(){}return t.any=function(t){return t},t.string=function(t){return""+t},t.integer=function(t){return parseInt(t)},t.float=function(t){return t=(""+t).replace(/[^\d.]+/,""),parseFloat(t)},t.boolean=function(t){return-1===[0,"0",!1,"false",""].indexOf(t)},t.date=function(t){return new Date(Date.parse(t))},r([o.Registry.type("any")],t,"any",null),r([o.Registry.type("string")],t,"string",null),r([o.Registry.type("integer")],t,"integer",null),r([o.Registry.type("float")],t,"float",null),r([o.Registry.type("boolean")],t,"boolean",null),r([o.Registry.type("date")],t,"date",null),t}();e.Types=i},3463:function(t,e,n){var r=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Validators=void 0;var o=n(1371),i=function(){function t(){}return t.email=function(t){var e=[];return null==t||this._emailRegex.test(t)||e.push("Please enter a valid email address"),e},t.required=function(t){var e=[];return null!=t&&0!=t.length||e.push("This field is required"),e},t.positive=function(t){var e=[];return null!=t&&t<0&&e.push("Please enter a positive number"),e},t.negative=function(t){var e=[];return null!=t&&t>0&&e.push("Please enter a negative number"),e},t._emailRegex=/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i,r([o.Registry.validator("email")],t,"email",null),r([o.Registry.validator("required")],t,"required",null),r([o.Registry.validator("positive")],t,"positive",null),r([o.Registry.validator("negative")],t,"negative",null),t}();e.Validators=i},8041:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.AddClassIf=void 0;var u=n(523),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onChange=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent()?this.tag.element.classList.add(this.getAttributeBinding()):this.tag.element.classList.remove(this.getAttributeBinding()),[2]}}))}))},e=i([c.Registry.attribute("vsn-add-class-if")],e)}(u.If);e.AddClassIf=l},8171:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Bind=void 0;var u=n(5092),c=n(7754),l=n(1371),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.direction="both",e.formatter=function(t){return t},e}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,new c.Tree(this.getAttributeValue()).prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return e.sent(),[4,t.prototype.compile.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return this.property=this.getAttributeBinding(this.property),(e=this.getAttributeModifiers()).length&&(e.indexOf("from")>-1?this.direction="from":e.indexOf("to")>-1&&(this.direction="to")),[4,t.prototype.setup.call(this)];case 1:return n.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,n,r,o;return s(this,(function(i){switch(i.label){case 0:e=this.getAttributeValue();try{n=this.tag.scope.getReference(e)}catch(t){return console.error("error",t),[2]}return r=this,[4,n.getKey()];case 1:return r.key=i.sent(),o=this,[4,n.getScope()];case 2:return o.boundScope=i.sent(),this.valueFromElement&&this.updateFrom(),[4,t.prototype.extract.call(this)];case 3:return i.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.doUpdateTo&&(this.updateTo(),this.boundScope.on("change:"+this.key,this.updateTo,this)),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.evaluate=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.valueFromElement&&this.updateFrom(),this.updateTo(),[4,t.prototype.evaluate.call(this)];case 1:return e.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"value",{get:function(){return this.boundScope?this.boundScope.get(this.key,!1):null},set:function(t){this.boundScope&&this.boundScope.set(this.key,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"valueFromElement",{get:function(){return this.property?this.tag.getElementAttribute(this.property):this.tag.value},enumerable:!1,configurable:!0}),e.prototype.mutate=function(e){t.prototype.mutate.call(this,e),this.doUpdateFrom&&(!this.property&&["characterData","childList"].indexOf(e.type)>-1?this.updateFrom():this.property||"attributes"!=e.type||"value"!==e.attributeName?"attributes"===e.type&&e.attributeName==this.property&&this.updateFrom():this.updateFrom())},Object.defineProperty(e.prototype,"doUpdateFrom",{get:function(){return["both","to"].indexOf(this.direction)>-1},enumerable:!1,configurable:!0}),e.prototype.updateFrom=function(){if(this.doUpdateFrom){var t=this.valueFromElement;t="string"==typeof t&&t.trim()||t;var e=this.value;e="string"==typeof e&&e.trim()||e,(e=this.formatter(e))&&t==e||(this.value=t)}},Object.defineProperty(e.prototype,"doUpdateTo",{get:function(){return["both","from"].indexOf(this.direction)>-1},enumerable:!1,configurable:!0}),e.prototype.updateTo=function(){if(this.doUpdateTo){var t=this.formatter(this.value);this.property?this.tag.setElementAttribute(this.property,t):this.tag.value=t}},e.prototype.setFormatter=function(t){this.formatter=t},e.canDefer=!1,e=i([l.Registry.attribute("vsn-bind")],e)}(u.Attribute);e.Bind=p},3650:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ControllerAttribute=void 0;var u=n(5092),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return(e=this.tag.parentTag.scope)?(this.attributeKey=this.getAttributeBinding(),this.className=this.getAttributeValue(this.defaultClassName),[4,c.Registry.instance.controllers.get(this.className)]):[2];case 1:return n=r.sent(),this.instantiateClass(n),this.attributeKey&&e&&e.set(this.attributeKey,this.tag.scope),[4,t.prototype.setup.call(this)];case 2:return r.sent(),[2]}}))}))},e.prototype.instantiateClass=function(t){this.tag.wrap(t)},e.canDefer=!1,e.scoped=!0,e=i([c.Registry.attribute("vsn-controller")],e)}(u.Attribute);e.ControllerAttribute=l},4893:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.DisableIf=void 0;var u=n(523),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.onChange=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent()?this.tag.element.setAttribute("disabled","disabled"):this.tag.element.removeAttribute("disabled"),[2]}}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-disable-if")],e)}(u.If);e.DisableIf=l},6813:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Exec=void 0;var u=n(5092),c=n(7754),l=n(1371),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"code",{get:function(){return this.getAttributeValue()},enumerable:!1,configurable:!0}),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tree=new c.Tree(this.code),[4,this.tree.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return e.sent(),[4,t.prototype.compile.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return e.sent(),[4,t.prototype.extract.call(this)];case 2:return e.sent(),[2]}}))}))},e.canDefer=!1,e=i([l.Registry.attribute("vsn-exec")],e)}(u.Attribute);e.Exec=p},8289:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Format=void 0;var u=n(5092),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,n,r,o;return s(this,(function(i){switch(i.label){case 0:return e=this.getAttributeValue(null),n=this.getAttributeBinding(null),[4,c.Registry.instance.formats.get(e)];case 1:return r=i.sent(),o=n?"vsn-bind:"+n:"vsn-bind",[4,this.tag.getAttribute(o)];case 2:return i.sent().setFormatter(r),[4,t.prototype.extract.call(this)];case 3:return i.sent(),[2]}}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-format")],e)}(u.Attribute);e.Format=l},523:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.If=void 0;var u=n(5092),c=n(7754),l=n(1371),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=this.getAttributeValue(),this.tree=new c.Tree(e),[4,this.tree.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return n.sent(),[4,t.prototype.compile.call(this)];case 2:return n.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.evaluate()];case 1:return e.sent(),[4,t.prototype.extract.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.tree.bindToScopeChanges(this.tag.scope,this.onChange.bind(this),this.tag.dom,this.tag)];case 1:return e.sent(),[4,t.prototype.connect.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.evaluate=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this.onChange()];case 1:return e.sent(),[4,t.prototype.evaluate.call(this)];case 2:return e.sent(),[2]}}))}))},e.prototype.onChange=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent()?this.tag.show():this.tag.hide(),[2]}}))}))},e.canDefer=!1,e=i([l.Registry.attribute("vsn-if")],e)}(u.Attribute);e.If=p},9979:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.JSONAttribute=void 0;var u=n(1371),c=n(5092),l=n(4843),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,n,r,o,i,a,u;return s(this,(function(s){switch(s.label){case 0:e=this.getAttributeBinding();try{n=this.tag.scope.getReference(e)}catch(t){return console.error("error",t),[2]}return[4,n.getKey()];case 1:return r=s.sent(),[4,n.getScope()];case 2:return o=s.sent(),i="script"===this.tag.element.tagName.toLowerCase()?this.tag.element.innerText:unescape(this.getAttributeValue()),this.getAttributeBinding(),(a=JSON.parse(i))&&"object"==typeof a&&a.constructor===Object&&((u=new l.Scope(o)).wrap(a),o.set(r,u)),o.set(r,a),[4,t.prototype.extract.call(this)];case 3:return s.sent(),[2]}}))}))},e.canDefer=!1,e=i([u.Registry.attribute("vsn-json")],e)}(c.Attribute);e.JSONAttribute=p},9215:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyAbstract=void 0;var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.specificKey=null,e}return o(e,t),e.prototype.compile=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.specificKey=this.getAttributeBinding(),[4,t.prototype.compile.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.tag.addEventHandler("keydown",this.getAttributeModifiers(),this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.handleEvent=function(e){return i(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return n=!1,-1===[void 0,null,""].indexOf(this.specificKey)&&e.key.toLowerCase()!==this.specificKey&&e.code.toLowerCase()!==this.specificKey||(n=!0),n?[4,t.prototype.handleEvent.call(this,e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e}(n(8447).On);e.KeyAbstract=s},9459:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyDown=void 0;var u=n(9215),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tag.addEventHandler("keydown",this.getAttributeModifiers(),this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e=i([c.Registry.attribute("vsn-key-down")],e)}(u.KeyAbstract);e.KeyDown=l},7459:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.KeyUp=void 0;var u=n(9215),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tag.addEventHandler("keyup",this.getAttributeModifiers(),this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e=i([c.Registry.attribute("vsn-key-up")],e)}(u.KeyAbstract);e.KeyUp=l},1898:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.LazyAttribute=void 0;var u=n(1371),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loaded=!1,e}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,t.prototype.setup.call(this)];case 1:return e.sent(),this.eleTop=this.tag.element.getBoundingClientRect().top,[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return this.tag.addEventHandler("scroll",["passive"],this.handleEvent,this),[4,this.handleEvent()];case 1:return t.sent(),[2]}}))}))},e.prototype.handleEvent=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return!this.loaded&&window.scrollY+window.outerHeight>=this.eleTop?(this.loaded=!0,[4,this.handler.evaluate(this.tag.scope,this.tag.dom,this.tag)]):[3,2];case 1:t.sent(),this.tag.removeEventHandler("scroll",this.handleEvent,this),t.label=2;case 2:return[2]}}))}))},e=i([u.Registry.attribute("vsn-lazy")],e)}(n(8447).On);e.LazyAttribute=c},2496:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.List=void 0;var u=n(5092),c=n(8572),l=n(7754),p=n(2712),f=n(1371),h=n(9033),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=this.getAttributeBinding(),this.tree=new l.Tree(e),[4,this.tree.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return n.sent(),[4,t.prototype.compile.call(this)];case 2:return n.sent(),[2]}}))}))},e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(o){switch(o.label){case 0:return this.tag.element.children.length>0?(e=this.tag.element.children[0],[4,this.tag.dom.getTagForElement(e)]):[3,2];case 1:return n=o.sent(),e&&(e.hasAttribute("vsn-template")?(n.parentTag=this.tag,e.removeAttribute("vsn-template"),this.tag.element.removeChild(e),this.template=e):this.template=e.cloneNode(!0)),[3,4];case 2:return this.tag.hasRawAttribute("template")?[4,h.DOM.instance.exec(this.tag.getRawAttributeValue("template"))]:[3,4];case 3:(r=o.sent())instanceof Array&&1===r.length&&(r=r[0]),this.template=r.element.content.cloneNode(!0),o.label=4;case 4:return[4,t.prototype.setup.call(this)];case 5:return o.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(o){switch(o.label){case 0:return[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return e=o.sent(),[4,this.addExistingItems(e)];case 2:if(o.sent(),!this.tag.hasRawAttribute("initial-items"))return[3,6];n=parseInt(this.tag.getRawAttributeValue("initial-items")),r=0,o.label=3;case 3:return r<n?[4,this.add({})]:[3,6];case 4:o.sent(),o.label=5;case 5:return r++,[3,3];case 6:return[4,t.prototype.extract.call(this)];case 7:return o.sent(),[2]}}))}))},e.prototype.addExistingItems=function(t){return a(this,void 0,void 0,(function(){var e,n,r,o,i,a,u,l=this;return s(this,(function(s){switch(s.label){case 0:if(this.items=t||new c.WrappedArray,this.tags=[],!t)return[3,4];e=0,n=t,s.label=1;case 1:return e<n.length?(r=n[e],[4,this.add(r)]):[3,4];case 2:s.sent(),s.label=3;case 3:return e++,[3,1];case 4:o=0,i=Array.from(this.tag.element.querySelectorAll("*")),s.label=5;case 5:return o<i.length?(a=i[o],p.ElementHelper.hasVisionAttribute(a,"vsn-list-item")?[4,this.tag.dom.getTagForElement(a)]:[3,7]):[3,8];case 6:(u=s.sent())&&(this.tags.push(u),this.items.push(u.scope.wrapped||u.scope)),s.label=7;case 7:return o++,[3,5];case 8:return this.items instanceof c.WrappedArray||(this.items=new c.WrappedArray(this.items)),this.items.on("add",(function(t){l.add(t)})),this.items.on("remove",(function(t){l.remove(t)})),this.tag.scope.set("add",this.add.bind(this)),this.tag.scope.set("remove",this.remove.bind(this)),[2]}}))}))},Object.defineProperty(e.prototype,"listItemName",{get:function(){return this.tag.getRawAttributeValue("vsn-list-item-name","item")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"listItemModel",{get:function(){return this.tag.getRawAttributeValue("vsn-list-item-model","Object")},enumerable:!1,configurable:!0}),e.prototype.remove=function(t){for(var e=0;e<this.tags.length;e++){var n=this.tags[e],r=n.scope.get(this.listItemName);if([r,r.wrapped].indexOf(t)>-1)return n.removeFromDOM(),void this.tags.splice(e,1)}},e.prototype.add=function(t){return a(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(o){switch(o.label){case 0:return e=this.template.cloneNode(!0),n=e instanceof DocumentFragment?e.children[0]:e,this.tag.element.appendChild(n),[4,this.tag.dom.buildFrom(this.tag.element)];case 1:return o.sent(),[4,this.tag.dom.getTagForElement(n)];case 2:return r=o.sent(),this.tags.push(r),r.scope.clear(),t&&(r.unwrap(),r.wrap(t)),this.tag.dispatch("add",t),[2]}}))}))},e.canDefer=!1,e.scoped=!0,e=i([f.Registry.attribute("vsn-list")],e)}(u.Attribute);e.List=y},6846:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ListItem=void 0;var u=n(5092),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return o(e,t),n=e,Object.defineProperty(e.prototype,"list",{get:function(){return this._list},enumerable:!1,configurable:!0}),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,r;return s(this,(function(o){switch(o.label){case 0:if(this._list=this.tag.findAncestorByAttribute("vsn-list"),!this._list)throw Error(n.ERROR_NO_PARENT);return this.tag.scope.set(this.listItemName,this.tag.scope),[4,this.getList()];case 1:return e=o.sent().listItemModel,[4,c.Registry.instance.controllers.get(e)];case 2:return r=o.sent(),this.instantiateModel(r),[4,t.prototype.setup.call(this)];case 3:return o.sent(),[2]}}))}))},Object.defineProperty(e.prototype,"listItemName",{get:function(){return this.getAttributeBinding("item")},enumerable:!1,configurable:!0}),e.prototype.getList=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this._list.getAttribute("vsn-list")];case 1:return[2,t.sent()]}}))}))},e.prototype.configure=function(){return a(this,void 0,void 0,(function(){return s(this,(function(t){return[2]}))}))},e.prototype.instantiateModel=function(t){this.tag.wrap(t,!1,!0)},e.canDefer=!1,e.scoped=!0,e.ERROR_NO_PARENT="Cannot find list parent.",e=n=i([c.Registry.attribute("vsn-list-item")],e)}(u.Attribute);e.ListItem=l},274:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ListItemModel=void 0;var a=n(1371),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.canDefer=!1,e=i([a.Registry.attribute("vsn-list-item-model")],e)}(n(5092).Attribute);e.ListItemModel=s},3329:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.ModelAttribute=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.canDefer=!1,e}(n(3650).ControllerAttribute);e.ModelAttribute=i},1576:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Name=void 0;var u=n(5092),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){return(t=this.tag.scope.parentScope)&&t.set(this.tag.parsedAttributes["vsn-name"][1],this.tag.scope),[2]}))}))},e.canDefer=!1,e.scoped=!0,e=i([c.Registry.attribute("vsn-name")],e)}(u.Attribute);e.Name=l},8447:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.On=void 0;var u=n(5092),c=n(7754),l=n(1371),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=this.getAttributeValue(),this.handler=new c.Tree(e),[4,this.handler.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return n.sent(),[4,t.prototype.compile.call(this)];case 2:return n.sent(),[2]}}))}))},e.prototype.handleEvent=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.hasModifier("preventdefault")&&t.cancelable&&t.preventDefault(),[4,this.handler.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.tag.addEventHandler(this.getAttributeBinding(),this.getAttributeModifiers(),this.handleEvent,this),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.WindowEvents=["abort","afterprint","beforeprint","error","hashchange","load","popstate","resize","scroll","unload"],e=i([l.Registry.attribute("vsn-on")],e)}(u.Attribute);e.On=p},6338:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Referenced=void 0;var a=n(1371),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e=i([a.Registry.attribute("vsn-ref")],e)}(n(5092).Attribute);e.Referenced=s},6957:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.RootAttribute=void 0;var u=n(5092),c=n(4264),l=n(1371),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,n,r,o;return s(this,(function(i){switch(i.label){case 0:for(this.tag.scope.set("$mobile",c.VisionHelper.isMobile()),e=0,n=l.Registry.instance.functions.keys;e<n.length;e++)r=n[e],o=l.Registry.instance.functions.get(r),this.tag.scope.set(r,o);return l.Registry.instance.functions.on("register",this.registerFunction,this),[4,t.prototype.setup.call(this)];case 1:return i.sent(),[2]}}))}))},e.prototype.registerFunction=function(t,e){return a(this,void 0,void 0,(function(){return s(this,(function(n){return this.tag.scope.set(t,e),[2]}))}))},e.canDefer=!1,e.scoped=!0,e=i([l.Registry.attribute("vsn-root")],e)}(u.Attribute);e.RootAttribute=p},5930:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeAttribute=void 0;var u=n(5092),c=n(1371),l=n(7754),p=n(4843),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return(e=this.getAttributeValue())?(this.tree=new l.Tree(e),[4,this.tree.prepare(this.tag.scope,this.tag.dom,this.tag)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[4,t.prototype.compile.call(this)];case 3:return n.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,n,r,o,i;return s(this,(function(a){switch(a.label){case 0:return this.tree?[4,this.tree.evaluate(this.tag.scope,this.tag.dom,this.tag)]:[3,2];case 1:if(!((e=a.sent())instanceof p.Scope))throw new Error("vsn-scope value must be an object, got "+typeof e);for(n=0,r=e.data.keys;n<r.length;n++)o=r[n],this.tag.scope.set(o,e.data[o]);a.label=2;case 2:return(i=this.getAttributeBinding())&&this.tag.scope.parentScope.set(i,this.tag.scope),[4,t.prototype.extract.call(this)];case 3:return a.sent(),[2]}}))}))},e.canDefer=!1,e.scoped=!0,e=i([c.Registry.attribute("vsn-scope")],e)}(u.Attribute);e.ScopeAttribute=f},1085:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.ScopeChange=void 0;var u=n(5092),c=n(7754),l=n(1371),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.compile=function(){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return e=this.getAttributeValue(),this.handler=new c.Tree(e),[4,this.handler.prepare(this.tag.scope,this.tag.dom,this.tag)];case 1:return n.sent(),[4,t.prototype.compile.call(this)];case 2:return n.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){var e,n,r,o,i;return s(this,(function(a){switch(a.label){case 0:return e=this.getAttributeBinding(),[4,(n=this.tag.scope.getReference(e,!1)).getScope()];case 1:return o=(r=a.sent()).on,i="change:",[4,n.getKey()];case 2:return o.apply(r,[i+a.sent(),this.handleEvent.bind(this)]),[4,t.prototype.connect.call(this)];case 3:return a.sent(),[2]}}))}))},e.prototype.handleEvent=function(t){return a(this,void 0,void 0,(function(){return s(this,(function(t){switch(t.label){case 0:return[4,this.handler.evaluate(this.tag.scope,this.tag.dom,this.tag)];case 1:return t.sent(),[2]}}))}))},e.canDefer=!1,e=i([l.Registry.attribute("vsn-scope-change")],e)}(u.Attribute);e.ScopeChange=p},8616:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.ScriptAttribute=void 0;var a=n(1371),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"code",{get:function(){return this.tag.element.innerText},enumerable:!1,configurable:!0}),e=i([a.Registry.attribute("vsn-script")],e)}(n(6813).Exec);e.ScriptAttribute=s},3070:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.SetAttribute=void 0;var u=n(5092),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.boundScope?this.boundScope.get(this.key,!1):null},set:function(t){this.boundScope&&this.boundScope.set(this.key,t)},enumerable:!1,configurable:!0}),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(o){switch(o.label){case 0:this.property=this.getAttributeBinding();try{e=this.tag.scope.getReference(this.property)}catch(t){return[2]}return n=this,[4,e.getKey()];case 1:return n.key=o.sent(),r=this,[4,e.getScope()];case 2:return r.boundScope=o.sent(),[4,t.prototype.setup.call(this)];case 3:return o.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var t,e,n,r;return s(this,(function(o){for(t=this.getAttributeValue(null),e=0,n=this.getAttributeModifiers();e<n.length;e++)if(r=n[e],c.Registry.instance.types.getSynchronous(r)){this.boundScope.setType(this.key,r);break}return this.boundScope.set(this.key,t),[2]}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-set")],e)}(u.Attribute);e.SetAttribute=l},6032:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},a=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.StandardAttribute=void 0;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.tag.isMagicAttribute(this.key)||this.tag.element.hasAttribute(this.attributeName)||this.tag.element.setAttribute(this.attributeName,""),[4,t.prototype.setup.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.extract=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.updateFrom(),[4,t.prototype.extract.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.connect=function(){return i(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.tag.scope.on("change:"+this.key,this.updateTo.bind(this)),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.mutate=function(e){t.prototype.mutate.call(this,e),this.updateFrom()},Object.defineProperty(e.prototype,"needsToBeSynced",{get:function(){var t=this.tag.scope.get(this.key)||"",e=this.value;return t&&t.trim&&(t=t.trim()),e&&e.trim&&(e=e.trim()),t instanceof Array?!(e instanceof Array&&t.length===e.length)||t.map((function(t){return e.indexOf(t)>-1})).indexOf(!1)>-1:t!==e},enumerable:!1,configurable:!0}),e.prototype.updateTo=function(){this.needsToBeSynced&&(this.value=this.tag.scope.get(this.key))},e.prototype.updateFrom=function(){this.needsToBeSynced&&this.tag.scope.set(this.key,this.value)},Object.defineProperty(e.prototype,"key",{get:function(){return"@"+this.attributeName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.tag.getElementAttribute(this.tag.isMagicAttribute(this.key)?this.key:this.attributeName)},set:function(t){this.tag.setElementAttribute(this.tag.isMagicAttribute(this.key)?this.key:this.attributeName,t)},enumerable:!1,configurable:!0}),e.canDefer=!1,e}(n(5092).Attribute);e.StandardAttribute=s},1857:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.StyleAttribute=void 0;var u=n(1371),c=n(5092),l=n(4843),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setup=function(){return a(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(o){switch(o.label){case 0:return(e=this.getAttributeValue()||null)?(this.scopeRef=this.tag.scope.getReference(e,!0),[4,this.scopeRef.getScope()]):[3,3];case 1:return n=o.sent(),[4,this.scopeRef.getKey()];case 2:return r=o.sent(),this.styleScope=n.get(r),this.styleScope||(this.styleScope=new l.Scope(n),n.set(r,this.styleScope)),[3,4];case 3:this.styleScope=this.tag.scope,o.label=4;case 4:return[4,t.prototype.setup.call(this)];case 5:return o.sent(),[2]}}))}))},e.prototype.connect=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.styleScope.on("change",this.handleEvent.bind(this)),[4,t.prototype.connect.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.extract=function(){return a(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return this.updateFrom(),this.updateTo(),[4,t.prototype.extract.call(this)];case 1:return e.sent(),[2]}}))}))},e.prototype.updateFrom=function(){var t=["cssText","getPropertyPriority","getPropertyValue","removeProperty","setProperty","length"];for(var e in this.tag.style)if(!(t.indexOf(e)>-1||isFinite(e))){var n=this.tag.style[e],r="$"+e;n&&n!==this.styleScope.get(r)&&this.styleScope.set(r,n)}},e.prototype.updateTo=function(){for(var t=0,e=this.styleScope.keys;t<e.length;t++){var n=e[t],r=this.styleScope.get(n);if(n.startsWith("$")){var o=n.substr(1);this.tag.element.style[o]=r.value}}},e.prototype.mutate=function(e){t.prototype.mutate.call(this,e),this.updateFrom()},e.prototype.handleEvent=function(t,e){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){return t.startsWith("$")&&(n=t.substr(1),e.value!==e.previousValue&&(this.tag.element.style[n]=e.value)),[2]}))}))},e.canDefer=!1,e=i([u.Registry.attribute("vsn-styles")],e)}(c.Attribute);e.StyleAttribute=p},1514:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a};Object.defineProperty(e,"__esModule",{value:!0}),e.Template=void 0;var a=n(1371),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.canDefer=!1,e=i([a.Registry.attribute("vsn-template")],e)}(n(5092).Attribute);e.Template=s},8696:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},s=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.TypeAttribute=void 0;var u=n(5092),c=n(1371),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.extract=function(){return a(this,void 0,void 0,(function(){var e,n,r,o,i;return s(this,(function(a){switch(a.label){case 0:e=this.getAttributeBinding(),n=this.getAttributeValue();try{r=this.tag.scope.getReference(e)}catch(t){return console.error("error",t),[2]}return[4,r.getScope()];case 1:return i=(o=a.sent()).setType,[4,r.getKey()];case 2:return i.apply(o,[a.sent(),n]),[4,t.prototype.extract.call(this)];case 3:return a.sent(),[2]}}))}))},e.canDefer=!1,e=i([c.Registry.attribute("vsn-type")],e)}(u.Attribute);e.TypeAttribute=l},2132:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TypeAttribute=e.Template=e.StyleAttribute=e.StandardAttribute=e.SetAttribute=e.ScriptAttribute=e.ScopeChange=e.ScopeAttribute=e.RootAttribute=e.Referenced=e.On=e.Name=e.ModelAttribute=e.ListItemModel=e.ListItem=e.List=e.LazyAttribute=e.KeyUp=e.KeyDown=e.JSONAttribute=e.If=e.Format=e.Exec=e.DisableIf=e.ControllerAttribute=e.Bind=e.AddClassIf=void 0;var r=n(8041);Object.defineProperty(e,"AddClassIf",{enumerable:!0,get:function(){return r.AddClassIf}});var o=n(8171);Object.defineProperty(e,"Bind",{enumerable:!0,get:function(){return o.Bind}});var i=n(3650);Object.defineProperty(e,"ControllerAttribute",{enumerable:!0,get:function(){return i.ControllerAttribute}});var a=n(4893);Object.defineProperty(e,"DisableIf",{enumerable:!0,get:function(){return a.DisableIf}});var s=n(6813);Object.defineProperty(e,"Exec",{enumerable:!0,get:function(){return s.Exec}});var u=n(8289);Object.defineProperty(e,"Format",{enumerable:!0,get:function(){return u.Format}});var c=n(523);Object.defineProperty(e,"If",{enumerable:!0,get:function(){return c.If}});var l=n(9979);Object.defineProperty(e,"JSONAttribute",{enumerable:!0,get:function(){return l.JSONAttribute}});var p=n(9459);Object.defineProperty(e,"KeyDown",{enumerable:!0,get:function(){return p.KeyDown}});var f=n(7459);Object.defineProperty(e,"KeyUp",{enumerable:!0,get:function(){return f.KeyUp}});var h=n(1898);Object.defineProperty(e,"LazyAttribute",{enumerable:!0,get:function(){return h.LazyAttribute}});var y=n(2496);Object.defineProperty(e,"List",{enumerable:!0,get:function(){return y.List}});var d=n(6846);Object.defineProperty(e,"ListItem",{enumerable:!0,get:function(){return d.ListItem}});var b=n(274);Object.defineProperty(e,"ListItemModel",{enumerable:!0,get:function(){return b.ListItemModel}});var v=n(3329);Object.defineProperty(e,"ModelAttribute",{enumerable:!0,get:function(){return v.ModelAttribute}});var _=n(1576);Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return _.Name}});var g=n(8447);Object.defineProperty(e,"On",{enumerable:!0,get:function(){return g.On}});var w=n(6338);Object.defineProperty(e,"Referenced",{enumerable:!0,get:function(){return w.Referenced}});var m=n(6957);Object.defineProperty(e,"RootAttribute",{enumerable:!0,get:function(){return m.RootAttribute}});var O=n(5930);Object.defineProperty(e,"ScopeAttribute",{enumerable:!0,get:function(){return O.ScopeAttribute}});var T=n(1085);Object.defineProperty(e,"ScopeChange",{enumerable:!0,get:function(){return T.ScopeChange}});var A=n(8616);Object.defineProperty(e,"ScriptAttribute",{enumerable:!0,get:function(){return A.ScriptAttribute}});var E=n(3070);Object.defineProperty(e,"SetAttribute",{enumerable:!0,get:function(){return E.SetAttribute}});var S=n(6032);Object.defineProperty(e,"StandardAttribute",{enumerable:!0,get:function(){return S.StandardAttribute}});var x=n(1857);Object.defineProperty(e,"StyleAttribute",{enumerable:!0,get:function(){return x.StyleAttribute}});var P=n(1514);Object.defineProperty(e,"Template",{enumerable:!0,get:function(){return P.Template}});var j=n(8696);Object.defineProperty(e,"TypeAttribute",{enumerable:!0,get:function(){return j.TypeAttribute}})},2712:(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ElementHelper=void 0;var r=n(2947),o=function(){function t(){}return t.hasVisionAttribute=function(t,e){if(void 0===e&&(e="vsn-"),!t.attributes||t.attributes.length<=0)return!1;for(var n=0;n<t.attributes.length;n++){if(t.attributes[n].name.startsWith(e))return!0}for(var o=0,i=Array.from(t.classList);o<i.length;o++){var a=i[o];if(r.ClassNode.isClass(a))return!0}return!1},t.normalizeElementID=function(t){return t?t.replace(/-([a-zA-Z0-9])/g,(function(t){return t[1].toUpperCase()})):null},t}();e.ElementHelper=o},4264:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VisionHelper=void 0;var n=function(){function t(){}return t.isConstructor=function(t){return t&&t.hasOwnProperty("prototype")&&!!t.prototype&&!!t.prototype.constructor&&!!t.prototype.constructor.name},Object.defineProperty(t,"document",{get:function(){return"object"==typeof document?document:null},enumerable:!1,configurable:!0}),Object.defineProperty(t,"window",{get:function(){return"object"==typeof window?window:null},enumerable:!1,configurable:!0}),t.isMobile=function(){var e,n=!1;return navigator&&t.window&&(e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0)),n},Object.defineProperty(t,"inDevelopment",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t,"doBenchmark",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t,"inLegacy",{get:function(){return"es5"===process.env.BUILD_TARGET},enumerable:!1,configurable:!0}),t.getUriWithParams=function(t,e){var n=window.location.origin;!t.startsWith(".")&&t.startsWith("/")||(n+=window.location.pathname);var r=new URL(t,n),o=new URLSearchParams(r.search);for(var i in e)void 0!==e[i]&&o.set(i,e[i]);return r.search=o.toString(),r.toString()},t.nice=function(e,n){void 0===n&&(n=100),t.window&&window.requestIdleCallback?window.requestIdleCallback(e):setTimeout(e,n)},Object.defineProperty(t,"wasmSupport",{get:function(){try{if("object"==typeof WebAssembly&&"function"==typeof WebAssembly.instantiate){var t=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(t instanceof WebAssembly.Module)return new WebAssembly.Instance(t)instanceof WebAssembly.Instance}}catch(t){}return!1},enumerable:!1,configurable:!0}),t}();e.VisionHelper=n},3145:function(t,e,n){var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),a=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)},s=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.vision=e.Tag=e.SimplePromise=e.MessageList=e.EventDispatcher=e.Model=e.Controller=e.WrappedArray=e.ScopeReference=e.Scope=e.DOM=e.Validators=e.Types=e.Formats=e.Vision=void 0;var c=n(9033),l=n(8572),p=n(1371),f=n(6417),h=n(4264),y=n(7754),d=n(7677),b=n(5559),v=n(1469),_=function(t){function e(){var n=t.call(this)||this;return n.registry=p.Registry.instance,n.config=f.Configuration.instance,h.VisionHelper.document?document.addEventListener("DOMContentLoaded",n.setup.bind(n)):console.warn("No dom, running in CLI mode."),n.registry.functions.register("log",console.log),n.registry.functions.register("warn",console.warn),n.registry.functions.register("error",console.error),n.registry.functions.register("info",console.info),n.registry.controllers.register("Object",Object),n.registry.controllers.register("WrappedArray",l.WrappedArray),n.registry.controllers.register("Data",v.DynamicScopeData),h.VisionHelper.window&&(window.Vision=e,window.Registry=p.Registry,window.vision=window.vsn=n,window.Tree=y.Tree,window.$=d.Query,h.VisionHelper.window.dispatchEvent(new Event("vsn"))),n}return o(e,t),Object.defineProperty(e.prototype,"dom",{get:function(){return this._dom},enumerable:!1,configurable:!0}),e.prototype.exec=function(t){return s(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._dom.exec(t)];case 1:return[2,e.sent()]}}))}))},e.prototype.setup=function(){return s(this,void 0,void 0,(function(){var t,e,n;return u(this,(function(r){switch(r.label){case 0:return document.body.setAttribute("vsn-root",""),this._dom=c.DOM.instance,t=(new Date).getTime(),[4,this._dom.buildFrom(document,!0)];case 1:return r.sent(),e=(new Date).getTime(),n=e-t,console.info("Took "+n+"ms to start up VisionJS. https://www.vsnjs.com/",window?"v"+window.VSN_VERSION:null),[2]}}))}))},Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e}(b.EventDispatcher);e.Vision=_,a(n(1371),e),a(n(2132),e),a(n(9618),e),a(n(5092),e),a(n(7754),e);var g=n(8001);Object.defineProperty(e,"Formats",{enumerable:!0,get:function(){return g.Formats}});var w=n(3398);Object.defineProperty(e,"Types",{enumerable:!0,get:function(){return w.Types}});var m=n(3463);Object.defineProperty(e,"Validators",{enumerable:!0,get:function(){return m.Validators}});var O=n(9033);Object.defineProperty(e,"DOM",{enumerable:!0,get:function(){return O.DOM}});var T=n(4843);Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return T.Scope}});var A=n(414);Object.defineProperty(e,"ScopeReference",{enumerable:!0,get:function(){return A.ScopeReference}});var E=n(8572);Object.defineProperty(e,"WrappedArray",{enumerable:!0,get:function(){return E.WrappedArray}});var S=n(126);Object.defineProperty(e,"Controller",{enumerable:!0,get:function(){return S.Controller}});var x=n(5453);Object.defineProperty(e,"Model",{enumerable:!0,get:function(){return x.Model}});var P=n(5559);Object.defineProperty(e,"EventDispatcher",{enumerable:!0,get:function(){return P.EventDispatcher}});var j=n(9188);Object.defineProperty(e,"MessageList",{enumerable:!0,get:function(){return j.MessageList}});var k=n(9045);Object.defineProperty(e,"SimplePromise",{enumerable:!0,get:function(){return k.SimplePromise}});var N=n(712);Object.defineProperty(e,"Tag",{enumerable:!0,get:function(){return N.Tag}}),e.vision=_.instance}},e={};(function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r].call(i.exports,i,i.exports,n),i.exports})(3145)})();